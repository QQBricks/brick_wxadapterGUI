!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=30)}([function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.default={d:function(e,t,n){console.log(n)},error:function(e){console.error(e)}}},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.isRemoteUrl=o,t.wrapLocalUrl=l,t.wrapSandBoxPath=s,t.extractFileNameFromUrl=u,t.extractFilePathFromUrl=c,t.getImgPath=function(e){var t=void 0;if(o(e)){var n=c(e)+u(e);n.replace("/","#"),n.replace("\\","#"),t=s("download/images/"+n)}else 0==e.indexOf(r)||0==e.indexOf(a)?t=e:(t=l(e),BK.FileUtil.isFileExist(t)||(t=s(e)));return t},t.getAudioPath=function(e){var t=void 0;if(o(e)){var n=u(e);t=s("download/audio/"+n)}else t=l(e);return t},t.hexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:parseInt(t[4],16)}:null},t.colourNameToHex=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return void 0!==t[e.toLowerCase()]&&t[e.toLowerCase()]},t.colorToRgba=function(e){var t=0,n=0,i=0,r=0;"#"===e.charAt(0)&&(e=e.substr(1,6));e=(e=e.replace(/ /g,"")).toLowerCase();var a={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var o in a)e==o&&(e=a[o]);for(var l=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),255]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),255]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),255]}},{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d+(\.*\d*))\)$/,example:["rgba(123, 234, 45,12)","rgba(255,234,245,12)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseFloat(e[4])]}},{re:/^(\w{2})(\w{2})(\w{2})(\w{2})$/,example:["#00ff0000","33669900"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),parseFloat(e[4])]}}],s=0;s<l.length;s++){var u=l[s].re,c=l[s].process,f=u.exec(e);if(f){var d=c(f);t=d[0],n=d[1],i=d[2],(r=d[3])<=1&&(r*=255),!0}}return t=t<0||isNaN(t)?0:t>255?255:t,n=n<0||isNaN(n)?0:n>255?255:n,i=i<0||isNaN(i)?0:i>255?255:i,r=r<0||isNaN(r)?0:r>255?255:r,{r:(t+0)/255,g:(n+0)/255,b:(i+0)/255,a:(r+0)/255}},t.arrayBufferToBricksBuffer=function(e){if(h&&BK.Misc.toBKBuffer)return BK.Misc.toBKBuffer(e,e.byteOffset,e.byteLength);if(BK.Misc.transferArrayBuffer&&!d){var t=function(e){function t(e,t){var n=t.length,i={type:e,length:t.byteLength,offset:0};switch(e){case 0:for(var r=0;n>0;){var a=Math.min(n,40960),o=new Int8Array(t.buffer,r*Int8Array.BYTES_PER_ELEMENT,a);i.offset=r,BK.Misc.transferArrayBuffer.apply(i,o),r+=40960,n-=40960}break;case 1:for(var r=0;n>0;){var a=Math.min(n,40960),o=new Int16Array(t.buffer,r*Int16Array.BYTES_PER_ELEMENT,a);i.offset=r,BK.Misc.transferArrayBuffer.apply(i,o),r+=40960,n-=40960}break;case 2:for(var r=0;n>0;){var a=Math.min(n,40960),o=new Int32Array(t.buffer,r*Int32Array.BYTES_PER_ELEMENT,a);i.offset=r,BK.Misc.transferArrayBuffer.apply(i,o),r+=40960,n-=40960}break;case 3:for(var r=0;n>0;){var a=Math.min(n,40960),o=new Uint8Array(t.buffer,r*Uint8Array.BYTES_PER_ELEMENT,a);i.offset=r,BK.Misc.transferArrayBuffer.apply(i,o),r+=40960,n-=40960}break;case 5:for(var r=0;n>0;){var a=Math.min(n,40960),o=new Uint16Array(t.buffer,r*Uint16Array.BYTES_PER_ELEMENT,a);i.offset=r,BK.Misc.transferArrayBuffer.apply(i,o),r+=40960,n-=40960}break;case 6:for(var r=0;n>0;){var a=Math.min(n,40960),o=new Uint32Array(t.buffer,r*Uint32Array.BYTES_PER_ELEMENT,a);i.offset=r,BK.Misc.transferArrayBuffer.apply(i,o),r+=40960,n-=40960}break;case 7:for(var r=0;n>0;){var a=Math.min(n,40960),o=new Float32Array(t.buffer,r*Float32Array.BYTES_PER_ELEMENT,a);i.offset=r,BK.Misc.transferArrayBuffer.apply(i,o),r+=40960,n-=40960}}}e instanceof Int8Array==!0?t(0,e):e instanceof Int16Array==!0?t(1,e):e instanceof Int32Array==!0?t(2,e):e instanceof Uint8Array==!0?t(3,e):e instanceof Uint16Array==!0?t(5,e):e instanceof Uint32Array==!0?t(6,e):e instanceof Float32Array==!0&&t(7,e);return BK.Misc.getTransferedArrayBuffer()}(e);return t}var n=(0,i.encode)(e.buffer);return BK.Misc.decodeBase64FromString(n)},t.bricksBufferToArrayBuffer=function(e){return p(e,0)},t.BKBufferToUint8ClampedArray=function(e){return new Uint8ClampedArray(p(e,0))};var i=n(5),r="GameRes://",a="GameSandBox://";function o(e){return/^https?:\/\//.test(e)}function l(e){return/^GameRes:\/\//.test(e)?e:"GameRes://"+e.replace(/^\.*\//,"")}function s(e){return/^GameSandBox:\/\//.test(e)?e:"GameSandBox://"+e.replace(/^\.*\//,"")}function u(e){var t=e.lastIndexOf("/");return-1==t&&(t=e.lastIndexOf("\\")),e.substr(t+1)}function c(e){var t=0;t=e.startsWith("https")?e.substr(8).indexOf("/")+9:e.startsWith("http")?e.substr(7).indexOf("/")+8:e.indexOf("/")+1;var n=e.lastIndexOf("/");return e.substring(t,n)+"/"}var f=BK.Director.queryDeviceInfo(),d="android"===f.platform,h=!("ios"===f.platform&&Number(f.version.split(".")[0])<10);function p(e,t){if(h&&BK.Misc.toArrayBuffer){var n=new ArrayBuffer(e.length);return BK.Misc.toArrayBuffer(e,n),n}return BK.Misc.toArrayBufferCompatible?BK.Misc.toArrayBufferCompatible(e,t):function(e){e.rewind();var t=BK.Misc.encodeBase64FromBuffer(e),n=(0,i.decode)(t);return new Uint8Array(n).buffer.slice(0,e.bufferLength())}(e)}},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"getPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GameRes",n=e;return"GameRes"===t?n="GameRes://"+n:"GameSandBox"===t&&(n="GameSandBox://"+n),n}}]),e}();t.default=r,r.SCHEMA_RES="GameRes",r.SCHEMA_SAND="GameSandBox"},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.setTimeout=a,t.clearTimeout=o,t.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=GameGlobal._fpsinterval,i=a(e,n);return t+n,i},t.setPreferredFramesPerSecond=function(e){GameGlobal._fpsinterval=1-1*e/60},t.cancelAnimationFrame=function(e){o(e)},t.setInterval=function(e,t){var n=new BK.Ticker;n.interval=60*t/1e3,n.setTickerCallBack(function(t,n){e()});var i=++r;return GameGlobal.intervals[i]={i:i,ticker:n},i},t.clearInterval=function(e){e&&GameGlobal.intervals[e]&&(GameGlobal.intervals[e].ticker.dispose(),delete GameGlobal.intervals[e])},GameGlobal.timers={},GameGlobal.intervals={},GameGlobal._fpsinterval=0;var i=0,r=0;BK.Director.ticker.add(function(e,t){Object.keys(GameGlobal.timers).map(function(t){var n=GameGlobal.timers[t];n.b+n.t<=e&&(delete GameGlobal.timers[t],n.f(e))})});function a(e,t){t||(t=0);var n=++i;return GameGlobal.timers[n]={b:Date.now(),t:t,f:e},n}function o(e){delete GameGlobal.timers[e]}},function(e,t){function n(e,t){for(var n in e)t[n]=e[n]}function i(e,t){var i=e.prototype;if(Object.create){var r=Object.create(t.prototype);i.__proto__=r}if(!(i instanceof t)){function a(){}a.prototype=t.prototype,n(i,a=new a),e.prototype=i=a}i.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),i.constructor=e)}var r="http://www.w3.org/1999/xhtml",a={},o=a.ELEMENT_NODE=1,l=a.ATTRIBUTE_NODE=2,s=a.TEXT_NODE=3,u=a.CDATA_SECTION_NODE=4,c=a.ENTITY_REFERENCE_NODE=5,f=a.ENTITY_NODE=6,d=a.PROCESSING_INSTRUCTION_NODE=7,h=a.COMMENT_NODE=8,p=a.DOCUMENT_NODE=9,v=a.DOCUMENT_TYPE_NODE=10,m=a.DOCUMENT_FRAGMENT_NODE=11,g=a.NOTATION_NODE=12,y={},b={},w=(y.INDEX_SIZE_ERR=(b[1]="Index size error",1),y.DOMSTRING_SIZE_ERR=(b[2]="DOMString size error",2),y.HIERARCHY_REQUEST_ERR=(b[3]="Hierarchy request error",3)),k=(y.WRONG_DOCUMENT_ERR=(b[4]="Wrong document",4),y.INVALID_CHARACTER_ERR=(b[5]="Invalid character",5),y.NO_DATA_ALLOWED_ERR=(b[6]="No data allowed",6),y.NO_MODIFICATION_ALLOWED_ERR=(b[7]="No modification allowed",7),y.NOT_FOUND_ERR=(b[8]="Not found",8)),S=(y.NOT_SUPPORTED_ERR=(b[9]="Not supported",9),y.INUSE_ATTRIBUTE_ERR=(b[10]="Attribute in use",10));y.INVALID_STATE_ERR=(b[11]="Invalid state",11),y.SYNTAX_ERR=(b[12]="Syntax error",12),y.INVALID_MODIFICATION_ERR=(b[13]="Invalid modification",13),y.NAMESPACE_ERR=(b[14]="Invalid namespace",14),y.INVALID_ACCESS_ERR=(b[15]="Invalid access",15);function E(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,b[e]),this.message=b[e],Error.captureStackTrace&&Error.captureStackTrace(this,E);return n.code=e,t&&(this.message=this.message+": "+t),n}function _(){}function C(e,t){this._node=e,this._refresh=t,B(this)}function B(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var i=e._refresh(e._node);ne(e,"length",i.length),n(i,e),e._inc=t}}function T(){}function N(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function x(e,t,n,i){if(i?t[N(t,i)]=n:t[t.length++]=n,e){n.ownerElement=e;var r=e.ownerDocument;r&&(i&&K(r,e,i),function(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(r,e,n))}}function P(e,t,n){var i=N(t,n);if(!(i>=0))throw E(k,new Error(e.tagName+"@"+n));for(var r=t.length-1;i<r;)t[i]=t[++i];if(t.length=r,e){var a=e.ownerDocument;a&&(K(a,e,n),n.ownerElement=null)}}function O(e){if(this._features={},e)for(var t in e)this._features=e[t]}function F(){}function M(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function A(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(A(e,t))return!0}while(e=e.nextSibling)}function I(){}function K(e,t,n,i){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function D(e,t,n){if(e&&e._inc){e._inc++;var i=t.childNodes;if(n)i[i.length++]=n;else{for(var r=t.firstChild,a=0;r;)i[a++]=r,r=r.nextSibling;i.length=a}}}function U(e,t){var n=t.previousSibling,i=t.nextSibling;return n?n.nextSibling=i:e.firstChild=i,i?i.previousSibling=n:e.lastChild=n,D(e.ownerDocument,e),t}function L(e,t,n){var i=t.parentNode;if(i&&i.removeChild(t),t.nodeType===m){var r=t.firstChild;if(null==r)return t;var a=t.lastChild}else r=a=t;var o=n?n.previousSibling:e.lastChild;r.previousSibling=o,a.nextSibling=n,o?o.nextSibling=r:e.firstChild=r,null==n?e.lastChild=a:n.previousSibling=a;do{r.parentNode=e}while(r!==a&&(r=r.nextSibling));return D(e.ownerDocument||e,e),t.nodeType==m&&(t.firstChild=t.lastChild=null),t}function j(){this._nsMap={}}function R(){}function G(){}function z(){}function q(){}function V(){}function H(){}function W(){}function Q(){}function $(){}function J(){}function Y(){}function X(){}function Z(e,t){var n=[],i=9==this.nodeType?this.documentElement:this,r=i.prefix,a=i.namespaceURI;if(a&&null==r&&null==(r=i.lookupPrefix(a)))var o=[{namespace:a,prefix:null}];return te(this,n,e,t,o),n.join("")}function ee(e,t,n){var i=e.prefix||"",r=e.namespaceURI;if(!i&&!r)return!1;if("xml"===i&&"http://www.w3.org/XML/1998/namespace"===r||"http://www.w3.org/2000/xmlns/"==r)return!1;for(var a=n.length;a--;){var o=n[a];if(o.prefix==i)return o.namespace!=r}return!0}function te(e,t,n,i,a){if(i){if(!(e=i(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case o:a||(a=[]);a.length;var f=e.attributes,g=f.length,y=e.firstChild,b=e.tagName;n=r===e.namespaceURI||n,t.push("<",b);for(var w=0;w<g;w++){"xmlns"==(k=f.item(w)).prefix?a.push({prefix:k.localName,namespace:k.value}):"xmlns"==k.nodeName&&a.push({prefix:"",namespace:k.value})}for(w=0;w<g;w++){var k;if(ee(k=f.item(w),0,a)){var S=k.prefix||"",E=k.namespaceURI,_=S?" xmlns:"+S:" xmlns";t.push(_,'="',E,'"'),a.push({prefix:S,namespace:E})}te(k,t,n,i,a)}if(ee(e,0,a)){S=e.prefix||"",E=e.namespaceURI,_=S?" xmlns:"+S:" xmlns";t.push(_,'="',E,'"'),a.push({prefix:S,namespace:E})}if(y||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(b)){if(t.push(">"),n&&/^script$/i.test(b))for(;y;)y.data?t.push(y.data):te(y,t,n,i,a),y=y.nextSibling;else for(;y;)te(y,t,n,i,a),y=y.nextSibling;t.push("</",b,">")}else t.push("/>");return;case p:case m:for(y=e.firstChild;y;)te(y,t,n,i,a),y=y.nextSibling;return;case l:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,M),'"');case s:return t.push(e.data.replace(/[<&]/g,M));case u:return t.push("<![CDATA[",e.data,"]]>");case h:return t.push("\x3c!--",e.data,"--\x3e");case v:var C=e.publicId,B=e.systemId;if(t.push("<!DOCTYPE ",e.name),C)t.push(' PUBLIC "',C),B&&"."!=B&&t.push('" "',B),t.push('">');else if(B&&"."!=B)t.push(' SYSTEM "',B,'">');else{var T=e.internalSubset;T&&t.push(" [",T,"]"),t.push(">")}return;case d:return t.push("<?",e.target," ",e.data,"?>");case c:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ne(e,t,n){e[t]=n}E.prototype=Error.prototype,n(y,E),_.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],i=0;i<this.length;i++)te(this[i],n,e,t);return n.join("")}},C.prototype.item=function(e){return B(this),this[e]},i(C,_),T.prototype={length:0,item:_.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new E(S);var n=this.getNamedItem(e.nodeName);return x(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new E(S);return t=this.getNamedItemNS(e.namespaceURI,e.localName),x(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return P(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return P(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var i=this[n];if(i.localName==t&&i.namespaceURI==e)return i}return null}},O.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var i=new I;if(i.implementation=this,i.childNodes=new _,i.doctype=n,n&&i.appendChild(n),t){var r=i.createElementNS(e,t);i.appendChild(r)}return i},createDocumentType:function(e,t,n){var i=new H;return i.name=e,i.nodeName=e,i.publicId=t,i.systemId=n,i}},F.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return L(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return U(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,n,i){var r=new n.constructor;for(var a in n){var s=n[a];"object"!=typeof s&&s!=r[a]&&(r[a]=s)}n.childNodes&&(r.childNodes=new _);r.ownerDocument=t;switch(r.nodeType){case o:var u=n.attributes,c=r.attributes=new T,f=u.length;c._ownerElement=r;for(var d=0;d<f;d++)r.setAttributeNode(e(t,u.item(d),!0));break;case l:i=!0}if(i)for(var h=n.firstChild;h;)r.appendChild(e(t,h,i)),h=h.nextSibling;return r}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==s&&e.nodeType==s?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var i in n)if(n[i]==e)return i;t=t.nodeType==l?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==l?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},n(a,F),n(a,F.prototype),I.prototype={nodeName:"#document",nodeType:p,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==m){for(var n=e.firstChild;n;){var i=n.nextSibling;this.insertBefore(n,t),n=i}return e}return null==this.documentElement&&e.nodeType==o&&(this.documentElement=e),L(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),U(this,e)},importNode:function(e,t){return function e(t,n,i){var r;switch(n.nodeType){case o:(r=n.cloneNode(!1)).ownerDocument=t;case m:break;case l:i=!0}r||(r=n.cloneNode(!1));r.ownerDocument=t;r.parentNode=null;if(i)for(var a=n.firstChild;a;)r.appendChild(e(t,a,i)),a=a.nextSibling;return r}(this,e,t)},getElementById:function(e){var t=null;return A(this.documentElement,function(n){if(n.nodeType==o&&n.getAttribute("id")==e)return t=n,!0}),t},createElement:function(e){var t=new j;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new _,(t.attributes=new T)._ownerElement=t,t},createDocumentFragment:function(){var e=new J;return e.ownerDocument=this,e.childNodes=new _,e},createTextNode:function(e){var t=new z;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new q;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new V;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new Y;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new R;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new $;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new j,i=t.split(":"),r=n.attributes=new T;return n.childNodes=new _,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,r._ownerElement=n,n},createAttributeNS:function(e,t){var n=new R,i=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,n}},i(I,F),j.prototype={nodeType:o,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===m?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var i=e.lastChild;n.removeChild(t),i=e.lastChild}return i=e.lastChild,t.parentNode=e,t.previousSibling=i,t.nextSibling=null,i?i.nextSibling=t:e.firstChild=t,e.lastChild=t,D(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var i=this.ownerDocument.createAttributeNS(e,t);i.value=i.nodeValue=""+n,this.setAttributeNode(i)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new C(this,function(t){var n=[];return A(t,function(i){i===t||i.nodeType!=o||"*"!==e&&i.tagName!=e||n.push(i)}),n})},getElementsByTagNameNS:function(e,t){return new C(this,function(n){var i=[];return A(n,function(r){r===n||r.nodeType!==o||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||i.push(r)}),i})}},I.prototype.getElementsByTagName=j.prototype.getElementsByTagName,I.prototype.getElementsByTagNameNS=j.prototype.getElementsByTagNameNS,i(j,F),R.prototype.nodeType=l,i(R,F),G.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(b[w])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},i(G,F),z.prototype={nodeName:"#text",nodeType:s,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var i=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}},i(z,G),q.prototype={nodeName:"#comment",nodeType:h},i(q,G),V.prototype={nodeName:"#cdata-section",nodeType:u},i(V,G),H.prototype.nodeType=v,i(H,F),W.prototype.nodeType=g,i(W,F),Q.prototype.nodeType=f,i(Q,F),$.prototype.nodeType=c,i($,F),J.prototype.nodeName="#document-fragment",J.prototype.nodeType=m,i(J,F),Y.prototype.nodeType=d,i(Y,F),X.prototype.serializeToString=function(e,t,n){return Z.call(e,t,n)},F.prototype.toString=Z;try{if(Object.defineProperty){Object.defineProperty(C.prototype,"length",{get:function(){return B(this),this.$$length}}),Object.defineProperty(F.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case o:case m:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case o:case m:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ne=function(e,t,n){e["$$"+t]=n}}}catch(e){}t.DOMImplementation=O,t.XMLSerializer=X},function(e,t,n){;!function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),i=0;i<e.length;i++)n[e.charCodeAt(i)]=i;t.encode=function(t){var n,i=new Uint8Array(t),r=i.length,a="";for(n=0;n<r;n+=3)a+=e[i[n]>>2],a+=e[(3&i[n])<<4|i[n+1]>>4],a+=e[(15&i[n+1])<<2|i[n+2]>>6],a+=e[63&i[n+2]];return r%3==2?a=a.substring(0,a.length-1)+"=":r%3==1&&(a=a.substring(0,a.length-2)+"=="),a},t.decode=function(e){var t,i,r,a,o,l=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(l--,"="===e[e.length-2]&&l--);var c=new ArrayBuffer(l),f=new Uint8Array(c);for(t=0;t<s;t+=4)i=n[e.charCodeAt(t)],r=n[e.charCodeAt(t+1)],a=n[e.charCodeAt(t+2)],o=n[e.charCodeAt(t+3)],f[u++]=i<<2|r>>4,f[u++]=(15&r)<<4|a>>2,f[u++]=(3&a)<<6|63&o;return c}}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0);(i=a)&&i.__esModule;var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.touchEventStartcb=[],this.touchEventMovecb=[],this.touchEventEndcb=[],this.touchEventCancelcb=[]}return r(e,[{key:"dispatchEvent",value:function(){var e=this;BK.Director.ticker.add(function(){var t=BK.TouchEvent.getTouchEvent();if(void 0!=t)t.map(function(t){var n=t.x,i=BK.Director.screenPixelSize.height-t.y,r=BK.Director.screenPixelSize.width/BK.Director.renderSize.width;n=n,i=i;var a={identifier:t.id,id:t.id,screenX:"laya"===window.ENGINE_NAME?n:n/r,screenY:"laya"===window.ENGINE_NAME?i:i/r,clientX:n,clientY:i,pageX:"laya"===window.ENGINE_NAME?n:n/r,pageY:"laya"===window.ENGINE_NAME?i:i/r};return 2==t.status?e.touchEventStartcb.map(function(e){e({touches:[a],changedTouches:[a],timeStamp:Date.now(),preventDefault:function(){},type:"touchstart"})}):3==t.status?e.touchEventMovecb.map(function(e){e({touches:[a],changedTouches:[a],timeStamp:Date.now(),preventDefault:function(){},type:"touchmove"})}):1==t.status&&e.touchEventEndcb.map(function(e){e({touches:[a],changedTouches:[a],timeStamp:Date.now(),preventDefault:function(){},type:"touchend"})}),a},e);BK.TouchEvent.updateTouchStatus()})}},{key:"onTouchStart",value:function(e){null!=e&&this.touchEventStartcb.push(e)}},{key:"onTouchMove",value:function(e){this.touchEventMovecb.push(e)}},{key:"onTouchCancel",value:function(e){this.touchEventCancelcb.push(e)}},{key:"onTouchEnd",value:function(e){this.touchEventEndcb.push(e)}},{key:"offTouchStart",value:function(e){var t=this.touchEventStartcb.indexOf(e);this.touchEventStartcb.splice(t,1)}},{key:"offTouchMove",value:function(e){var t=this.touchEventMovecb.indexOf(e);this.touchEventMovecb.splice(t,1)}},{key:"offTouchCancel",value:function(e){var t=this.touchEventCancelcb.indexOf(e);this.touchEventCancelcb.splice(t,1)}},{key:"offTouchEnd",value:function(e){var t=this.touchEventEndcb.indexOf(e);this.touchEventEndcb.splice(t,1)}}]),e}());o.dispatchEvent(),t.default=o},function(e,t){var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,i=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r=new RegExp("^"+n.source+i.source+"*(?::"+n.source+i.source+"*)?$"),a=0,o=1,l=2,s=3,u=4,c=5,f=6,d=7;function h(){}function p(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function v(e,t,n,i,r,h){for(var p,v=++t,m=a;;){var g=e.charAt(v);switch(g){case"=":if(m===o)p=e.slice(t,v),m=s;else{if(m!==l)throw new Error("attribute equal must after attrName");m=s}break;case"'":case'"':if(m===s||m===o){if(m===o&&(h.warning('attribute value must after "="'),p=e.slice(t,v)),t=v+1,!((v=e.indexOf(g,t))>0))throw new Error("attribute value no end '"+g+"' match");y=e.slice(t,v).replace(/&#?\w+;/g,r),n.add(p,y,t-1),m=c}else{if(m!=u)throw new Error('attribute value must after "="');y=e.slice(t,v).replace(/&#?\w+;/g,r),n.add(p,y,t),h.warning('attribute "'+p+'" missed start quot('+g+")!!"),t=v+1,m=c}break;case"/":switch(m){case a:n.setTagName(e.slice(t,v));case c:case f:case d:m=d,n.closed=!0;case u:case o:case l:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return h.error("unexpected end of input"),m==a&&n.setTagName(e.slice(t,v)),v;case">":switch(m){case a:n.setTagName(e.slice(t,v));case c:case f:case d:break;case u:case o:"/"===(y=e.slice(t,v)).slice(-1)&&(n.closed=!0,y=y.slice(0,-1));case l:m===l&&(y=p),m==u?(h.warning('attribute "'+y+'" missed quot(")!!'),n.add(p,y.replace(/&#?\w+;/g,r),t)):("http://www.w3.org/1999/xhtml"===i[""]&&y.match(/^(?:disabled|checked|selected)$/i)||h.warning('attribute "'+y+'" missed value!! "'+y+'" instead!!'),n.add(y,y,t));break;case s:throw new Error("attribute value missed!!")}return v;case"":g=" ";default:if(g<=" ")switch(m){case a:n.setTagName(e.slice(t,v)),m=f;break;case o:p=e.slice(t,v),m=l;break;case u:var y=e.slice(t,v).replace(/&#?\w+;/g,r);h.warning('attribute "'+y+'" missed quot(")!!'),n.add(p,y,t);case c:m=f}else switch(m){case l:n.tagName;"http://www.w3.org/1999/xhtml"===i[""]&&p.match(/^(?:disabled|checked|selected)$/i)||h.warning('attribute "'+p+'" missed value!! "'+p+'" instead2!!'),n.add(p,p,t),t=v,m=o;break;case c:h.warning('attribute space is required"'+p+'"!!');case f:m=o,t=v;break;case s:m=u,t=v;break;case d:throw new Error("elements closed character '/' and '>' must be connected to")}}v++}}function m(e,t,n){for(var i=e.tagName,r=null,a=e.length;a--;){var o=e[a],l=o.qName,s=o.value;if((d=l.indexOf(":"))>0)var u=o.prefix=l.slice(0,d),c=l.slice(d+1),f="xmlns"===u&&c;else c=l,u=null,f="xmlns"===l&&"";o.localName=c,!1!==f&&(null==r&&(r={},b(n,n={})),n[f]=r[f]=s,o.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(f,s))}for(a=e.length;a--;){(u=(o=e[a]).prefix)&&("xml"===u&&(o.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(o.uri=n[u||""]))}var d;(d=i.indexOf(":"))>0?(u=e.prefix=i.slice(0,d),c=e.localName=i.slice(d+1)):(u=null,c=e.localName=i);var h=e.uri=n[u||""];if(t.startElement(h,c,i,e),!e.closed)return e.currentNSMap=n,e.localNSMap=r,!0;if(t.endElement(h,c,i),r)for(u in r)t.endPrefixMapping(u)}function g(e,t,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var a=e.indexOf("</"+n+">",t),o=e.substring(t+1,a);if(/[&<]/.test(o))return/^script$/i.test(n)?(r.characters(o,0,o.length),a):(o=o.replace(/&#?\w+;/g,i),r.characters(o,0,o.length),a)}return t+1}function y(e,t,n,i){var r=i[n];return null==r&&((r=e.lastIndexOf("</"+n+">"))<t&&(r=e.lastIndexOf("</"+n)),i[n]=r),r<t}function b(e,t){for(var n in e)t[n]=e[n]}function w(e,t,n,i){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(r=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,r-t-4),r+3):(i.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var r=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,r-t-9),n.endCDATA(),r+3}var a=function(e,t){var n,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;r.lastIndex=t,r.exec(e);for(;n=r.exec(e);)if(i.push(n),n[1])return i}(e,t),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var l=a[1][0],s=o>3&&/^public$/i.test(a[2][0])&&a[3][0],u=o>4&&a[4][0],c=a[o-1];return n.startDTD(l,s&&s.replace(/^(['"])(.*?)\1$/,"$2"),u&&u.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),c.index+c[0].length}}return-1}function k(e,t,n){var i=e.indexOf("?>",t);if(i){var r=e.substring(t,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(r){r[0].length;return n.processingInstruction(r[1],r[2]),i+2}return-1}return-1}function S(e){}function E(e,t){return e.__proto__=t,e}h.prototype={parse:function(e,t,n){var i=this.domBuilder;i.startDocument(),b(t,t={}),function(e,t,n,i,r){function a(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(r.error("entity not found:"+e),e)}function o(t){if(t>b){var n=e.substring(b,t).replace(/&#?\w+;/g,a);f&&l(b),i.characters(n,0,t-b),b=t}}function l(t,n){for(;t>=u&&(n=c.exec(e));)s=n.index,u=s+n[0].length,f.lineNumber++;f.columnNumber=t-s+1}var s=0,u=0,c=/.*(?:\r\n?|\n)|.*$/g,f=i.locator,d=[{currentNSMap:t}],h={},b=0;for(;;){try{var E=e.indexOf("<",b);if(E<0){if(!e.substr(b).match(/^\s*$/)){var _=i.doc,C=_.createTextNode(e.substr(b));_.appendChild(C),i.currentElement=C}return}switch(E>b&&o(E),e.charAt(E+1)){case"/":var B=e.indexOf(">",E+3),T=e.substring(E+2,B),N=d.pop();B<0?(T=e.substring(E+2).replace(/[\s<].*/,""),r.error("end tag name: "+T+" is not complete:"+N.tagName),B=E+1+T.length):T.match(/\s</)&&(T=T.replace(/[\s<].*/,""),r.error("end tag name: "+T+" maybe not complete"),B=E+1+T.length);var x=N.localNSMap,P=N.tagName==T,O=P||N.tagName&&N.tagName.toLowerCase()==T.toLowerCase();if(O){if(i.endElement(N.uri,N.localName,T),x)for(var F in x)i.endPrefixMapping(F);P||r.fatalError("end tag name: "+T+" is not match the current start tagName:"+N.tagName)}else d.push(N);B++;break;case"?":f&&l(E),B=k(e,E,i);break;case"!":f&&l(E),B=w(e,E,i,r);break;default:f&&l(E);var M=new S,A=d[d.length-1].currentNSMap,B=v(e,E,M,A,a,r),I=M.length;if(!M.closed&&y(e,B,M.tagName,h)&&(M.closed=!0,n.nbsp||r.warning("unclosed xml attribute")),f&&I){for(var K=p(f,{}),D=0;D<I;D++){var U=M[D];l(U.offset),U.locator=p(f,{})}i.locator=K,m(M,i,A)&&d.push(M),i.locator=f}else m(M,i,A)&&d.push(M);"http://www.w3.org/1999/xhtml"!==M.uri||M.closed?B++:B=g(e,B,M.tagName,a,i)}}catch(e){r.error("element parse error: "+e),B=-1}B>b?b=B:o(Math.max(E,b)+1)}}(e,t,n,i,this.errorHandler),i.endDocument()}},S.prototype={setTagName:function(e){if(!r.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!r.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},E({},E.prototype)instanceof E||(E=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),t.XMLReader=h},function(e,t,n){function i(e){this.options=e||{locator:{}}}function r(){this.cdata=!1}function a(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function o(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function l(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function s(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}i.prototype.parseFromString=function(e,t){var n=this.options,i=new u,a=n.domBuilder||new r,l=n.errorHandler,s=n.locator,c=n.xmlns||{},f={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return s&&a.setDocumentLocator(s),i.errorHandler=function(e,t,n){if(!e){if(t instanceof r)return t;e=t}var i={},a=e instanceof Function;function l(t){var r=e[t];!r&&a&&(r=2==e.length?function(n){e(t,n)}:e),i[t]=r&&function(e){r("[xmldom "+t+"]\t"+e+o(n))}||function(){}}return n=n||{},l("warning"),l("error"),l("fatalError"),i}(l,a,s),i.domBuilder=n.domBuilder||a,/\/x?html?$/.test(t)&&(f.nbsp=" ",f.copy="©",c[""]="http://www.w3.org/1999/xhtml"),c.xml=c.xml||"http://www.w3.org/XML/1998/namespace",e?i.parse(e,c,f):i.errorHandler.error("invalid doc source"),a.doc},r.prototype={startDocument:function(){this.doc=(new c).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,i){var r=this.doc,o=r.createElementNS(e,n||t),l=i.length;s(this,o),this.currentElement=o,this.locator&&a(this.locator,o);for(var u=0;u<l;u++){e=i.getURI(u);var c=i.getValue(u),f=(n=i.getQName(u),r.createAttributeNS(e,n));this.locator&&a(i.getLocator(u),f),f.value=f.nodeValue=c,o.setAttributeNode(f)}},endElement:function(e,t,n){var i=this.currentElement;i.tagName;this.currentElement=i.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&a(this.locator,n),s(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=l.apply(this,arguments)){if(this.cdata)var i=this.doc.createCDATASection(e);else i=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(e)&&this.doc.appendChild(i),this.locator&&a(this.locator,i)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=l.apply(this,arguments);var i=this.doc.createComment(e);this.locator&&a(this.locator,i),s(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(e,t,n);this.locator&&a(this.locator,r),s(this,r)}},warning:function(e){console.warn("[xmldom warning]\t"+e,o(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,o(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,o(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){r.prototype[e]=function(){return null}});var u=n(7).XMLReader,c=t.DOMImplementation=n(4).DOMImplementation;t.XMLSerializer=n(4).XMLSerializer,t.DOMParser=i},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"getNetworkType",value:function(e){var t="3g";switch(GameStatusInfo.networkType){case 1:case 2:case 3:t="3g";break;case 0:t="wifi";break;default:t="unknown"}return t}},{key:"onNetworkStatusChange",value:function(e){}}]),e}();t.default=r},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();r(n(0)),r(n(2));function r(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._event={}}return i(e,[{key:"startAccelerometer",value:function(e){e.success,e.fail,e.complete;console.log("Accelerometer not support yet"),BK.Script.log(1,0,"Accelerometer startAcelerometer  not support yet")}},{key:"stopAccelerometer",value:function(e){console.log("Accelerometer not support yet"),BK.Script.log(1,0,"Accelerometer stopAccelerometer not support yet")}},{key:"onAccelerometerChange",value:function(e){this.addEventListener("accelerometerChange",e.callback),console.log("Accelerometer not support yet"),BK.Script.log(1,0,"Accelerometer onAccelerometerChange not support yet")}},{key:"addEventListener",value:function(e,t,n){this._event[e]||(this._event[e]=[]),this._event[e].push(t),n&&n.capture&&console.warn("EventTarget.addEventListener: options.capture is not implemented."),n&&n.once,n&&n.passive&&console.warn("EventTarget.addEventListener: options.passive is not implemented.")}},{key:"dispatchEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._event[e.type];if(void 0!==t)for(var n=0;n<t.length;n++)t[n](e)}}]),e}();t.default=a},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();r(n(0)),r(n(2));function r(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"showToast",value:function(e){console.log("showToast not implemented yet",e)}},{key:"hideToast",value:function(){console.log("hideToast not implemented yet")}},{key:"showLoading",value:function(e){console.log("showLoading not implemented yet",e),e&&e.success&&e.success(),e&&e.complete&&e.complete()}},{key:"hideLoading",value:function(){console.log("hideLoading not implemented yet")}},{key:"showModal",value:function(e){console.log("showModal not implemented yet",e),e&&e.success&&e.success()}}]),e}();t.default=a},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var a="GameSandBox://localStorage/storage",o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bkStorageCacheInit=!1,this.initStorage()}return r(e,[{key:"initStorage",value:function(){if(!this.bkStorageCacheInit){if(BK.FileUtil.isFileExist(a)){var e=BK.FileUtil.readFile(a);"object"===(void 0===e?"undefined":i(e))?this.bkStorageCacheMap=new Map(JSON.parse(e.readAsString(!0))):this.bkStorageCacheMap=new Map}else this.bkStorageCacheMap=new Map;this.bkStorageCacheInit=!0}}},{key:"setStorage",value:function(e){if(console.log("set storage :"+JSON.stringify(e)),e&&e.key&&e.data){this.initStorage(),this.bkStorageCacheMap.set(e.key,e.data);var t=JSON.stringify(Array.from(this.bkStorageCacheMap.entries()));BK.FileUtil.writeFile(a,t),e.success&&e.success(),e.complete&&e.complete()}}},{key:"setStorageSync",value:function(e,t){if(console.log("set storage sync  :"+e+" "+t),e&&t){this.initStorage(),this.bkStorageCacheMap.set(e,t);var n=JSON.stringify(Array.from(this.bkStorageCacheMap.entries()));BK.FileUtil.writeFile(a,n)}}},{key:"getStorage",value:function(e){if(console.log("get storage :"+JSON.stringify(e)),e&&e.key){this.initStorage();var t=this.bkStorageCacheMap.get(e.key);console.log("get storage result :"+JSON.stringify(t)),t?e.success&&e.success({data:t}):e.fail&&e.fail(),e.complete&&e.complete()}}},{key:"getStorageSync",value:function(e){if(e)return this.initStorage(),console.log("get storage sync :"+e+" "+this.bkStorageCacheMap.get(e)),this.bkStorageCacheMap.get(e)}},{key:"getStorageInfoSync",value:function(){this.initStorage();var e=new Array;this.bkStorageCacheMap.forEach(function(t,n,i){e.push(n)});var t=0;if(BK.FileUtil.isFileExist(a)){var n=BK.FileUtil.getFileInfo(a);n&&(t=n.size/1024)}return{keys:e,currentSize:t,limitSize:10240}}},{key:"getStorageInfo",value:function(e){if(e){this.initStorage();var t=new Array;this.bkStorageCacheMap.forEach(function(e,n,i){t.push(n)});var n=0;if(BK.FileUtil.isFileExist(a)){var i=BK.FileUtil.getFileInfo(a);i&&(n=i.size/1024)}var r={keys:t,currentSize:n,limitSize:10240};e.success&&e.success(r),e.complete&&e.complete()}}},{key:"removeStorage",value:function(e){if(e&&e.key){this.initStorage(),this.bkStorageCacheMap.delete(e.key);var t=JSON.stringify(Array.from(this.bkStorageCacheMap.entries()));BK.FileUtil.writeFile(a,t),e.success&&e.success(),e.complete&&e.complete()}}},{key:"removeStorageSync",value:function(e){if(e){this.initStorage(),this.bkStorageCacheMap.delete(e);var t=JSON.stringify(Array.from(this.bkStorageCacheMap.entries()));BK.FileUtil.writeFile(a,t)}}},{key:"clearStorage",value:function(e){this.bkStorageCacheMap&&this.bkStorageCacheMap.clear();var t=!0;BK.FileUtil.isFileExist(a)&&(t=BK.FileUtil.deleteFile(a)),t?e.success&&e.success():e.fail&&e.fail(),e.complete&&e.complete()}},{key:"clearStorageSync",value:function(){this.bkStorageCacheMap&&this.bkStorageCacheMap.clear(),BK.FileUtil.isFileExist(a)&&BK.FileUtil.deleteFile(a)}}]),e}();t.default=o},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.midasCancelPay=function(e){o.default.d(0,0,"midasCancelPay failed, see bk interface")},t.midasGetBalance=function(e){o.default.d(0,0,"midasGetBalance failed, see bk interface")},t.midasPay=function(e){o.default.d(0,0,"midasPay failed, see bk interface")},t.midasPresent=function(e){o.default.d(0,0,"midasPresent failed, see bk interface")};var r,a=n(0),o=(r=a)&&r.__esModule?r:{default:r};var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"requestMidasPayment",value:function(e){o.default.d(0,0,"requestMidasPayment failed, see bk interface")}}]),e}();t.default=l},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.RewardedVideoAd=t.BannerAd=void 0;var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),o=(i=a)&&i.__esModule?i:{default:i};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.BannerAd=function(){function e(t,n){l(this,e),this.adUnitId=t,this.style=n}return r(e,[{key:"show",value:function(){this.adBannerHandle&&this.adBannerHandle.close();var e=this;return new Promise(function(t,n){BK.Advertisement.fetchBannerAd(function(i,r,a){0==i?(a.show(function(i,r,a){0==i?(e.onLoadCallback&&e.onLoadCallback(),t()):(e.onErrorCallback&&e.onErrorCallback(),o.default.d(0,0,"fetchBannerAd failed, msg="+r),n(r))}),a.onClickContent(function(){e.onClickCallback&&e.onClickCallback()}),a.onClickClose(function(){e.onClickCloseCallback&&e.onClickCloseCallback()}),e.adBannerHandle=a):(e.onErrorCallback&&e.onErrorCallback(),o.default.d(0,0,"fetchBannerAd failed, msg="+r),n(r))})})}},{key:"hide",value:function(){this.adBannerHandle&&this.adBannerHandle.close()}},{key:"onResize",value:function(e){e&&"function"==typeof e&&setTimeout(e,1),o.default.d(0,0,"BannerAd: onResize, not implement yet")}},{key:"offResize",value:function(e){o.default.d(0,0,"BannerAd: offResize, not implement yet")}},{key:"onLoad",value:function(e){this.onLoadCallback=e}},{key:"offLoad",value:function(e){this.onLoadCallback=void 0}},{key:"onError",value:function(e){this.onErrorCallback=e}},{key:"offError",value:function(e){this.onErrorCallback=void 0}},{key:"onClickContent",value:function(e){this.onClickCallback=e}},{key:"offClickContent",value:function(e){this.onClickCallback=void 0}},{key:"onClickClose",value:function(e){this.onClickCloseCallback=e}},{key:"offClickClose",value:function(e){this.onClickCloseCallback=void 0}},{key:"destroy",value:function(){}}]),e}(),t.RewardedVideoAd=function(){function e(t,n,i){l(this,e),this._event={},this.adUnitId=t,this.style=n,this.videoType=i;var r=this;setTimeout(function(){r.onLoadCallback&&r.onLoadCallback()},0)}return r(e,[{key:"show",value:function(){void 0===this.videoType&&(this.videoType=3);var e=this;return new Promise(function(t,n){BK.Advertisement.fetchVideoAd(e.videoType,function(i,r,a){o.default.d(0,0,"masonc, fetchVideoAd success, retCode="+i+", msg="+r+", handle="+a),0==i&&a?(a.setEventCallack(function(e,t){},function(t,n){e.dispatchEvent({type:"close",isEnded:!0})},function(t,n){e.dispatchEvent({type:"close",isEnded:!1})},function(e,t){}),e.onLoadCallback&&e.onLoadCallback(),a.jump(),t()):(e.onErrorCallback&&e.onErrorCallback(),n(r))})})}},{key:"load",value:function(){o.default.d(0,0,"RewardedVideoAd, load, not implement yet")}},{key:"onClose",value:function(e){this.addEventListener("close",e,{once:!0})}},{key:"offClose",value:function(e){this.onCloseCallback=void 0}},{key:"onLoad",value:function(e){this.onLoadCallback=e}},{key:"offLoad",value:function(e){this.onLoadCallback=void 0}},{key:"onError",value:function(e){this.onErrorCallback=e}},{key:"offError",value:function(e){this.onErrorCallback=void 0}},{key:"addEventListener",value:function(e,t,n){this._event[e]||(this._event[e]=[]),this._event[e].push(t),n&&n.capture&&console.warn("EventTarget.addEventListener: options.capture is not implemented."),n&&n.once,n&&n.passive&&console.warn("EventTarget.addEventListener: options.passive is not implemented.")}},{key:"dispatchEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._event[e.type];if(void 0!==t)for(var n=0;n<t.length;n++)t[n]&&t[n](e)}}]),e}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),o=(i=a)&&i.__esModule?i:{default:i};var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t}return r(e,[{key:"postMessage",value:function(e){o.default.d(0,0,"OpenDataContext: postMessage, message="+JSON.stringify(e)),wx.postMessage(e)}}]),e}();t.default=l},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.OpenSettingButton=t.AuthSetting=void 0;var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),o=(i=a)&&i.__esModule?i:{default:i};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.AuthSetting=function e(t,n){l(this,e),this.key=t,this.value=n},t.OpenSettingButton=function(){function e(t,n,i){l(this,e),this.text=t,this.image=n,this.style=i}return r(e,[{key:"show",value:function(){o.default.d(0,0,"OpenSettingButton: show failed, not implement yet")}},{key:"hide",value:function(){o.default.d(0,0,"OpenSettingButton: hide failed, not implement yet")}},{key:"onTap",value:function(e){o.default.d(0,0,"OpenSettingButton: onTap failed, not implement yet")}},{key:"offTap",value:function(e){o.default.d(0,0,"OpenSettingButton: offTap failed, not implement yet")}},{key:"destroy",value:function(){o.default.d(0,0,"OpenSettingButton: destroy failed, not implement yet")}}]),e}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.UserInfoButton=t.UserInfo=void 0;var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),o=(i=a)&&i.__esModule?i:{default:i};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.UserInfo=function e(t,n,i){l(this,e),this.language=t,this.nickName=n,this.avatarUrl=i},t.UserInfoButton=function(){function e(t,n,i){l(this,e),this.text=t,this.image=n,this.style=i}return r(e,[{key:"show",value:function(){o.default.d(0,0,"UserInfoButton: show failed, not implement yet")}},{key:"hide",value:function(){o.default.d(0,0,"UserInfoButton: hide failed, not implement yet")}},{key:"onTap",value:function(e){o.default.d(0,0,"UserInfoButton: onTap failed, not implement yet")}},{key:"offTap",value:function(e){o.default.d(0,0,"UserInfoButton: offTap failed, not implement yet")}},{key:"destroy",value:function(){o.default.d(0,0,"UserInfoButton: destroy failed, not implement yet")}}]),e}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.GameClubButton=t.UserGameData=t.KVData=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.removeUserStorage=function(e,t,n,i,r,a){o.default.d(0,0,"removeUserStorage failed, not implement yet")},t.setUserStorage=function(e,t,n,i,r,a){o.default.d(0,0,"setUserStorage failed, not implement yet")};var r,a=n(0),o=(r=a)&&r.__esModule?r:{default:r};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.KVData=function e(t,n){l(this,e),this.key=t,this.value=n},t.UserGameData=function e(t,n,i,r){l(this,e),this.avatarUrl=t,this.nickname=n,this.openid=i,this.KVDataList=r};t.GameClubButton=function(){function e(t,n,i,r){l(this,e),this.left=t,this.top=n,this.width=i,this.height=r}return i(e,[{key:"show",value:function(){o.default.d(0,0,"GameClubButton: show failed, not implement yet")}},{key:"hide",value:function(){o.default.d(0,0,"GameClubButton: hide failed, not implement yet")}},{key:"destroy",value:function(){o.default.d(0,0,"GameClubButton: destroy failed, not implement yet")}}]),e}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"getShareInfo",value:function(e){}},{key:"hideShareMenu",value:function(e){e&&(e.success&&e.success(),e.complete&&e.complete())}},{key:"onShareAppMessage",value:function(e){this.shareCallback=e}},{key:"offShareAppMessage",value:function(e){this.shareCallback=void 0}},{key:"showShareMenu",value:function(e){e&&(e.success&&e.success(),e.complete&&e.complete())}},{key:"shareAppMessage",value:function(e){var t=void 0,n=void 0;if(e&&(e.title&&(t=e.title),e.imageUrl&&(n=e.imageUrl)),t&&n){var i={summary:t,picUrl:n,extendInfo:e.query,localPicPath:""};BK.QQ.share(i,function(t,n,i){BK.Script.log(1,1,"retCode:"+t+" shareDest:"+n+" isFirstShare:"+i);var r={errMsg:"shareAppMessage:ok",shareTickets:[1]};0===t?(0===n?(BK.Script.log(1,1,"成功分享至QQ"),r.shareTickets.push(1)):1===n?BK.Script.log(1,1,"成功分享至空间"):2===n?BK.Script.log(1,1,"成功分享至微信"):3===n&&BK.Script.log(1,1,"成功分享至朋友圈"),e&&e.success&&e.success(r)):1===t?(BK.Script.log(1,1,"分享失败"+t),e&&e.fail&&e.fail(r)):(BK.Script.log(1,1,"分享失败，用户取消分享："+t),e&&e.fail&&e.fail(r)),e&&e.complete&&e.complete(r)})}else{var r={errMsg:"shareAppMessage:ok",shareTickets:[1]};e&&e.fail&&e.fail(r),e&&e.complete&&e.complete(r)}}},{key:"updateShareMenu",value:function(e){e&&(e.success&&e.success(),e.complete&&e.complete())}}]),e}();t.default=r},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.code2accessToken=function(){BK.Script.log(0,0,"code2accessToken failed: not implement yet")};var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"checkSession",value:function(e){return BK.Script.log(0,0,"checkSession not implement yet"),!0}},{key:"login",value:function(e){e&&BK.QQ.fetchOpenKey(function(t,n,i){if(0==t&&i&&i.openKey){if(e.success){var r={code:"011tWTqk2qizXE0yQsrk2Vqzqk2tWTqq",openid:GameStatusInfo.openId,openkey:i.openKey};e.success(r)}}else BK.Script.log(0,0,"fetchOpenKey failed: errCode="+t),e.fail&&e.fail();e.complete&&e.complete()})}}]),e}();t.default=r},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onBtnClick=function(){},this.onTextChange=function(){}}return i(e,[{key:"showKeyboard",value:function(e){var t=this;BK.Editor.showKeyBoard(function(e){var n={};n.value=e,t.onBtnClick(n)},function(e){var n={};n.value=e,t.onTextChange(n)})}},{key:"hideKeyboard",value:function(e){BK.Editor.hideKeyBoard()}},{key:"onKeyboardInput",value:function(e){this.onTextChange=e}},{key:"onKeyboardConfirm",value:function(e){this.onBtnClick=function(t){e(t),this.onComplete&&this.onComplete()}}},{key:"onKeyboardComplete",value:function(e){this.onComplete=e}},{key:"offKeyboardInput",value:function(e){this.onTextChange=function(){}}},{key:"offKeyboardConfirm",value:function(e){this.onBtnClick=function(){}}},{key:"offKeyboardComplete",value:function(e){this.onComplete=function(){}}}]),e}();t.default=r},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),o=((i=a)&&i.__esModule,n(3),n(1));function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=new Map,u=0,c=0,f=function(){function e(t){l(this,e);var n=t.url;this.socket=new BK.WebSocket(n),this.id=++c;var i=this;this.WEB_SOCKET_EVENT_MAP=[],this.socket.onOpen=function(e){i.onEvent(h.SOCK_EVENT_OPEN,e)},this.socket.onError=function(e){i.onEvent(h.SOCK_EVENT_ERROR,e)},this.socket.onClose=function(e){i.onEvent(h.SOCK_EVENT_CLOSE,e)},this.socket.onMessage=function(e,t){var n="";n=t.isBinary?(0,o.bricksBufferToArrayBuffer)(t.data):t.data.readAsString(!0),i.onEvent(h.SOCK_EVENT_MESSAGE,i.socket,{data:n})}}return r(e,[{key:"onOpen",value:function(e){this.publishEvent(h.SOCK_EVENT_OPEN,e)}},{key:"onClose",value:function(e){this.publishEvent(h.SOCK_EVENT_CLOSE,e)}},{key:"onMessage",value:function(e){this.publishEvent(h.SOCK_EVENT_MESSAGE,e)}},{key:"onError",value:function(e){this.publishEvent(h.SOCK_EVENT_ERROR,e)}},{key:"send",value:function(e){var t=e,n=e.success,i=(e.fail,e.complete);return e&&(e.data instanceof ArrayBuffer?t=(0,o.arrayBufferToBricksBuffer)(new Uint8Array(e.data)):e.data&&(t=e.data)),n&&n(this),i&&i(this),this.socket.send(t)}},{key:"close",value:function(e){var t=e.success,n=(e.fail,e.complete);return t&&t(this),n&&n(this),this.socket.close()}},{key:"connect",value:function(){this.socket.connect()}},{key:"onEvent",value:function(e,t,n){var i=this.WEB_SOCKET_EVENT_MAP[e];"function"==typeof i&&i(n)}},{key:"publishEvent",value:function(e,t){this.WEB_SOCKET_EVENT_MAP[e]=t}}]),e}(),d=[],h=function(){function e(){l(this,e)}return r(e,null,[{key:"onEvent",value:function(e,t,n){var i=d[e];"function"==typeof i&&i(t,n)}},{key:"publishEvent",value:function(e,t){d[e]=t}},{key:"newConnection",value:function(e){var t=e.success?e.success:function(){},n=e.fail?e.fail:function(){},i=e.complete?e.complete:function(){},r=null,a=e.url;if(!(u>=5)){s||(s=new Map);return(r=new f(e))?(s.set(a,r),u++,t()):n("Open fail for null"),i(),r}n("Reach max request num")}},{key:"closeSocket",value:function(e){var t=e.success?e.success:function(){},n=e.fail?e.fail:function(){},i=e.complete?e.complete:function(){};s||n("No request"),s.forEach(function(e,t){e instanceof f&&e.close()}),t(),i()}},{key:"sendMessage",value:function(e){var t=e.success?e.success:function(){},n=e.fail?e.fail:function(){},i=e.complete?e.complete:function(){};s||n("No request"),s.forEach(function(t,n){t instanceof f&&t.send(e.data)}),t(),i()}}]),e}();t.default=h,h.SOCK_EVENT_OPEN="OPEN",h.SOCK_EVENT_ERROR="ERROR",h.SOCK_EVENT_MESSAGE="MESSAGE",h.SOCK_EVENT_CLOSE="CLOSE"},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t.url,this.data=t.data||"",this.header=t.header||{},this.dataType=t.dataType||t.responseType||"json",this.success=t.success||function(){},this.fail=t.fail||function(){},this.complete=t.complete||function(){},this.method=t.method||"get",this.object=t,this.http=[]}return i(e,[{key:"request",value:function(){var e=new BK.HttpUtil(this.url);this.http.push(e);var t="get";switch(this.method){case"POST":t="post",e.setHttpPostData(this.data),e.setBodyCompatible(!1)}for(var n in e.setHttpMethod(t),this.header)"content-type"===n.toLowerCase()?e.setHttpHeader("Content-Type",this.header[n]):e.setHttpHeader(n,this.header[n]);var i=this;e.requestAsync(function(t,n){t.bufferLength();if(200!=n)i.fail({errMsg:" ",statusCode:n,header:{}});else{var a=void 0;if(a="arraybuffer"!=i.dataType?t.readAsString(!0):r.bricksBufferToArrayBuffer(t),"json"==i.dataType)try{a=JSON.parse(a)}catch(e){a=a}i.success({data:a,statusCode:n,header:{}}),i.complete&&i.complete({data:a,statusCode:n,header:{}})}i.http.pop(e),i=null})}},{key:"ab2str",value:function(e){return String.fromCharCode.apply(null,new Uint16Array(e))}},{key:"bricksBufferToArrayBuffer",value:function(e){for(var t=new ArrayBuffer(e.bufferLength()),n=new Uint8Array(t),i=0;i<e.bufferLength();)n[i++]=e.readUint8Buffer();return t}},{key:"uploadFile",value:function(){var e=r.wrapSandBoxPath(this.object.filePath||""),t=this.object.formData||{},n=this.header||{};n["Content-Type"]="multipart/form-data; boundary=a401103119";var i="";for(var a in t)i+="--",i+="a401103119",i+="\r\n",i+='Content-Disposition: form-data; name="',i+=a,i+='"\r\n\r\n',i+=t[a],i+="\r\n";var o=BK.FileUtil.readFile(e);i+="--",i+="a401103119",i+="\r\n",i+='Content-Disposition: form-data; name="',i+=a,i+='"; filename="',i+=this.object.name,i+='"\r\n',i+="Content-Type: application/octet-stream\r\n\r\n";var l="";l+="\r\n",l+="--",l+="a401103119",l+="--\r\n";var s=new BK.Buffer(o.bufferLength()+i.length+l.length+3+3);s.writeStringBuffer(i),s.writeBuffer(o),s.writeStringBuffer(l);var u=new BK.HttpUtil(this.url);for(var c in u.setHttpMethod("post"),n)u.setHttpHeader(c,n[c]);var f=this;u.setBodyCompatible(!1),u.setHttpRawBody(s),u.requestAsync(function(e,t){var n=e.bufferLength();200!=t?f.fail({data:"",statusCode:t,header:{}}):f.success({data:e.readBuffer(n),statusCode:t,header:{}}),s=null,f=null})}},{key:"downloadFile",value:function(){var e=this.object.filePath||r.extractFilePathFromUrl(this.url);this.relpath=e;var t=r.wrapSandBoxPath(e),n=r.extractFileNameFromUrl(this.url),i=new BK.HttpUtil(this.url);for(var a in this.header)i.setHttpHeader(a,header[a]);i.setHttpMethod("get");var o=this;i.requestAsync(function(e,i){e.bufferLength();if(200!=i)o.fail({data:"",statusCode:i,header:{}});else{var r=-1!=t.indexOf(n)?t:t+n;BK.FileUtil.writeBufferToFile(r,e)||BK.Script.log(1,0,"write download file failed");var a=-1!=o.relpath.indexOf(n)?o.relpath:o.relpath+n;o.success({tempFilePath:a,statusCode:i,header:{}})}o=null})}}]),e}();t.default=a},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.Stats=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=s(n(0)),a=s(n(2)),o=n(1),l=n(3);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(){u(this,e)}return i(e,[{key:"readFile",value:function(e){r.default.d(0,0,"readFile, object="+JSON.stringify(e));var t=this;(0,l.setTimeout)(function(){if(e){var n=e.encoding;if("string"==typeof e.filePath){var i=(0,o.wrapLocalUrl)(e.filePath);if(BK.FileUtil.isFileExist(i)||(i=(0,o.wrapSandBoxPath)(e.filePath)),BK.FileUtil.isFileExist(i)){var a=BK.FileUtil.readFile(i),l=void 0,s={data:l=!n||"utf-8"!==n&&"utf8"!==n&&"ascii"!==n&&"latin1"!==n?t.bricksBufferToArrayBuffer(a):a.readAsString(!0)};r.default.d(0,0,"readFile, success, filePath="+e.filePath+", bkFilePath="+i+", data="+l),e.success&&e.success(s)}else{r.default.d(0,0,"readFile failed, file not exist, filePath="+e.filePath+", bkFilePath="+i);s={errMsg:"file not exist"};e.fail&&e.fail(s)}}else{r.default.d(0,0,"readFile failed, invalid filePath, filePath="+e.filePath);s={errMsg:"invalid filePath"};e.fail&&e.fail(s)}e.complete&&e.complete()}else r.default.d(0,0,"readFile failed, no object");e=null},0)}},{key:"readFileSync",value:function(e,t){if(r.default.d(0,0,"readFileSync, filePath="+e+", encoding="+t),"string"==typeof e){var n=(0,o.wrapLocalUrl)(e);if(BK.FileUtil.isFileExist(n)||(n=(0,o.wrapSandBoxPath)(e)),BK.FileUtil.isFileExist(n)){var i=BK.FileUtil.readFile(n);return"utf-8"===t||"utf8"===t||"ascii"===t||"latin1"===t?(r.default.d(0,0,"readFileSync success, string, bkFilePath="+n),i.readAsString(!0)):(r.default.d(0,0,"readFileSync success, ArrayBuffer, bkFilePath="+n),BK.Misc.BKBufferToArrayBuffer(i))}throw new Error("readFileSync:fail, file not exist ${bkFilePath}")}throw new Error("readFileSync:fail, invalid filePath")}},{key:"bricksBufferToArrayBuffer",value:function(e){for(var t=new ArrayBuffer(e.bufferLength()),n=new Uint8Array(t),i=0;i<e.bufferLength();)n[i++]=e.readUint8Buffer();return t}},{key:"writeFile",value:function(e){r.default.d(0,0,"writeFile, object="+JSON.stringify(e)),(0,l.setTimeout)(function(){if(e&&e.filePath&&e.data){if("string"==typeof e.filePath){var t=(0,o.wrapSandBoxPath)(e.filePath);if("string"==typeof e.data)BK.FileUtil.writeFile(t,e.data);else{var n=BK.Misc.arrayBufferToBKBuffer(e.data);BK.FileUtil.writeBufferToFile(t,n)}r.default.d(0,0,"writeFile success, filePath="+e.filePath),e.success&&e.success()}else{e.fail&&e.fail({errMsg:"invalid filePath"})}e.complete&&e.complete()}else r.default.d(0,0,"writeFile failed, no object");e=null},0)}},{key:"writeFileSync",value:function(e,t,n){if(r.default.d(0,0,"writeFileSync, filePath="+e),!e||!t)throw new Error("writeFileSync:fail, invalid param");if("string"!=typeof e)throw new Error("writeFileSync:fail, invalid filePath");var i=(0,o.wrapSandBoxPath)(e);if("string"==typeof t)BK.FileUtil.writeFile(i,t);else{var a=BK.Misc.arrayBufferToBKBuffer(t);BK.FileUtil.writeBufferToFile(i,a)}r.default.d(0,0,"writeFileSync success, filePath="+e)}},{key:"access",value:function(e){r.default.d(0,0,"access, object="+JSON.stringify(e)),(0,l.setTimeout)(function(){var t=BK.FileUtil.isFileExist((0,o.wrapLocalUrl)(e.path));if(t||(t=BK.FileUtil.isFileExist((0,o.wrapSandBoxPath)(e.path))),r.default.d(0,0,"access, path="+e.path+", isFileExist="+t),t)e.success&&e.success();else{e.fail&&e.fail({errMsg:"fail no such file or directory"})}e.complete&&e.complete(),e=null},0)}},{key:"accessSync",value:function(e){var t=BK.FileUtil.isFileExist((0,o.wrapLocalUrl)(e));if(t||(t=BK.FileUtil.isFileExist((0,o.wrapSandBoxPath)(e))),r.default.d(0,0,"accessSync, path="+e+", isFileExist="+t),!t)throw new Error("no such file or directory")}},{key:"mkdirSync",value:function(e,t){if(r.default.d(0,0,"mkdirSync, dirPath="+e),"string"!=typeof e)throw new Error("mkdirSync:failed, invalid dirPath");var n=(0,o.wrapSandBoxPath)(e);if(BK.FileUtil.isFileExist(n))throw new Error("mkdirSync:failed, file already exist ${bkFilePath}");if(!BK.FileUtil.makeDir(n))throw new Error("mkdir failed")}},{key:"mkdir",value:function(e){r.default.d(0,0,"mkdir, object="+JSON.stringify(e)),(0,l.setTimeout)(function(){if(e){if("string"==typeof e.dirPath)if(BK.FileUtil.makeDir((0,o.wrapSandBoxPath)(e.dirPath)))e.success&&e.success();else{var t={errMsg:"mkdir failed"};e.fail&&e.fail(t)}else{t={errMsg:"invalid dirPath"};e.fail&&e.fail(t)}e.complete&&e.complete()}else r.default.d(0,0,"mkdir failed, no object");e=null},0)}},{key:"removeSavedFile",value:function(e){(0,l.setTimeout)(function(){if(e){if("string"==typeof e.filePath){var t=(0,o.wrapSandBoxPath)(e.filePath);if(BK.FileUtil.isFileExist(t))if(BK.FileUtil.deleteFile(t))e.success&&e.success(n);else{var n={errMsg:"delete failed"};e.fail&&e.fail(n)}else{n={errMsg:"file not exist"};e.fail&&e.fail(n)}}else{n={errMsg:"invalid filePath"};e.fail&&e.fail(n)}e.complete&&e.complete(),e=null}else r.default.d(0,0,"removeSavedFile failed, no object")},0)}},{key:"unlink",value:function(e){(0,l.setTimeout)(function(){if(e){if("string"==typeof e.filePath){var t=(0,o.wrapSandBoxPath)(e.filePath);if(BK.FileUtil.isFileExist(t))if(BK.FileUtil.deleteFile(t))e.success&&e.success();else{var n={errMsg:"fail"};e.fail&&e.fail(n)}else{n={errMsg:"file not exist"};e.fail&&e.fail(n)}}else{n={errMsg:"invalid filePath"};e.fail&&e.fail(n)}e.complete&&e.complete()}else r.default.d(0,0,"unlink failed, no object");e=null},0)}},{key:"unlinkSync",value:function(e){if("string"==typeof e){var t=(0,o.wrapSandBoxPath)(e);if(!BK.FileUtil.isFileExist(t))throw new Error("unlinkSync:fail, file not exist");BK.FileUtil.deleteFile(t)}}},{key:"copyFile",value:function(e){var t=BK.FileUtil.readFile("GameSandBox://"+e.srcPath);BK.FileUtil.writeBufferToFile("GameSandBox://"+e.destPath,t),e.success&&e.success()}},{key:"copyFileSync",value:function(e,t){var n=BK.FileUtil.readFile("GameSandBox://"+object.srcPath);return BK.FileUtil.writeBufferToFile("GameSandBox://"+object.destPath,n)}},{key:"getFileInfo",value:function(e){(0,l.setTimeout)(function(){if(e){if("string"==typeof e.filePath){var t=(0,o.wrapLocalUrl)(e.filePath);if(BK.FileUtil.isFileExist(t)||(t=(0,o.wrapSandBoxPath)(e.filePath)),BK.FileUtil.isFileExist(t)||BK.FileUtil.isFileExist((0,o.wrapSandBoxPath)(e.filePath))){var n=BK.FileUtil.getFileInfo(t)||BK.FileUtil.getFileInfo((0,o.wrapSandBoxPath)(e.filePath));if(n){var i={size:n.size};e.success&&e.success(i)}else{i={errMsg:"getFileInfo failed"};e.fail&&e.fail(i)}}else{i={errMsg:"file not exist"};e.fail&&e.fail(i)}}else{i={errMsg:"invalid filePath"};e.fail&&e.fail(i)}e.complete&&e.complete(),e=null}else r.default.d(0,0,"getFileInfo failed, no object")},0)}},{key:"getSavedFileList",value:function(e){}},{key:"rmdir",value:function(e){(0,l.setTimeout)(function(){if(e){if("string"==typeof e.dirPath){var t=(0,o.wrapSandBoxPath)(e.dirPath);if(BK.FileUtil.deleteFile(t))e.success&&e.success(n);else{var n={errMsg:"fail"};e.fail&&e.fail(n)}}else{n={errMsg:"invalid dirPath"};e.fail&&e.fail(n)}e.complete&&e.complete()}else r.default.d(0,0,"rmdir failed, no object");e=null},0)}},{key:"rmdirSync",value:function(e,t){if("string"!=typeof e)throw new Error("rmdirSync:fail, invalid dirPath");var n=(0,o.wrapSandBoxPath)(e);if(!BK.FileUtil.isFileExist(n))throw new Error("rmdirSync:fail, no such file or directory ${dirPath}");if(!BK.FileUtil.deleteFile(n))throw new Error("rmdirSync:fail, ${dirPath}")}},{key:"rename",value:function(e){r.default.d(0,0,"rename not implement yet")}},{key:"renameSync",value:function(e,t){r.default.d(0,0,"renameSync not implement yet")}},{key:"readdir",value:function(e){if(e)if("string"==typeof e.dirPath){var t=void 0;0==e.dirPath.indexOf(a.default.SRC_PRE)||0==e.dirPath.indexOf(a.default.SAND_PRE)?t=e.dirPath:(t=(0,o.wrapSandBoxPath)(e.dirPath),BK.FileUtil.isFileExist(t)||(t=(0,o.wrapLocalUrl)(e.dirPath))),r.default.d(0,0,"readdir dirPath="+e.dirPath+", bkFilePath="+t),BK.FileUtil.isFileExist(t)?BK.FileUtil.getFileList({path:t,needDir:!0},function(t,n){if(0==t){var i=[];if(n&&n.files&&n.files.length>0)for(var r=0;r<n.files.length;r++){var a=n.files[r];i[r]=a.substr(a.lastIndexOf("/")+1)}e.success&&e.success({files:i})}else e.fail&&e.fail({errMsg:"get fileList failed, code:${code}"});e.complete&&e.complete()}):r.default.d(0,0,"readdir bkFilePath="+t+", not exist")}else e.fail&&e.fail({errMsg:"invalid dirPath"}),e.complete&&e.complete();else r.default.d(0,0,"readdir failed, no object")}},{key:"readdirSync",value:function(e){if("string"==typeof e){var t=void 0;0==e.indexOf(a.default.SRC_PRE)||0==e.indexOf(a.default.SAND_PRE)?t=e:(t=(0,o.wrapSandBoxPath)(e),BK.FileUtil.isFileExist(t)||(t=(0,o.wrapLocalUrl)(e))),r.default.d(0,0,"readdirSync dirPath="+e+", bkFilePath="+t);var n=[];return BK.FileUtil.isFileExist(t)?BK.FileUtil.getFileList({path:t,needDir:!0},function(e,i){if(r.default.d(0,0,"readdirSync bkFilePath="+t+", code="+e),0==e&&i&&i.files&&i.files.length>0)for(var a=0;a<i.files.length;a++){var o=i.files[a];n[a]=o.substr(o.lastIndexOf("/")+1)}}):r.default.d(0,0,"readdirSync bkFilePath="+t+", not exist"),n}throw new Error("readdirSync failed, invalid dirPath")}},{key:"saveFile",value:function(e){r.default.d(0,0,"saveFile not implement yet")}},{key:"saveFileSync",value:function(e,t){r.default.d(0,0,"saveFileSync not implement yet")}},{key:"stat",value:function(e){(0,l.setTimeout)(function(){if(e){if("string"==typeof e.path){var t=(0,o.wrapLocalUrl)(e.path);if(BK.FileUtil.isFileExist(t)||(t=(0,o.wrapSandBoxPath)(e.path)),BK.FileUtil.isFileExist(t)){var n=BK.FileUtil.getFileInfo(t);if(n){var i={stat:new f(e.path,0,n.size,n.atime,n.mtime)};e.success&&e.success(i)}else{i={errMsg:"get file info failed"};e.fail&&e.fail(i)}}else{i={errMsg:"file not exist"};e.fail&&e.fail(i)}}else{i={errMsg:"no path"};e.fail&&e.fail(i)}e.complete&&e.complete(),e=null}else r.default.d(0,0,"stat failed, no param")},0)}},{key:"statSync",value:function(e){if("string"==typeof e){var t=(0,o.wrapLocalUrl)(e);if(BK.FileUtil.isFileExist(t)||(t=(0,o.wrapSandBoxPath)(e)),BK.FileUtil.isFileExist(t)){var n=BK.FileUtil.getFileInfo(t);if(n)return new f(e,0,n.size,n.atime,n.mtime)}else r.default.d(0,0,"statSync failed, file not exist, file:"+t)}}},{key:"unzip",value:function(e){(0,l.setTimeout)(function(){if(e){if("string"==typeof e.zipFilePath&&"string"==typeof e.targetPath)if(BK.FileUtil.unzip(e.zipFilePath,e.targetPath))e.success&&e.success();else{var t={errMsg:"unzip failed"};e.fail&&e.fail(t)}else{t={errMsg:"invalid path"};e.fail&&e.fail(t)}e.complete&&e.complete()}else r.default.d(0,0,"unzip failed, no object");e=null},0)}}]),e}();t.default=c;var f=t.Stats=function(){function e(t,n,i,r,a){u(this,e),this.path=t,this.mode=n,this.size=i,this.lastAccessedTime=r,this.lastModifiedTime=a,this.isDir=BK.FileUtil.isDirectory(t)}return i(e,[{key:"isFile",value:function(){return!this.isDir}},{key:"isDirectory",value:function(){return this.isDir}}]),e}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=(l(n(2)),l(n(0))),a=n(1),o=n(3);function l(e){return e&&e.__esModule?e:{default:e}}var s=new WeakMap,u=new WeakMap,c=new WeakMap,f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._event={},u.set(this,""),c.set(this,!1)}return i(e,[{key:"removeEventListener",value:function(e,t){this._event[e]||(this._event[e]=[]);var n=this._event[e].indexOf(t);this._event[e].splice(n,1)}},{key:"addEventListener",value:function(e,t,n){this._event[e]||(this._event[e]=[]),this._event[e].push(t),n&&n.capture&&console.warn("EventTarget.addEventListener: options.capture is not implemented."),n&&n.once,n&&n.passive&&console.warn("EventTarget.addEventListener: options.passive is not implemented.")}},{key:"dispatchEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._event[e.type];if(void 0!==t)for(var n=0;n<t.length;n++)t[n]&&t[n](e)}},{key:"play",value:function(){var e=u.get(this),t=c.get(this);if(r.default.d(0,0,"InnerAudioContext play: "+e+", loop="+t),void 0!==e){var n=this;if(void 0===s.get(this)){var i=(0,a.getAudioPath)(e);if((0,a.isRemoteUrl)(e)){if(!BK.FileUtil.isFileExist(i)){var o=i;r.default.d(0,0,"InnerAudioContext, not downloaded:"+e+", path:"+o);var l=new BK.HttpUtil(e);return l.setHttpMethod("get"),void l.requestAsync(function(e,a){(r.default.d(0,0,"InnerAudioContext, download audio over"),200==a)?BK.FileUtil.writeBufferToFile(o,e)?(s.set(n,n.createContext(i,t)),void 0!==s.get(n)&&(s.get(n).startMusic(function(){n.onEndedCallback&&n.onEndedCallback()}),n.onPlayCallback&&n.onPlayCallback())):r.default.d(0,0,"InnerAudioContext, save audio failed"):r.default.d(0,0,"InnerAudioContext, download audio failed:"+a+", url="+url)})}r.default.d(0,0,"InnerAudioContext, downloaded:"+e),s.set(this,this.createContext(i,t))}else s.set(this,this.createContext(i,t))}void 0!==s.get(this)&&(s.get(this).isParsed||(s.get(this).startMusic(function(){n.onEndedCallback&&n.onEndedCallback()}),n.onPlayCallback&&n.onPlayCallback()))}else r.default.d(0,0,"no src value")}},{key:"createContext",value:function(e,t){return new BK.Audio(t?0:1,e,t?-1:1)}},{key:"pause",value:function(){if(r.default.d(0,0,"InnerAudioContext pause: "+u.get(this)),void 0!==s.get(this)){s.get(this).pauseMusic(),s.get(this).isParsed=!0,this.onPauseCallback&&this.onPauseCallback()}}},{key:"stop",value:function(){if(r.default.d(0,0,"InnerAudioContext stop: "+u.get(this)),void 0!==s.get(this)){s.get(this).stopMusic(),this.onStopCallback&&this.onStopCallback()}}},{key:"seek",value:function(e){var t=s.get(this);t&&t.seek?(t.seek(1e3*e),this.dispatchEvent({target:this,type:"seeked"})):r.default.d(1,0,"InnerAudioContext seek not implement yet")}},{key:"onCanplay",value:function(e){this.onCanplayCallback=e}},{key:"offCanplay",value:function(e){this.onCanplayCallback=void 0}},{key:"onPlay",value:function(e){this.onPlayCallback=e}},{key:"offPlay",value:function(e){this.onPlayCallback=void 0}},{key:"onPause",value:function(e){this.onPauseCallback=e}},{key:"offPause",value:function(e){this.onPauseCallback=void 0}},{key:"onStop",value:function(e){this.onStopCallback=e}},{key:"offStop",value:function(e){this.onStopCallback=void 0}},{key:"onEnded",value:function(e){this.onEndedCallback=e}},{key:"offEnded",value:function(e){this.onEndedCallback=void 0}},{key:"onError",value:function(e){this.onErrorCallback=e}},{key:"offError",value:function(e){this.onErrorCallback=void 0}},{key:"onTimeUpdate",value:function(e){this.onTimeUpdateCallback=e}},{key:"offTimeUpdate",value:function(e){this.onTimeUpdateCallback=void 0}},{key:"onWaiting",value:function(e){this.onWaitingCallback=e}},{key:"offWaiting",value:function(e){this.onWaitingCallback=void 0}},{key:"onSeeking",value:function(e){this.addEventListener("seeking",e),this.onSeekingCallback=e}},{key:"offSeeking",value:function(e){this.removeEventListener("seeking",e),this.onSeekingCallback=void 0}},{key:"onSeeked",value:function(e){this.addEventListener("seeked",e),this.onSeekedCallback=e}},{key:"offSeeked",value:function(e){this.removeEventListener("seeked",e),this.onSeekedCallback=void 0}},{key:"src",get:function(){return u.get(this)},set:function(e){u.set(this,e);var t=this;(0,o.setTimeout)(function(){r.default.d(0,0,"InnerAudioContext onCanplayCallback"),t.onCanplayCallback&&t.onCanplayCallback(),t=null},0)}},{key:"loop",get:function(){return c.get(this)},set:function(e){c.set(this,e)}}]),e}();t.default=f},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=(l(n(0)),l(n(2)),n(1)),a=n(3),o=n(5);function l(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=0,this.height=0,this.tmpSrc="",this._event={},this.bkLocalPath="",this.http=[]}return i(e,[{key:"dispose",value:function(){console.log("dispose img"),this.__nativeObj&&this.__nativeObj.dispose&&this.__nativeObj.dispose()}},{key:"removeEventListener",value:function(e,t){this._event[e]||(this._event[e]=[]);var n=this._event[e].indexOf(t);this._event[e].splice(n,1)}},{key:"addEventListener",value:function(e,t,n){this._event[e]||(this._event[e]=[]),this._event[e].push(t),n&&n.capture&&console.warn("EventTarget.addEventListener: options.capture is not implemented."),n&&n.once,n&&n.passive&&console.warn("EventTarget.addEventListener: options.passive is not implemented.")}},{key:"dispatchEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._event[e.type];if(void 0!==t)for(var n=0;n<t.length;n++)t[n]&&t[n](e)}},{key:"handleImgUrl",value:function(){var e=this.tmpSrc,t=this.bkLocalPath;"string"==typeof e?(0,r.isRemoteUrl)(e)?BK.FileUtil.isFileExist(t)?this.createImgObj(t):this.loadImg():this.createImgObj(t):this.dispatchEvent({type:"error"})}},{key:"handleB64data",value:function(e){var t=BK.Misc.arrayBufferToBKBuffer(e);this.createImgObj(t)}},{key:"loadImg",value:function(){var e=this.tmpSrc,t=this.bkLocalPath,n=new BK.HttpUtil(e);n.setHttpMethod("get");var i=this;this.http.push(n),n.requestAsync(function(e,r){200==r?BK.FileUtil.writeBufferToFile(t,e)?i.createImgObj(t):i.dispatchEvent({type:"error"}):i.dispatchEvent({type:"error"});i.http.pop(n),i=null})}},{key:"createImgObj",value:function(e){var t=BK.Image.loadImage(e),n=this;void 0!==t?(this.loaded=!0,this._bknode=t,this.__nativeObj=t,this.naturalWidth=t.width,this.naturalHeight=t.height,this.width=t.width,this.height=t.height,this.type="arraybuffer",this.source=this.src,0===this.width&&0===this.height&&(this.width=t.width,this.height=t.height),(0,a.setTimeout)(function(){n.dispatchEvent({target:n,type:"load"}),n=null},0)):(0,a.setTimeout)(function(){n.dispatchEvent({type:"error",target:n}),n=null},0)}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"src",get:function(){return this.bkLocalPath},set:function(e){if(e.includes(":image")){var t=(0,o.decode)(e.substr(e.lastIndexOf("base64")+7));this.handleB64data(t)}else{var n=(0,r.getImgPath)(e);n!==this.bkLocalPath&&(this.bkLocalPath=n,this.tmpSrc=e,this.handleImgUrl())}}},{key:"data",get:function(){return this._data},set:function(e){this._data=e}},{key:"source",get:function(){return this._source},set:function(e){this._source=e}},{key:"onload",set:function(e){if(e){this.addEventListener("load",e,{once:!0});this.loaded&&e({once:!0})}}},{key:"onerror",set:function(e){this.addEventListener("error",e,{once:!0})}}]),e}();t.default=s},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.webgl=bkWebGLGetInstance();var t=this.webgl,n=0;BK.Director.ticker.add(function(e,i){e-n>10&&(t.glCommit(),n=e)})}return i(e,[{key:"getContext",value:function(){return this.webgl}}]),e}();t.default=r},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=f(n(6)),l=f(n(2)),s=f(n(27)),u=n(1),c=n(1);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=GameStatusInfo.QQVer.split("."),p=Number(h[0])>=7&&Number(h[1])>=7,v=26,m=function(){function e(){d(this,e),this.width=0,this.height=0,this.data=new Uint8ClampedArray(0),this.bkbuffer=null}return a(e,[{key:"init",value:function(e){e&&(this.bkbuffer=e,this.data=(0,c.BKBufferToUint8ClampedArray)(this.bkbuffer),e.__inner_image_width&&(this.width=e.__inner_image_width),e.__inner_image_height&&(this.height=e.__inner_image_height))}},{key:"getBuffer",value:function(){if(this.data)for(var e=0;e<this.data.byteLength;)this.bkbuffer.writeUint8Buffer(this.data[e++]);return this.bkbuffer}},{key:"writeUint8Buffer",value:function(e){this.bkbuffer&&this.bkbuffer.writeUint8Buffer(e)}}]),e}(),g=function(e){function t(e,n){d(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return BK.Director.root.addChild(i),i.useH5Mode(),i.setTextSize(v),i.fillColor={r:0,g:0,b:0,a:1},i.strokeColor={r:0,g:0,b:0,a:1},i._width=e,i._height=n,i._lastHeight=n,i._lastWidth=e,i._fontSize=v,i._textList=[],i._lineWidth=2,i.renderCount=0,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,BK.Canvas),a(t,[{key:"size",value:function(e,t){this._height=t,this._width=e,this.updateSize()}},{key:"updateSize",value:function(){this._height||(this._height=0),this._width||(this._width=0),this.__nativeObj.size={height:this._height,width:this._width},this.__nativeObj.resetCanvas(),this.renderCount=1}},{key:"scale",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"scale",this)?r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"scale",this).apply(this,arguments):r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canvasScale",this).apply(this,arguments)}},{key:"getContext",value:function(e){if("2d"===e)return this;if("webgl"===e){var t=(new s.default).getContext();if("laya"===window.ENGINE_NAME){var n=t.viewport;t.viewport=function(e,t,i,r){n(e,t,BK.Director.screenPixelSize.width,BK.Director.screenPixelSize.height)}}return t.canvas=this,t}}},{key:"toTempFilePath",value:function(e){return this.toTempFilePathSync(e)}},{key:"toTempFilePathSync",value:function(e){var t=new BK.ScreenShot;if("object"===(void 0===e?"undefined":i(e))){var n=e.x,r=e.y,a=e.width,o=e.height;e.destWidth,e.destHeight,e.fileType,e.quality;t.origin={x:n,y:r},t.size={width:a,height:o}}return t.shotToFile()}},{key:"drawImage",value:function(){"object"===i(arguments[0])&&(arguments[0]=arguments[0].src),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"drawImage",this).apply(this,arguments)}},{key:"addEventListener",value:function(e,t){"touchstart"===e&&t?o.default.onTouchStart(t):"touchmove"===e&&t?o.default.onTouchMove(t):"touchend"===e&&t&&o.default.onTouchEnd(t)}},{key:"removeEventListener",value:function(e,t){"touchstart"===e&&o.default.offTouchStart(t)}},{key:"fillText",value:function(){this.renderCount++,r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fillText",this).apply(this,arguments),"egret"===window.ENGINE_NAME&&this.renderCount>=1&&this.renderCount<=3&&this.getTexture()}},{key:"createImageData",value:function(){if(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createImageData",this)){var e=new m,n=p?r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createImageData",this).apply(this,arguments):void 0;return e.init(n),e}}},{key:"getImageData",value:function(){if(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getImageData",this)){var e=p?r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getImageData",this).apply(this,arguments):void 0,n=new m;return n.init(e),n}}},{key:"putImageData",value:function(e){e instanceof m&&(arguments[0]=e.getBuffer()),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"putImageData",this)&&p&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"putImageData",this).apply(this,arguments)}},{key:"moveTo",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveTo",this)&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveTo",this).apply(this,arguments)}},{key:"lineTo",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"lineTo",this)&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"lineTo",this).apply(this,arguments)}},{key:"fill",value:function(){this._textList=[],r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fill",this)&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fill",this).apply(this,arguments),void 0!==window.EGRET_GAME&&this.getTexture()}},{key:"clear",value:function(){this._textList=[],r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clear",this)&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clear",this).apply(this,arguments)}},{key:"clearRect",value:function(e,n,i,a,o){this._textList=[],r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clearRect",this)&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clearRect",this).apply(this,arguments)}},{key:"transform",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"transforms",this).apply(this,arguments)}},{key:"transforms",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"transforms",this).apply(this,arguments)}},{key:"createLinearGradient",value:function(){return{addColorStop:function(){}}}},{key:"strokeText",value:function(){}},{key:"fontParse",value:function(e){for(var t,n=null,i=null,r="normal",a="normal",o="normal",l="normal",s=e.split(/\s+/);t=s.shift();)switch(t){case"normal":break;case"italic":case"oblique":r=t;break;case"small-caps":o=t;break;case"bold":case"bolder":case"lighter":case"100":case"200":case"300":case"400":case"500":case"600":case"700":case"800":case"900":a=t;break;default:if(!i){var u=t.split("/");i=u[0],u.length>1&&(l=u[1]);break}n=t,s.length&&(n+=" "+s.join(" "))}return{fontStyle:r,fontVariant:o,fontWeight:a,fontSize:i,lineHeight:l,fontFamily:n}}},{key:"height",set:function(e){this._height=e,this.updateSize()},get:function(){return this._height}},{key:"width",set:function(e){this._width=e,this.updateSize()},get:function(){return this._width}},{key:"clientWidth",set:function(e){this._width=e},get:function(){return this._width}},{key:"clientHeight",set:function(e){this._height=e},get:function(){return this._height}},{key:"fillStyle",set:function(e){this.fillColor=(0,u.colorToRgba)(e)}},{key:"strokeStyle",set:function(e){this.strokeColor=(0,u.colorToRgba)(e)}},{key:"font",set:function(e){var t=this.fontParse(e),n=t.fontSize,i=t.fontFamily,r=t.fontStyle;t.fontVariant,t.fontWeight;if(e){if(this._fontStyle=e,r&&"italic"===r&&this.setTextItalic(),n){var a=parseInt(n)||v;this._fontSize=a,this.setTextSize(a)}if(i){var o=void 0;BK.FileUtil.isFileExist(l.default.getPath(i))&&(o=l.default.getPath(i)),o&&this.fontPath!==o&&"GameRes://Arial"!==o&&(this.fontPath=o)}}}}]),t}();t.default=g},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(3);var a=!0,o=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.query=GameStatusInfo.gameParam,this.shareTicket=i,this.isSticky=r}return i(e,[{key:"getLaunchOptionsSync",value:function(){return{scene:this.scene,query:this.getLaunchObject()||{},isSticky:this.isSticky,shareTicket:this.shareTicket}}},{key:"exitMiniProgram",value:function(){BK.QQ.notifyCloseGame()}},{key:"onHide",value:function(e){"function"==typeof e&&BK.QQ.listenGameEventEnterBackground({},e)}},{key:"offHide",value:function(){"function"==typeof callback&&BK.QQ.listenGameEventEnterBackground({},null)}},{key:"onShow",value:function(e){if("function"==typeof e){var t=this;BK.Script.log(0,0,"onshow "+t.getLaunchObject()),BK.QQ.listenGameEventEnterForeground({},function(){e&&e({scene:t.scene,query:t.getLaunchObject()||{},shareTicket:t.shareTicket})}),a&&((0,r.setTimeout)(function(){e({scene:t.scene,query:t.getLaunchObject()||{},shareTicket:t.shareTicket})},0),a=!1)}}},{key:"offShow",value:function(e){"function"==typeof e&&BK.QQ.listenGameEventEnterBackground(null)}},{key:"getLaunchObject",value:function(){var e=GameStatusInfo.gameParam,t={};e&&e.split("&").forEach(function(e){var n=e.split("=")[1],i=e.split("=")[0];t[i]=n});return t}}]),e}();t.default=o},function(e,t,n){;var i;Object.defineProperty(t,"__esModule",{value:!0}),t.requestAnimationFrame=t.cancelAnimationFrame=t.clearTimeout=t.setTimeout=t.clearInterval=t.setInterval=t.Log=t.wx=t.Canvas=t.Image=void 0;var r=_(n(29)),a=_(n(0)),o=_(n(28)),l=_(n(26)),s=_(n(6)),u=n(3),c=_(n(25)),f=_(n(24)),d=_(n(23)),h=_(n(22)),p=_(n(21)),v=_(n(20)),m=_(n(19)),g=(n(18),n(17),n(16),_(n(15))),y=n(14),b=_(n(13)),w=_(n(12)),k=_(n(11)),S=_(n(10)),E=_(n(9));function _(e){return e&&e.__esModule?e:{default:e}}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=n(8).DOMParser,T=new r.default(8,"test","test",!0),N=new p.default,x=new m.default,P=new b.default,O=new f.default,F=new w.default,M=new v.default,A=new o.default(1021,85),I=new g.default(A),K=void 0,D=void 0,U=void 0,L=void 0,j=new k.default,R=new S.default,G=new E.default,z=Date.now();new BK.Game({onLoad:function(e){BK.Script.log(0,0,"BK.Game, onLoad")},onMaximize:function(e){BK.Script.log(0,0,"BK.Game, onMaxmize")},onMinmize:function(e){BK.Script.log(0,0,"BK.Game, onMinmize")},onEnterBackground:function(e){BK.Script.log(0,0,"BK.Game, onEnterbackground"),U&&U()},onEnterForeground:function(e){BK.Script.log(0,0,"BK.Game, onEnterforeground"),D&&D()},onShare:function(e){if(BK.Script.log(0,0,"BK.Game, onShare"),x&&x.shareCallback){var t=x.shareCallback();if(void 0!==t)return{summary:t.title,extendInfo:{},localPicPath:"",picUrl:t.imageUrl}}},onClose:function(e){BK.Script.log(0,0,"BK.Game, onClose")},onNetWorkChange:function(e,t){if(L){L()}}});var q=(C(i={exitMiniProgram:function(){return T.exitMiniProgram()},getLaunchOptionsSync:function(){return T.getLaunchOptionsSync()},onHide:function(e){return T.onHide(e)},offHide:function(){return T.offHide()},onShow:function(e){return T.onShow(e)},offShow:function(e){return T.offShow(e)},log:function(e,t,n){a.default.d(e,t,n)},createCanvas:function(){return new o.default(BK.Director.screenPixelSize.width,BK.Director.screenPixelSize.height)},createImage:function(){return new l.default},getWidth:function(){return void 0!==window.egret||void 0!==window.EGRET_GAME?BK.Director.renderSize.width:BK.Director.screenPixelSize.width},getHeight:function(){return void 0!==window.egret||void 0!==window.EGRET_GAME?BK.Director.renderSize.height:BK.Director.screenPixelSize.height},getSystemInfo:function(e){var t=this;window.setTimeout(function(){e.success({devicePixelRatio:BK.Director.screenPixelSize.width/BK.Director.renderSize.width,brand:"",model:"",pixelRatio:1,screenWidth:t.getWidth(),screenHeight:t.getHeight(),windowWidth:t.getWidth(),windowHeight:t.getHeight(),language:"zh_CN",version:GameStatusInfo.QQVer,system:GameStatusInfo.platform+" "+(GameStatusInfo.osVersion?GameStatusInfo.osVersion:"11.0"),platform:GameStatusInfo.platform,fontSizeSetting:"",SDKVersion:"",benchmarkLevel:"",battery:"",wifiSignal:""}),t=null,e=null},1)},getSystemInfoSync:function(){return{devicePixelRatio:BK.Director.screenPixelSize.width/BK.Director.renderSize.width,brand:"",model:"",pixelRatio:1,screenWidth:this.getWidth(),screenHeight:this.getHeight(),windowWidth:this.getWidth(),windowHeight:this.getHeight(),language:"zh_CN",version:GameStatusInfo.QQVer,system:GameStatusInfo.platform+" "+(GameStatusInfo.osVersion?GameStatusInfo.osVersion:"11.0"),platform:GameStatusInfo.platform,fontSizeSetting:"",SDKVersion:"",benchmarkLevel:"",battery:"",wifiSignal:""}},onTouchStart:function(e){s.default.onTouchStart(e)},offTouchStart:function(e){s.default.offTouchStart(e)},onTouchMove:function(e){s.default.onTouchMove(e)},onTouchCancel:function(e){s.default.onTouchCancel(e)},onTouchEnd:function(e){s.default.onTouchEnd(e)}},"offTouchStart",function(e){s.default.offTouchStart(index,1)}),C(i,"offTouchMove",function(e){s.default.offTouchMove(e)}),C(i,"offTouchCancel",function(e){s.default.offTouchCancel(e)}),C(i,"offTouchEnd",function(e){s.default.offTouchEnd(e)}),C(i,"createInnerAudioContext",function(){return new c.default}),C(i,"setPreferredFramesPerSecond",function(e){return(0,u.setPreferredFramesPerSecond)(e)}),C(i,"getUserInfo",function(e){var t={userInfo:{nickName:"",gender:1,language:"zh_CN",city:"",province:"",country:"China",avatarUrl:"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJn00QRPUIQXL4HtGLnhzVHTCA4kiaSibn6pcfs0FhWV5SzicglRrKA9wUwxBZIBHNbVWIB9R9IvYBQ/132"},rawData:"",signature:"",encryptedData:"",iv:"",errMsg:"getUserInfo:ok"};BK.QQ.fetchOpenKey(function(n,i,r){0===n&&r&&r.openKey?e.success&&(t.openid=GameStatusInfo.openId,t.openkey=r.openKey,BK.QQ.getRankList(function(n,i,r){if(r&&r.data&&r.data.rankList)for(var a=r.data.rankList,o=0;o<a.length;o++){var l=a[o];l&&l.ownFlag&&1===l.ownFlag&&(t.userInfo.avatarUrl=l.head,t.userInfo.nickName=l.nick,t.rawData=JSON.stringify(t.userInfo),e.success(t),e.complete&&e.complete())}})):(BK.Script.log(0,0,"fetchOpenKey ailed: errCode="+n),e.fail&&e.fail()),e.complete&&e.complete()})}),C(i,"getFileSystemManager",function(){return a.default.d(0,0,"getFileSystemManager"),O}),C(i,"request",function(e){return new d.default(e).request()}),C(i,"downloadFile",function(e){return new d.default(e).downloadFile()}),C(i,"uploadFile",function(e){return new d.default(e).uploadFile()}),C(i,"hideKeyboard",function(e){N.hideKeyboard(e)}),C(i,"onKeyboardInput",function(e){N.onKeyboardInput(e)}),C(i,"offKeyboardInput",function(e){N.offKeyboardInput(e)}),C(i,"onKeyboardConfirm",function(e){N.onKeyboardConfirm(e)}),C(i,"offKeyboardConfirm",function(e){N.offKeyboardConfirm(e)}),C(i,"onKeyboardComplete",function(e){N.onKeyboardComplete(e)}),C(i,"offKeyboardComplete",function(e){N.offKeyboardComplete(e)}),C(i,"showKeyboard",function(e){N.showKeyboard(e)}),C(i,"setKeepScreenOn",function(){}),C(i,"showToast",function(e){j.showToast(e)}),C(i,"hideToast",function(){j.hideToast()}),C(i,"showLoading",function(e){j.showLoading(e)}),C(i,"hideLoading",function(){j.hideLoading()}),C(i,"showModal",function(e){j.showModal(e)}),C(i,"getNetworkType",function(e){G.getNetworkType(e)}),C(i,"checkSession",function(e){M.checkSession(e)}),C(i,"login",function(e){console.log("begin login"),M.login(e)}),C(i,"getShareInfo",function(e){x.getShareInfo(e)}),C(i,"hideShareMenu",function(e){x.hideShareMenu(e)}),C(i,"onShareAppMessage",function(e){x.onShareAppMessage(e)}),C(i,"offShareAppMessage",function(e){x.offShareAppMessage(e)}),C(i,"showShareMenu",function(e){x.showShareMenu(e)}),C(i,"shareAppMessage",function(e){x.shareAppMessage(e)}),C(i,"updateShareMenu",function(e){x.updateShareMenu(e)}),C(i,"getLocation",function(e){if(e)if(e.appid){var t={appid:e.appid,needCity:1};BK.Director.getLocation(t,function(t,n,i){var r=!1;if(0==t){if(i){r=!0;var o={latitude:i.latitude,longitude:i.longitude,speed:i.speed,altitude:i.altitude,verticalAccuracy:i.verticalAccuracy,horizontalAccuracy:i.horizontalAccuracy};e.success&&e.success(o)}}else a.default.d(0,0,"getLocation failed, statusCode="+t);r||e.fail&&e.fail(),e.complete&&e.complete()})}else a.default.d(0,0,"getLocation failed, no appid");else a.default.d(0,0,"getLocation failed, no object")}),C(i,"setStorage",function(e){F.setStorage(e)}),C(i,"setStorageSync",function(e,t){F.setStorageSync(e,t)}),C(i,"getStorage",function(e){F.getStorage(e)}),C(i,"getStorageSync",function(e){return F.getStorageSync(e)}),C(i,"getStorageInfoSync",function(){return F.getStorageInfoSync()}),C(i,"getStorageInfo",function(e){F.getStorageInfo(e)}),C(i,"removeStorage",function(e){F.removeStorage(e)}),C(i,"removeStorageSync",function(e){F.removeStorageSync(e)}),C(i,"clearStorage",function(e){F.clearStorage(e)}),C(i,"clearStorageSync",function(){F.clearStorageSync()}),C(i,"connectSocket",function(e){return console.log("connect socket "),h.default.newConnection(e)}),C(i,"closeSocket",function(e){h.default.closeSocket(e)}),C(i,"onSocketOpen",function(e){console.log("open socket "),h.default.publishEvent(h.default.SOCK_EVENT_OPEN,e)}),C(i,"onSocketClose",function(e){console.log("close socket "),h.default.publishEvent(h.default.SOCK_EVENT_CLOSE,e)}),C(i,"onSocketMessage",function(e){h.default.publishEvent(h.default.SOCK_EVENT_MESSAGE,e)}),C(i,"onSocketError",function(e){h.default.publishEvent(h.default.SOCK_EVENT_ERROR,e)}),C(i,"sendSocketMessage",function(e){h.default.sendMessage(e)}),C(i,"loadFont",function(e){return e}),C(i,"onError",function(){}),C(i,"getFriendCloudStorage",function(e){if(e){var t=e.type;t||(t="score"),BK.Script.log(1,1,"getFriendCloudStorage, object="+JSON.stringify(e)),BK.QQ.getRankListWithoutRoom(t,1,0,function(t,n,i){BK.Script.log(1,1,"getRankList, cmd="+n+", errCode="+t+", data="+JSON.stringify(i));var r=[];if(i&&i.data&&i.data.ranking_list)for(var a=i.data.ranking_list,o=0;o<a.length;o++){var l=a[o];BK.Script.log(1,1,"rankList i:"+o+" nick:"+l.nick+"  head:"+l.head);var s="";l&&l.ownFlag&&1==l.ownFlag&&(s=GameStatusInfo.openId);var u=[];for(var c in l)"url"!==c&&"nick"!==c&&"selfFlag"!==c&&u.push({key:c,value:l[c]});r[o]={avatarUrl:l.url,nickname:l.nick,openid:s,self:l.selfFlag,KVDataList:u}}BK.Script.log(0,0,"getRankList, result="+JSON.stringify(r)),e.success&&e.success({data:r}),e.complete&&e.complete()})}}),C(i,"getUserCloudStorage",function(e){BK.Script.log(0,0,"getUserCloudStorage, object="+JSON.stringify(e))}),C(i,"getGroupCloudStorage",function(e){BK.Script.log(0,0,"getGroupCloudStorage, object="+JSON.stringify(e))}),C(i,"getSharedCanvas",function(){return A}),C(i,"removeUserCloudStorage",function(e){BK.Script.log(0,0,"removeUserCloudStorage, object="+JSON.stringify(e))}),C(i,"setUserCloudStorage",function(e){if(BK.Script.log(0,0,"setUserCloudStorage, object="+JSON.stringify(e)),e&&e.KVDataList){for(var t=[],n=0,i={},r=0;r<e.KVDataList.length;r++){var a=e.KVDataList[r];"key_score"===a.key||"score"===a.key?(n=a.value,i.score=n):i[a.key]=a.value}var o={score:{type:"rank",order:4},a1:{type:"rank",order:4},a2:{type:"rank",order:4},a3:{type:"rank",order:4},a4:{type:"rank",order:4},a5:{type:"rank",order:4},a6:{type:"rank",order:4},a7:{type:"rank",order:4},a8:{type:"rank",order:4},a9:{type:"rank",order:4},a10:{type:"rank",order:4},a11:{type:"rank",order:4},a12:{type:"rank",order:4},a13:{type:"rank",order:4},a14:{type:"rank",order:4},a15:{type:"rank",order:4},a16:{type:"rank",order:4}};t[0]={openId:GameStatusInfo.openId,scoreInfo:i,startMs:z.toString(),endMs:Date.now().toString()},console.error("upload scoreInfo"+JSON.stringify({userData:t,attr:o})),BK.QQ.uploadScoreWithoutRoom(1,{userData:t,attr:o},function(t,n,i){0==t?e.success&&e.success(JSON.stringify(arguments)):e.fail&&e.fail(JSON.stringify(arguments)),e.complete&&e.complete(JSON.stringify(arguments))},null)}}),C(i,"checkIsUserAdvisedToRest",function(e){}),C(i,"createUserInfoButton",function(e){}),C(i,"createOpenSettingButton",function(e){}),C(i,"getSetting",function(e){e.success&&e.success({errMsg:"getSetting:ok",authSetting:{"scope.userInfo":!0,"scope.userLocation":!0,"scope.address":!0,"scope.invoiceTitle":!0,"scope.werun":!0,"scope.record":!0,"scope.writePhotosAlbum":!0,"scope.camera":!0}})}),C(i,"openSetting",function(e){}),C(i,"getWeRunData",function(e){}),C(i,"authorize",function(e){}),C(i,"createGameClubButton",function(e){a.default.error("game club not implement")}),C(i,"openCustomerServiceConversation",function(e){}),C(i,"getOpenDataContext",function(){return a.default.d(0,0,"getOpenDataContext, context="+I),I}),C(i,"onMessage",function(e){a.default.d(0,0,"onMessage, callback="+e),K=e}),C(i,"postMessage",function(e){a.default.d(0,0,"postMessage, messageObj="+JSON.stringify(e)+", bkOnMessageCallback="+K),K&&K(e)}),C(i,"createBannerAd",function(e){if(e)return new y.BannerAd(e.adUnitId,e.style)}),C(i,"createRewardedVideoAd",function(e){if(e)return new y.RewardedVideoAd(e.adUnitId,e.style,e.videoType)}),C(i,"startAccelerometer",function(e){R.startAccelerometer(e)}),C(i,"onAccelerometerChange",function(e){R.onAccelerometerChange(e)}),C(i,"stopAccelerometer",function(e){R.stopAccelerometer(e)}),C(i,"requestMidasPayment",function(e){P.requestMidasPayment(e)}),C(i,"onAudioInterruptionEnd",function(e){D=e}),C(i,"offAudioInterruptionEnd",function(e){D=void 0}),C(i,"onAudioInterruptionBegin",function(e){U=e}),C(i,"offAudioInterruptionBegin",function(e){U=void 0}),C(i,"vibrateLong",function(){console.warn("coming soon")}),C(i,"vibrateShort",function(){BK.Script.log(1,0,"vibrateShort not implement yet")}),C(i,"getPerformance",function(){return{now:function(){return(new Date).getTime()}}}),C(i,"triggerGC",function(){BK.Script.log(1,0,"triggerGC not implement yet")}),C(i,"onNetworkStatusChange",function(e){L=e}),i);q.env={},q.env.USER_DATA_PATH="",t.Image=l.default,t.Canvas=o.default,t.wx=q,t.Log=a.default,t.setInterval=u.setInterval,t.clearInterval=u.clearInterval,t.setTimeout=u.setTimeout,t.clearTimeout=u.clearTimeout,t.cancelAnimationFrame=u.cancelAnimationFrame,t.requestAnimationFrame=u.requestAnimationFrame,window.Image=l.default,window.wx=q,window.setInterval=u.setInterval,window.clearInterval=u.clearInterval,window.setTimeout=u.setTimeout,window.clearTimeout=u.clearTimeout,window.cancelAnimationFrame=u.cancelAnimationFrame,window.requestAnimationFrame=u.requestAnimationFrame,window.DOMParser=B}]);
var bkadapter={'version':'3bb2435','author' :'curiezhu','time' :'Tue Oct 09 2018 23:08:14 GMT+0800 (CST)'};