!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=30)}([function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.default={d:function(e,t,n){BK.Script.log(e,t,n)}}},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"getPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GameRes",n=e;return"GameRes"===t?n="GameRes://"+n:"GameSandBox"===t&&(n="GameSandBox://"+n),n}}]),e}();t.default=i,i.SCHEMA_RES="GameRes",i.SCHEMA_SAND="GameSandBox"},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.setTimeout=a,t.clearTimeout=o,t.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=GameGlobal._fpsinterval,r=a(e,n);return t+n,r},t.setPreferredFramesPerSecond=function(e){GameGlobal._fpsinterval=1-1*e/60},t.cancelAnimationFrame=function(e){o(e)},t.setInterval=function(e,t){var n=new BK.Ticker;n.interval=60*t/1e3,n.setTickerCallBack(function(t,n){e()});var r=++i;return GameGlobal.intervals[r]={i:r,ticker:n},r},t.clearInterval=function(e){e&&GameGlobal.intervals[e]&&(GameGlobal.intervals[e].ticker.dispose(),delete GameGlobal.intervals[e])},GameGlobal.timers={},GameGlobal.intervals={},GameGlobal._fpsinterval=0;var r=0,i=0;BK.Director.ticker.add(function(e,t){Object.keys(GameGlobal.timers).map(function(t){var n=GameGlobal.timers[t];n.b+n.t<=e&&(delete GameGlobal.timers[t],n.f(e))})});function a(e,t){t||(t=0);var n=++r;return GameGlobal.timers[n]={b:Date.now(),t:t,f:e},n}function o(e){delete GameGlobal.timers[e]}},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.isRemoteUrl=a,t.wrapLocalUrl=o,t.wrapSandBoxPath=u,t.extractFileNameFromUrl=l,t.extractFilePathFromUrl=c,t.getImgPath=function(e){var t=void 0;if(a(e)){var n=c(e)+l(e);n.replace("/","#"),n.replace("\\","#"),t=u("download/images/"+n)}else 0==e.indexOf(r)||0==e.indexOf(i)?t=e:(t=o(e),BK.FileUtil.isFileExist(t)||(t=u(e)));return t},t.getAudioPath=function(e){var t=void 0;if(a(e)){var n=l(e);t=u("download/audio/"+n)}else t=o(e);return t},t.hexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:parseInt(t[4],16)}:null},t.colourNameToHex=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return void 0!==t[e.toLowerCase()]&&t[e.toLowerCase()]},t.colorToRgba=function(e){"#"===e.charAt(0)&&(e=e.substr(1,6));e=(e=e.replace(/ /g,"")).toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var n in t)e==n&&(e=t[n]);for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),255]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),255]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),255]}},{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgba(123, 234, 45,12)","rgba(255,234,245,12)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseInt(e[4])]}},{re:/^(\w{2})(\w{2})(\w{2})(\w{2})$/,example:["#00ff0000","33669900"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),parseInt(e[4],16)]}}],i=0;i<r.length;i++){var a=r[i].re,o=r[i].process,u=a.exec(e);u&&(channels=o(u),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.a=channels[3],this.ok=!0)}return this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.a=this.a<0||isNaN(this.a)?0:this.a>255?255:this.a,this.toFloatColor=function(){return{r:(this.r+0)/255,g:(this.g+0)/255,b:(this.b+0)/255,a:(this.a+0)/255}},this.toFloatColor()};var r="GameRes://",i="GameSandBox://";function a(e){return/^https?:\/\//.test(e)}function o(e){return/^GameRes:\/\//.test(e)?e:"GameRes://"+e.replace(/^\.*\//,"")}function u(e){return/^GameSandBox:\/\//.test(e)?e:"GameSandBox://"+e.replace(/^\.*\//,"")}function l(e){var t=e.lastIndexOf("/");return-1==t&&(t=e.lastIndexOf("\\")),e.substr(t+1)}function c(e){var t=0;t=e.startsWith("https")?e.substr(8).indexOf("/")+9:e.startsWith("http")?e.substr(7).indexOf("/")+8:e.indexOf("/")+1;var n=e.lastIndexOf("/");return e.substring(t,n)+"/"}},function(e,t){function n(e,t){for(var n in e)t[n]=e[n]}function r(e,t){var r=e.prototype;if(Object.create){var i=Object.create(t.prototype);r.__proto__=i}if(!(r instanceof t)){function a(){}a.prototype=t.prototype,n(r,a=new a),e.prototype=r=a}r.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),r.constructor=e)}var i="http://www.w3.org/1999/xhtml",a={},o=a.ELEMENT_NODE=1,u=a.ATTRIBUTE_NODE=2,l=a.TEXT_NODE=3,c=a.CDATA_SECTION_NODE=4,f=a.ENTITY_REFERENCE_NODE=5,s=a.ENTITY_NODE=6,d=a.PROCESSING_INSTRUCTION_NODE=7,h=a.COMMENT_NODE=8,p=a.DOCUMENT_NODE=9,g=a.DOCUMENT_TYPE_NODE=10,m=a.DOCUMENT_FRAGMENT_NODE=11,v=a.NOTATION_NODE=12,E={},y={},b=(E.INDEX_SIZE_ERR=(y[1]="Index size error",1),E.DOMSTRING_SIZE_ERR=(y[2]="DOMString size error",2),E.HIERARCHY_REQUEST_ERR=(y[3]="Hierarchy request error",3)),_=(E.WRONG_DOCUMENT_ERR=(y[4]="Wrong document",4),E.INVALID_CHARACTER_ERR=(y[5]="Invalid character",5),E.NO_DATA_ALLOWED_ERR=(y[6]="No data allowed",6),E.NO_MODIFICATION_ALLOWED_ERR=(y[7]="No modification allowed",7),E.NOT_FOUND_ERR=(y[8]="Not found",8)),S=(E.NOT_SUPPORTED_ERR=(y[9]="Not supported",9),E.INUSE_ATTRIBUTE_ERR=(y[10]="Attribute in use",10));E.INVALID_STATE_ERR=(y[11]="Invalid state",11),E.SYNTAX_ERR=(y[12]="Syntax error",12),E.INVALID_MODIFICATION_ERR=(y[13]="Invalid modification",13),E.NAMESPACE_ERR=(y[14]="Invalid namespace",14),E.INVALID_ACCESS_ERR=(y[15]="Invalid access",15);function T(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,y[e]),this.message=y[e],Error.captureStackTrace&&Error.captureStackTrace(this,T);return n.code=e,t&&(this.message=this.message+": "+t),n}function A(){}function w(e,t){this._node=e,this._refresh=t,k(this)}function k(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);ne(e,"length",r.length),n(r,e),e._inc=t}}function C(){}function N(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function I(e,t,n,r){if(r?t[N(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(r&&U(i,e,r),function(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(i,e,n))}}function R(e,t,n){var r=N(t,n);if(!(r>=0))throw T(_,new Error(e.tagName+"@"+n));for(var i=t.length-1;r<i;)t[r]=t[++r];if(t.length=i,e){var a=e.ownerDocument;a&&(U(a,e,n),n.ownerElement=null)}}function B(e){if(this._features={},e)for(var t in e)this._features=e[t]}function P(){}function O(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function F(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(F(e,t))return!0}while(e=e.nextSibling)}function M(){}function U(e,t,n,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function L(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var i=t.firstChild,a=0;i;)r[a++]=i,i=i.nextSibling;r.length=a}}}function x(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,L(e.ownerDocument,e),t}function D(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===m){var i=t.firstChild;if(null==i)return t;var a=t.lastChild}else i=a=t;var o=n?n.previousSibling:e.lastChild;i.previousSibling=o,a.nextSibling=n,o?o.nextSibling=i:e.firstChild=i,null==n?e.lastChild=a:n.previousSibling=a;do{i.parentNode=e}while(i!==a&&(i=i.nextSibling));return L(e.ownerDocument||e,e),t.nodeType==m&&(t.firstChild=t.lastChild=null),t}function K(){this._nsMap={}}function G(){}function V(){}function j(){}function H(){}function X(){}function W(){}function z(){}function q(){}function Y(){}function Q(){}function $(){}function J(){}function Z(e,t){var n=[],r=9==this.nodeType?this.documentElement:this,i=r.prefix,a=r.namespaceURI;if(a&&null==i&&null==(i=r.lookupPrefix(a)))var o=[{namespace:a,prefix:null}];return te(this,n,e,t,o),n.join("")}function ee(e,t,n){var r=e.prefix||"",i=e.namespaceURI;if(!r&&!i)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var a=n.length;a--;){var o=n[a];if(o.prefix==r)return o.namespace!=i}return!0}function te(e,t,n,r,a){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case o:a||(a=[]);a.length;var s=e.attributes,v=s.length,E=e.firstChild,y=e.tagName;n=i===e.namespaceURI||n,t.push("<",y);for(var b=0;b<v;b++){"xmlns"==(_=s.item(b)).prefix?a.push({prefix:_.localName,namespace:_.value}):"xmlns"==_.nodeName&&a.push({prefix:"",namespace:_.value})}for(b=0;b<v;b++){var _;if(ee(_=s.item(b),0,a)){var S=_.prefix||"",T=_.namespaceURI,A=S?" xmlns:"+S:" xmlns";t.push(A,'="',T,'"'),a.push({prefix:S,namespace:T})}te(_,t,n,r,a)}if(ee(e,0,a)){S=e.prefix||"",T=e.namespaceURI,A=S?" xmlns:"+S:" xmlns";t.push(A,'="',T,'"'),a.push({prefix:S,namespace:T})}if(E||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(y)){if(t.push(">"),n&&/^script$/i.test(y))for(;E;)E.data?t.push(E.data):te(E,t,n,r,a),E=E.nextSibling;else for(;E;)te(E,t,n,r,a),E=E.nextSibling;t.push("</",y,">")}else t.push("/>");return;case p:case m:for(E=e.firstChild;E;)te(E,t,n,r,a),E=E.nextSibling;return;case u:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,O),'"');case l:return t.push(e.data.replace(/[<&]/g,O));case c:return t.push("<![CDATA[",e.data,"]]>");case h:return t.push("\x3c!--",e.data,"--\x3e");case g:var w=e.publicId,k=e.systemId;if(t.push("<!DOCTYPE ",e.name),w)t.push(' PUBLIC "',w),k&&"."!=k&&t.push('" "',k),t.push('">');else if(k&&"."!=k)t.push(' SYSTEM "',k,'">');else{var C=e.internalSubset;C&&t.push(" [",C,"]"),t.push(">")}return;case d:return t.push("<?",e.target," ",e.data,"?>");case f:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ne(e,t,n){e[t]=n}T.prototype=Error.prototype,n(E,T),A.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)te(this[r],n,e,t);return n.join("")}},w.prototype.item=function(e){return k(this),this[e]},r(w,A),C.prototype={length:0,item:A.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new T(S);var n=this.getNamedItem(e.nodeName);return I(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new T(S);return t=this.getNamedItemNS(e.namespaceURI,e.localName),I(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return R(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return R(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},B.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r=new M;if(r.implementation=this,r.childNodes=new A,r.doctype=n,n&&r.appendChild(n),t){var i=r.createElementNS(e,t);r.appendChild(i)}return r},createDocumentType:function(e,t,n){var r=new W;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},P.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return D(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return x(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,n,r){var i=new n.constructor;for(var a in n){var l=n[a];"object"!=typeof l&&l!=i[a]&&(i[a]=l)}n.childNodes&&(i.childNodes=new A);i.ownerDocument=t;switch(i.nodeType){case o:var c=n.attributes,f=i.attributes=new C,s=c.length;f._ownerElement=i;for(var d=0;d<s;d++)i.setAttributeNode(e(t,c.item(d),!0));break;case u:r=!0}if(r)for(var h=n.firstChild;h;)i.appendChild(e(t,h,r)),h=h.nextSibling;return i}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==l&&e.nodeType==l?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=t.nodeType==u?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==u?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},n(a,P),n(a,P.prototype),M.prototype={nodeName:"#document",nodeType:p,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==m){for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return null==this.documentElement&&e.nodeType==o&&(this.documentElement=e),D(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),x(this,e)},importNode:function(e,t){return function e(t,n,r){var i;switch(n.nodeType){case o:(i=n.cloneNode(!1)).ownerDocument=t;case m:break;case u:r=!0}i||(i=n.cloneNode(!1));i.ownerDocument=t;i.parentNode=null;if(r)for(var a=n.firstChild;a;)i.appendChild(e(t,a,r)),a=a.nextSibling;return i}(this,e,t)},getElementById:function(e){var t=null;return F(this.documentElement,function(n){if(n.nodeType==o&&n.getAttribute("id")==e)return t=n,!0}),t},createElement:function(e){var t=new K;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new A,(t.attributes=new C)._ownerElement=t,t},createDocumentFragment:function(){var e=new Q;return e.ownerDocument=this,e.childNodes=new A,e},createTextNode:function(e){var t=new j;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new H;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new X;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new $;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new G;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new Y;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new K,r=t.split(":"),i=n.attributes=new C;return n.childNodes=new A,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new G,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},r(M,P),K.prototype={nodeType:o,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===m?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var r=e.lastChild;n.removeChild(t),r=e.lastChild}return r=e.lastChild,t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,L(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new w(this,function(t){var n=[];return F(t,function(r){r===t||r.nodeType!=o||"*"!==e&&r.tagName!=e||n.push(r)}),n})},getElementsByTagNameNS:function(e,t){return new w(this,function(n){var r=[];return F(n,function(i){i===n||i.nodeType!==o||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||r.push(i)}),r})}},M.prototype.getElementsByTagName=K.prototype.getElementsByTagName,M.prototype.getElementsByTagNameNS=K.prototype.getElementsByTagNameNS,r(K,P),G.prototype.nodeType=u,r(G,P),V.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(y[b])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},r(V,P),j.prototype={nodeName:"#text",nodeType:l,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},r(j,V),H.prototype={nodeName:"#comment",nodeType:h},r(H,V),X.prototype={nodeName:"#cdata-section",nodeType:c},r(X,V),W.prototype.nodeType=g,r(W,P),z.prototype.nodeType=v,r(z,P),q.prototype.nodeType=s,r(q,P),Y.prototype.nodeType=f,r(Y,P),Q.prototype.nodeName="#document-fragment",Q.prototype.nodeType=m,r(Q,P),$.prototype.nodeType=d,r($,P),J.prototype.serializeToString=function(e,t,n){return Z.call(e,t,n)},P.prototype.toString=Z;try{if(Object.defineProperty){Object.defineProperty(w.prototype,"length",{get:function(){return k(this),this.$$length}}),Object.defineProperty(P.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case o:case m:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case o:case m:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ne=function(e,t,n){e["$$"+t]=n}}}catch(e){}t.DOMImplementation=B,t.XMLSerializer=J},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0);(r=a)&&r.__esModule;var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.touchEventStartcb=[],this.touchEventMovecb=[],this.touchEventEndcb=[],this.touchEventCancelcb=[]}return i(e,[{key:"dispatchEvent",value:function(){var e=this;BK.Director.ticker.add(function(){var t=BK.TouchEvent.getTouchEvent();if(void 0!=t)t.map(function(t){var n=t.x,r=BK.Director.screenPixelSize.height-t.y,i=BK.Director.screenPixelSize.width/BK.Director.renderSize.width;n=n,r=r;var a={identifier:t.id,id:t.id,screenX:n/i,screenY:r/i,clientX:n,clientY:r,pageX:n/i,pageY:r/i};return 2==t.status?e.touchEventStartcb.map(function(e){e({touches:[a],changedTouches:[a],timeStamp:Date.now(),preventDefault:function(){}})}):3==t.status?e.touchEventMovecb.map(function(e){e({touches:[a],changedTouches:[a],timeStamp:Date.now(),preventDefault:function(){}})}):1==t.status&&e.touchEventEndcb.map(function(e){e({touches:[a],changedTouches:[a],timeStamp:Date.now(),preventDefault:function(){}})}),a},e);BK.TouchEvent.updateTouchStatus()})}},{key:"onTouchStart",value:function(e){null!=e&&this.touchEventStartcb.push(e)}},{key:"onTouchMove",value:function(e){this.touchEventMovecb.push(e)}},{key:"onTouchCancel",value:function(e){this.touchEventCancelcb.push(e)}},{key:"onTouchEnd",value:function(e){this.touchEventEndcb.push(e)}},{key:"offTouchStart",value:function(e){var t=this.touchEventStartcb.indexOf(e);this.touchEventStartcb.splice(t,1)}},{key:"offTouchMove",value:function(e){var t=this.touchEventMovecb.indexOf(e);this.touchEventMovecb.splice(t,1)}},{key:"offTouchCancel",value:function(e){var t=this.touchEventCancelcb.indexOf(e);this.touchEventCancelcb.splice(t,1)}},{key:"offTouchEnd",value:function(e){var t=this.touchEventEndcb.indexOf(e);this.touchEventEndcb.splice(t,1)}}]),e}());o.dispatchEvent(),t.default=o},function(e,t){var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$"),a=0,o=1,u=2,l=3,c=4,f=5,s=6,d=7;function h(){}function p(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function g(e,t,n,r,i,h){for(var p,g=++t,m=a;;){var v=e.charAt(g);switch(v){case"=":if(m===o)p=e.slice(t,g),m=l;else{if(m!==u)throw new Error("attribute equal must after attrName");m=l}break;case"'":case'"':if(m===l||m===o){if(m===o&&(h.warning('attribute value must after "="'),p=e.slice(t,g)),t=g+1,!((g=e.indexOf(v,t))>0))throw new Error("attribute value no end '"+v+"' match");E=e.slice(t,g).replace(/&#?\w+;/g,i),n.add(p,E,t-1),m=f}else{if(m!=c)throw new Error('attribute value must after "="');E=e.slice(t,g).replace(/&#?\w+;/g,i),n.add(p,E,t),h.warning('attribute "'+p+'" missed start quot('+v+")!!"),t=g+1,m=f}break;case"/":switch(m){case a:n.setTagName(e.slice(t,g));case f:case s:case d:m=d,n.closed=!0;case c:case o:case u:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return h.error("unexpected end of input"),m==a&&n.setTagName(e.slice(t,g)),g;case">":switch(m){case a:n.setTagName(e.slice(t,g));case f:case s:case d:break;case c:case o:"/"===(E=e.slice(t,g)).slice(-1)&&(n.closed=!0,E=E.slice(0,-1));case u:m===u&&(E=p),m==c?(h.warning('attribute "'+E+'" missed quot(")!!'),n.add(p,E.replace(/&#?\w+;/g,i),t)):("http://www.w3.org/1999/xhtml"===r[""]&&E.match(/^(?:disabled|checked|selected)$/i)||h.warning('attribute "'+E+'" missed value!! "'+E+'" instead!!'),n.add(E,E,t));break;case l:throw new Error("attribute value missed!!")}return g;case"":v=" ";default:if(v<=" ")switch(m){case a:n.setTagName(e.slice(t,g)),m=s;break;case o:p=e.slice(t,g),m=u;break;case c:var E=e.slice(t,g).replace(/&#?\w+;/g,i);h.warning('attribute "'+E+'" missed quot(")!!'),n.add(p,E,t);case f:m=s}else switch(m){case u:n.tagName;"http://www.w3.org/1999/xhtml"===r[""]&&p.match(/^(?:disabled|checked|selected)$/i)||h.warning('attribute "'+p+'" missed value!! "'+p+'" instead2!!'),n.add(p,p,t),t=g,m=o;break;case f:h.warning('attribute space is required"'+p+'"!!');case s:m=o,t=g;break;case l:m=c,t=g;break;case d:throw new Error("elements closed character '/' and '>' must be connected to")}}g++}}function m(e,t,n){for(var r=e.tagName,i=null,a=e.length;a--;){var o=e[a],u=o.qName,l=o.value;if((d=u.indexOf(":"))>0)var c=o.prefix=u.slice(0,d),f=u.slice(d+1),s="xmlns"===c&&f;else f=u,c=null,s="xmlns"===u&&"";o.localName=f,!1!==s&&(null==i&&(i={},y(n,n={})),n[s]=i[s]=l,o.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(s,l))}for(a=e.length;a--;){(c=(o=e[a]).prefix)&&("xml"===c&&(o.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==c&&(o.uri=n[c||""]))}var d;(d=r.indexOf(":"))>0?(c=e.prefix=r.slice(0,d),f=e.localName=r.slice(d+1)):(c=null,f=e.localName=r);var h=e.uri=n[c||""];if(t.startElement(h,f,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=i,!0;if(t.endElement(h,f,r),i)for(c in i)t.endPrefixMapping(c)}function v(e,t,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var a=e.indexOf("</"+n+">",t),o=e.substring(t+1,a);if(/[&<]/.test(o))return/^script$/i.test(n)?(i.characters(o,0,o.length),a):(o=o.replace(/&#?\w+;/g,r),i.characters(o,0,o.length),a)}return t+1}function E(e,t,n,r){var i=r[n];return null==i&&((i=e.lastIndexOf("</"+n+">"))<t&&(i=e.lastIndexOf("</"+n)),r[n]=i),i<t}function y(e,t){for(var n in e)t[n]=e[n]}function b(e,t,n,r){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(i=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3}var a=function(e,t){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;i.lastIndex=t,i.exec(e);for(;n=i.exec(e);)if(r.push(n),n[1])return r}(e,t),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var u=a[1][0],l=o>3&&/^public$/i.test(a[2][0])&&a[3][0],c=o>4&&a[4][0],f=a[o-1];return n.startDTD(u,l&&l.replace(/^(['"])(.*?)\1$/,"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),f.index+f[0].length}}return-1}function _(e,t,n){var r=e.indexOf("?>",t);if(r){var i=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){i[0].length;return n.processingInstruction(i[1],i[2]),r+2}return-1}return-1}function S(e){}function T(e,t){return e.__proto__=t,e}h.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),y(t,t={}),function(e,t,n,r,i){function a(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(i.error("entity not found:"+e),e)}function o(t){if(t>y){var n=e.substring(y,t).replace(/&#?\w+;/g,a);s&&u(y),r.characters(n,0,t-y),y=t}}function u(t,n){for(;t>=c&&(n=f.exec(e));)l=n.index,c=l+n[0].length,s.lineNumber++;s.columnNumber=t-l+1}var l=0,c=0,f=/.*(?:\r\n?|\n)|.*$/g,s=r.locator,d=[{currentNSMap:t}],h={},y=0;for(;;){try{var T=e.indexOf("<",y);if(T<0){if(!e.substr(y).match(/^\s*$/)){var A=r.doc,w=A.createTextNode(e.substr(y));A.appendChild(w),r.currentElement=w}return}switch(T>y&&o(T),e.charAt(T+1)){case"/":var k=e.indexOf(">",T+3),C=e.substring(T+2,k),N=d.pop();k<0?(C=e.substring(T+2).replace(/[\s<].*/,""),i.error("end tag name: "+C+" is not complete:"+N.tagName),k=T+1+C.length):C.match(/\s</)&&(C=C.replace(/[\s<].*/,""),i.error("end tag name: "+C+" maybe not complete"),k=T+1+C.length);var I=N.localNSMap,R=N.tagName==C,B=R||N.tagName&&N.tagName.toLowerCase()==C.toLowerCase();if(B){if(r.endElement(N.uri,N.localName,C),I)for(var P in I)r.endPrefixMapping(P);R||i.fatalError("end tag name: "+C+" is not match the current start tagName:"+N.tagName)}else d.push(N);k++;break;case"?":s&&u(T),k=_(e,T,r);break;case"!":s&&u(T),k=b(e,T,r,i);break;default:s&&u(T);var O=new S,F=d[d.length-1].currentNSMap,k=g(e,T,O,F,a,i),M=O.length;if(!O.closed&&E(e,k,O.tagName,h)&&(O.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),s&&M){for(var U=p(s,{}),L=0;L<M;L++){var x=O[L];u(x.offset),x.locator=p(s,{})}r.locator=U,m(O,r,F)&&d.push(O),r.locator=s}else m(O,r,F)&&d.push(O);"http://www.w3.org/1999/xhtml"!==O.uri||O.closed?k++:k=v(e,k,O.tagName,a,r)}}catch(e){i.error("element parse error: "+e),k=-1}k>y?y=k:o(Math.max(T,y)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}},S.prototype={setTagName:function(e){if(!i.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!i.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},T({},T.prototype)instanceof T||(T=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),t.XMLReader=h},function(e,t,n){function r(e){this.options=e||{locator:{}}}function i(){this.cdata=!1}function a(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function o(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function u(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function l(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}r.prototype.parseFromString=function(e,t){var n=this.options,r=new c,a=n.domBuilder||new i,u=n.errorHandler,l=n.locator,f=n.xmlns||{},s={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return l&&a.setDocumentLocator(l),r.errorHandler=function(e,t,n){if(!e){if(t instanceof i)return t;e=t}var r={},a=e instanceof Function;function u(t){var i=e[t];!i&&a&&(i=2==e.length?function(n){e(t,n)}:e),r[t]=i&&function(e){i("[xmldom "+t+"]\t"+e+o(n))}||function(){}}return n=n||{},u("warning"),u("error"),u("fatalError"),r}(u,a,l),r.domBuilder=n.domBuilder||a,/\/x?html?$/.test(t)&&(s.nbsp=" ",s.copy="©",f[""]="http://www.w3.org/1999/xhtml"),f.xml=f.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,f,s):r.errorHandler.error("invalid doc source"),a.doc},i.prototype={startDocument:function(){this.doc=(new f).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var i=this.doc,o=i.createElementNS(e,n||t),u=r.length;l(this,o),this.currentElement=o,this.locator&&a(this.locator,o);for(var c=0;c<u;c++){e=r.getURI(c);var f=r.getValue(c),s=(n=r.getQName(c),i.createAttributeNS(e,n));this.locator&&a(r.getLocator(c),s),s.value=s.nodeValue=f,o.setAttributeNode(s)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&a(this.locator,n),l(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=u.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&a(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=u.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&a(this.locator,r),l(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(e,t,n);this.locator&&a(this.locator,i),l(this,i)}},warning:function(e){console.warn("[xmldom warning]\t"+e,o(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,o(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,o(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){i.prototype[e]=function(){return null}});var c=n(6).XMLReader,f=t.DOMImplementation=n(4).DOMImplementation;t.XMLSerializer=n(4).XMLSerializer,t.DOMParser=r},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"getNetworkType",value:function(e){var t="3g";switch(GameStatusInfo.networkType){case 1:case 2:case 3:t="3g";break;case 0:t="wifi";break;default:t="unknown"}return t}},{key:"onNetworkStatusChange",value:function(e){}}]),e}();t.default=i},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();i(n(0)),i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._event={}}return r(e,[{key:"startAccelerometer",value:function(e){e.success,e.fail,e.complete;console.log("Accelerometer not support yet"),BK.Script.log(1,0,"Accelerometer startAcelerometer  not support yet")}},{key:"stopAccelerometer",value:function(e){console.log("Accelerometer not support yet"),BK.Script.log(1,0,"Accelerometer stopAccelerometer not support yet")}},{key:"onAccelerometerChange",value:function(e){this.addEventListener("accelerometerChange",e.callback),console.log("Accelerometer not support yet"),BK.Script.log(1,0,"Accelerometer onAccelerometerChange not support yet")}},{key:"addEventListener",value:function(e,t,n){this._event[e]||(this._event[e]=[]),this._event[e].push(t),n&&n.capture&&console.warn("EventTarget.addEventListener: options.capture is not implemented."),n&&n.once,n&&n.passive&&console.warn("EventTarget.addEventListener: options.passive is not implemented.")}},{key:"dispatchEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._event[e.type];if(void 0!==t)for(var n=0;n<t.length;n++)t[n](e)}}]),e}();t.default=a},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();i(n(0)),i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"showToast",value:function(e){console.log("showToast not implemented yet",e)}},{key:"hideToast",value:function(){console.log("hideToast not implemented yet")}},{key:"showLoading",value:function(e){console.log("showLoading not implemented yet",e),e&&e.success&&e.success(),e&&e.complete&&e.complete()}},{key:"hideLoading",value:function(){console.log("hideLoading not implemented yet")}},{key:"showModal",value:function(e){console.log("showModal not implemented yet",e),e&&e.success&&e.success()}}]),e}();t.default=a},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a="GameSandBox://localStorage/storage",o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bkStorageCacheInit=!1,this.initStorage()}return i(e,[{key:"initStorage",value:function(){if(!this.bkStorageCacheInit){if(BK.FileUtil.isFileExist(a)){var e=BK.FileUtil.readFile(a);"object"===(void 0===e?"undefined":r(e))?this.bkStorageCacheMap=new Map(JSON.parse(e.readAsString())):this.bkStorageCacheMap=new Map}else this.bkStorageCacheMap=new Map;this.bkStorageCacheInit=!0}}},{key:"setStorage",value:function(e){if(console.log("set storage :"+JSON.stringify(e)),e&&e.key&&e.data){this.initStorage(),this.bkStorageCacheMap.set(e.key,e.data);var t=JSON.stringify(Array.from(this.bkStorageCacheMap.entries()));BK.FileUtil.writeFile(a,t),e.success&&e.success(),e.complete&&e.complete()}}},{key:"setStorageSync",value:function(e,t){if(console.log("set storage sync  :"+e+" "+t),e&&t){this.initStorage(),this.bkStorageCacheMap.set(e,t);var n=JSON.stringify(Array.from(this.bkStorageCacheMap.entries()));BK.FileUtil.writeFile(a,n)}}},{key:"getStorage",value:function(e){if(console.log("get storage :"+JSON.stringify(e)),e&&e.key){this.initStorage();var t=this.bkStorageCacheMap.get(e.key);console.log("get storage result :"+JSON.stringify(t)),t?e.success&&e.success({data:t}):e.fail&&e.fail(),e.complete&&e.complete()}}},{key:"getStorageSync",value:function(e){if(e)return this.initStorage(),console.log("get storage sync :"+e+" "+this.bkStorageCacheMap.get(e)),this.bkStorageCacheMap.get(e)}},{key:"getStorageInfoSync",value:function(){this.initStorage();var e=new Array;this.bkStorageCacheMap.forEach(function(t,n,r){e.push(n)});var t=0;if(BK.FileUtil.isFileExist(a)){var n=BK.FileUtil.getFileInfo(a);n&&(t=n.size/1024)}return{keys:e,currentSize:t,limitSize:10240}}},{key:"getStorageInfo",value:function(e){if(e){this.initStorage();var t=new Array;this.bkStorageCacheMap.forEach(function(e,n,r){t.push(n)});var n=0;if(BK.FileUtil.isFileExist(a)){var r=BK.FileUtil.getFileInfo(a);r&&(n=r.size/1024)}var i={keys:t,currentSize:n,limitSize:10240};e.success&&e.success(i),e.complete&&e.complete()}}},{key:"removeStorage",value:function(e){if(e&&e.key){this.initStorage(),this.bkStorageCacheMap.delete(e.key);var t=JSON.stringify(Array.from(this.bkStorageCacheMap.entries()));BK.FileUtil.writeFile(a,t),e.success&&e.success(),e.complete&&e.complete()}}},{key:"removeStorageSync",value:function(e){if(e){this.initStorage(),this.bkStorageCacheMap.delete(e);var t=JSON.stringify(Array.from(this.bkStorageCacheMap.entries()));BK.FileUtil.writeFile(a,t)}}},{key:"clearStorage",value:function(e){this.bkStorageCacheMap&&this.bkStorageCacheMap.clear();var t=!0;BK.FileUtil.isFileExist(a)&&(t=BK.FileUtil.deleteFile(a)),t?e.success&&e.success():e.fail&&e.fail(),e.complete&&e.complete()}},{key:"clearStorageSync",value:function(){this.bkStorageCacheMap&&this.bkStorageCacheMap.clear(),BK.FileUtil.isFileExist(a)&&BK.FileUtil.deleteFile(a)}}]),e}();t.default=o},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.midasCancelPay=function(e){o.default.d(0,0,"midasCancelPay failed, see bk interface")},t.midasGetBalance=function(e){o.default.d(0,0,"midasGetBalance failed, see bk interface")},t.midasPay=function(e){o.default.d(0,0,"midasPay failed, see bk interface")},t.midasPresent=function(e){o.default.d(0,0,"midasPresent failed, see bk interface")};var i,a=n(0),o=(i=a)&&i.__esModule?i:{default:i};var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"requestMidasPayment",value:function(e){o.default.d(0,0,"requestMidasPayment failed, see bk interface")}}]),e}();t.default=u},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.RewardedVideoAd=t.BannerAd=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=(r=a)&&r.__esModule?r:{default:r};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.BannerAd=function(){function e(t,n){u(this,e),this.adUnitId=t,this.style=n}return i(e,[{key:"show",value:function(){this.adBannerHandle&&this.adBannerHandle.close();var e=this;return new Promise(function(t,n){BK.Advertisement.fetchBannerAd(function(r,i,a){0==r?(a.show(function(r,i,a){0==r?(e.onLoadCallback&&e.onLoadCallback(),t()):(e.onErrorCallback&&e.onErrorCallback(),o.default.d(0,0,"fetchBannerAd failed, msg="+i),n(i))}),a.onClickContent(function(){e.onClickCallback&&e.onClickCallback()}),a.onClickClose(function(){e.onClickCloseCallback&&e.onClickCloseCallback()}),e.adBannerHandle=a):(e.onErrorCallback&&e.onErrorCallback(),o.default.d(0,0,"fetchBannerAd failed, msg="+i),n(i))})})}},{key:"hide",value:function(){this.adBannerHandle&&this.adBannerHandle.close()}},{key:"onResize",value:function(e){o.default.d(0,0,"BannerAd: onResize, not implement yet")}},{key:"offResize",value:function(e){o.default.d(0,0,"BannerAd: offResize, not implement yet")}},{key:"onLoad",value:function(e){this.onLoadCallback=e}},{key:"offLoad",value:function(e){this.onLoadCallback=void 0}},{key:"onError",value:function(e){this.onErrorCallback=e}},{key:"offError",value:function(e){this.onErrorCallback=void 0}},{key:"onClickContent",value:function(e){this.onClickCallback=e}},{key:"offClickContent",value:function(e){this.onClickCallback=void 0}},{key:"onClickClose",value:function(e){this.onClickCloseCallback=e}},{key:"offClickClose",value:function(e){this.onClickCloseCallback=void 0}},{key:"destroy",value:function(){}}]),e}(),t.RewardedVideoAd=function(){function e(t,n,r){u(this,e),this._event={},this.adUnitId=t,this.style=n,this.videoType=r,BK.Script.log(0,0,"start create ad")}return i(e,[{key:"show",value:function(){BK.Script.log(0,0,"start show ad"),void 0===this.videoType&&(this.videoType=3);var e=this;BK.Script.log(0,0,"start show ad 2"),BK.Script.log(0,0,"start show ad 3"+Promise.then);var t=new Promise(function(t,n){BK.Script.log(0,0,"start load ad"),BK.Advertisement.fetchVideoAd(e.videoType,function(r,i,a){o.default.d(0,0,"masonc, fetchVideoAd success, retCode="+r+", msg="+i+", handle="+a),0==r&&a?(a.setEventCallack(function(e,t){},function(t,n){e.dispatchEvent({type:"close",isEnded:!0})},function(t,n){e.dispatchEvent({type:"close",isEnded:!1})},function(e,t){}),e.onLoadCallback&&e.onLoadCallback(),a.jump(),t()):(e.onErrorCallback&&e.onErrorCallback(),n(i))})});return BK.Script.log(0,0,"promise finish"),t}},{key:"load",value:function(){o.default.d(0,0,"RewardedVideoAd, load, not implement yet")}},{key:"onClose",value:function(e){this.addEventListener("close",e,{once:!0})}},{key:"offClose",value:function(e){this.onCloseCallback=void 0}},{key:"onLoad",value:function(e){this.onLoadCallback=e}},{key:"offLoad",value:function(e){this.onLoadCallback=void 0}},{key:"onError",value:function(e){this.onErrorCallback=e}},{key:"offError",value:function(e){this.onErrorCallback=void 0}},{key:"addEventListener",value:function(e,t,n){this._event[e]||(this._event[e]=[]),this._event[e].push(t),n&&n.capture&&console.warn("EventTarget.addEventListener: options.capture is not implemented."),n&&n.once,n&&n.passive&&console.warn("EventTarget.addEventListener: options.passive is not implemented.")}},{key:"dispatchEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._event[e.type];if(void 0!==t)for(var n=0;n<t.length;n++)t[n]&&t[n](e)}}]),e}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=(r=a)&&r.__esModule?r:{default:r};var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t}return i(e,[{key:"postMessage",value:function(e){o.default.d(0,0,"OpenDataContext: postMessage, message="+JSON.stringify(e)),wx.postMessage(e)}}]),e}();t.default=u},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.OpenSettingButton=t.AuthSetting=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=(r=a)&&r.__esModule?r:{default:r};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.AuthSetting=function e(t,n){u(this,e),this.key=t,this.value=n},t.OpenSettingButton=function(){function e(t,n,r){u(this,e),this.text=t,this.image=n,this.style=r}return i(e,[{key:"show",value:function(){o.default.d(0,0,"OpenSettingButton: show failed, not implement yet")}},{key:"hide",value:function(){o.default.d(0,0,"OpenSettingButton: hide failed, not implement yet")}},{key:"onTap",value:function(e){o.default.d(0,0,"OpenSettingButton: onTap failed, not implement yet")}},{key:"offTap",value:function(e){o.default.d(0,0,"OpenSettingButton: offTap failed, not implement yet")}},{key:"destroy",value:function(){o.default.d(0,0,"OpenSettingButton: destroy failed, not implement yet")}}]),e}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.UserInfoButton=t.UserInfo=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=(r=a)&&r.__esModule?r:{default:r};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.UserInfo=function e(t,n,r){u(this,e),this.language=t,this.nickName=n,this.avatarUrl=r},t.UserInfoButton=function(){function e(t,n,r){u(this,e),this.text=t,this.image=n,this.style=r}return i(e,[{key:"show",value:function(){o.default.d(0,0,"UserInfoButton: show failed, not implement yet")}},{key:"hide",value:function(){o.default.d(0,0,"UserInfoButton: hide failed, not implement yet")}},{key:"onTap",value:function(e){o.default.d(0,0,"UserInfoButton: onTap failed, not implement yet")}},{key:"offTap",value:function(e){o.default.d(0,0,"UserInfoButton: offTap failed, not implement yet")}},{key:"destroy",value:function(){o.default.d(0,0,"UserInfoButton: destroy failed, not implement yet")}}]),e}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.GameClubButton=t.UserGameData=t.KVData=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.removeUserStorage=function(e,t,n,r,i,a){o.default.d(0,0,"removeUserStorage failed, not implement yet")},t.setUserStorage=function(e,t,n,r,i,a){o.default.d(0,0,"setUserStorage failed, not implement yet")};var i,a=n(0),o=(i=a)&&i.__esModule?i:{default:i};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.KVData=function e(t,n){u(this,e),this.key=t,this.value=n},t.UserGameData=function e(t,n,r,i){u(this,e),this.avatarUrl=t,this.nickname=n,this.openid=r,this.KVDataList=i};t.GameClubButton=function(){function e(t,n,r,i){u(this,e),this.left=t,this.top=n,this.width=r,this.height=i}return r(e,[{key:"show",value:function(){o.default.d(0,0,"GameClubButton: show failed, not implement yet")}},{key:"hide",value:function(){o.default.d(0,0,"GameClubButton: hide failed, not implement yet")}},{key:"destroy",value:function(){o.default.d(0,0,"GameClubButton: destroy failed, not implement yet")}}]),e}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"getShareInfo",value:function(e){}},{key:"hideShareMenu",value:function(e){e&&(e.success&&e.success(),e.complete&&e.complete())}},{key:"onShareAppMessage",value:function(e){this.shareCallback=e}},{key:"offShareAppMessage",value:function(e){this.shareCallback=void 0}},{key:"showShareMenu",value:function(e){e&&(e.success&&e.success(),e.complete&&e.complete())}},{key:"shareAppMessage",value:function(e){var t=void 0,n=void 0;if(e&&(e.title&&(t=e.title),e.imageUrl&&(n=e.imageUrl)),t&&n){var r={summary:t,picUrl:n,extendInfo:e.query,localPicPath:""};BK.QQ.share(r,function(t,n,r){BK.Script.log(1,1,"retCode:"+t+" shareDest:"+n+" isFirstShare:"+r);var i={errMsg:"shareAppMessage:ok",shareTickets:[1]};0===t?(0===n?(BK.Script.log(1,1,"成功分享至QQ"),i.shareTickets.push(1)):1===n?BK.Script.log(1,1,"成功分享至空间"):2===n?BK.Script.log(1,1,"成功分享至微信"):3===n&&BK.Script.log(1,1,"成功分享至朋友圈"),e&&e.success&&e.success(i)):1===t?(BK.Script.log(1,1,"分享失败"+t),e&&e.fail&&e.fail(i)):(BK.Script.log(1,1,"分享失败，用户取消分享："+t),e&&e.fail&&e.fail(i)),e&&e.complete&&e.complete(i)})}else{var i={errMsg:"shareAppMessage:ok",shareTickets:[1]};e&&e.fail&&e.fail(i),e&&e.complete&&e.complete(i)}}},{key:"updateShareMenu",value:function(e){e&&(e.success&&e.success(),e.complete&&e.complete())}}]),e}();t.default=i},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.code2accessToken=function(){BK.Script.log(0,0,"code2accessToken failed: not implement yet")};var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"checkSession",value:function(e){return BK.Script.log(0,0,"checkSession not implement yet"),!0}},{key:"login",value:function(e){e&&BK.QQ.fetchOpenKey(function(t,n,r){if(0==t&&r&&r.openKey){if(e.success){var i={code:"011tWTqk2qizXE0yQsrk2Vqzqk2tWTqq",openid:GameStatusInfo.openId,openkey:r.openKey};e.success(i)}}else BK.Script.log(0,0,"fetchOpenKey failed: errCode="+t),e.fail&&e.fail();e.complete&&e.complete()})}}]),e}();t.default=i},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onBtnClick=function(){},this.onTextChange=function(){}}return r(e,[{key:"showKeyboard",value:function(e){var t=this;BK.Editor.showKeyBoard(function(e){var n={};n.value=e,t.onBtnClick(n)},function(e){var n={};n.value=e,t.onTextChange(n)})}},{key:"hideKeyboard",value:function(e){BK.Editor.hideKeyBoard()}},{key:"onKeyboardInput",value:function(e){this.onTextChange=e}},{key:"onKeyboardConfirm",value:function(e){this.onBtnClick=e}},{key:"onKeyboardComplete",value:function(e){this.onBtnClick=e}},{key:"offKeyboardInput",value:function(e){this.onTextChange=function(){}}},{key:"offKeyboardConfirm",value:function(e){this.onBtnClick=function(){}}},{key:"offKeyboardComplete",value:function(e){this.onBtnClick=function(){}}}]),e}();t.default=i},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0);(r=a)&&r.__esModule,n(2);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=new Map,l=0,c=0,f=function(){function e(t){o(this,e);var n=t.url;this.socket=new BK.WebSocket(n),this.id=++c;var r=this;this.WEB_SOCKET_EVENT_MAP=[],this.socket.onOpen=function(e){r.onEvent(d.SOCK_EVENT_OPEN,e)},this.socket.onError=function(e){r.onEvent(d.SOCK_EVENT_ERROR,e)},this.socket.onClose=function(e){r.onEvent(d.SOCK_EVENT_CLOSE,e)},this.socket.onMessage=function(e,t){var n="";n=t.isBinary?r.bricksBufferToArrayBuffer(t.data):t.data.readAsString(),r.onEvent(d.SOCK_EVENT_MESSAGE,r.socket,{data:n})}}return i(e,[{key:"bricksBufferToArrayBuffer",value:function(e){for(var t=new ArrayBuffer(e.bufferLength()),n=new Uint8Array(t),r=0;r<e.bufferLength();)n[r++]=e.readUint8Buffer();return t}},{key:"onOpen",value:function(e){this.publishEvent(d.SOCK_EVENT_OPEN,e)}},{key:"onClose",value:function(e){this.publishEvent(d.SOCK_EVENT_CLOSE,e)}},{key:"onMessage",value:function(e){this.publishEvent(d.SOCK_EVENT_MESSAGE,e)}},{key:"onError",value:function(e){this.publishEvent(d.SOCK_EVENT_ERROR,e)}},{key:"arrayBufferToBricksBuffer",value:function(e){for(var t=new BK.Buffer(e.byteLength),n=new Uint8Array(e),r=0;r<e.byteLength;)t.writeUint8Buffer(n[r++]);return t}},{key:"send",value:function(e){var t=e,n=e.success,r=(e.fail,e.complete);return e&&(e.data instanceof ArrayBuffer?t=this.arrayBufferToBricksBuffer(e.data):e.data&&(t=e.data)),n&&n(this),r&&r(this),this.socket.send(t)}},{key:"close",value:function(e){var t=e.success,n=(e.fail,e.complete);return t&&t(this),n&&n(this),this.socket.close()}},{key:"connect",value:function(){this.socket.connect()}},{key:"onEvent",value:function(e,t,n){var r=this.WEB_SOCKET_EVENT_MAP[e];"function"==typeof r&&r(n)}},{key:"publishEvent",value:function(e,t){this.WEB_SOCKET_EVENT_MAP[e]=t}}]),e}(),s=[],d=function(){function e(){o(this,e)}return i(e,null,[{key:"onEvent",value:function(e,t,n){var r=s[e];"function"==typeof r&&r(t,n)}},{key:"publishEvent",value:function(e,t){s[e]=t}},{key:"newConnection",value:function(e){var t=e.success?e.success:function(){},n=e.fail?e.fail:function(){},r=e.complete?e.complete:function(){},i=null,a=e.url;if(!(l>=5)){u||(u=new Map);return(i=new f(e))?(u.set(a,i),l++,t()):n("Open fail for null"),r(),i}n("Reach max request num")}},{key:"closeSocket",value:function(e){var t=e.success?e.success:function(){},n=e.fail?e.fail:function(){},r=e.complete?e.complete:function(){};u||n("No request"),u.forEach(function(e,t){e instanceof f&&e.close()}),t(),r()}},{key:"sendMessage",value:function(e){var t=e.success?e.success:function(){},n=e.fail?e.fail:function(){},r=e.complete?e.complete:function(){};u||n("No request"),u.forEach(function(t,n){t instanceof f&&t.send(e.data)}),t(),r()}}]),e}();t.default=d,d.SOCK_EVENT_OPEN="OPEN",d.SOCK_EVENT_ERROR="ERROR",d.SOCK_EVENT_MESSAGE="MESSAGE",d.SOCK_EVENT_CLOSE="CLOSE"},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3));var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t.url,this.data=t.data||"",this.header=t.header||{},this.dataType=t.dataType||t.responseType||"json",this.success=t.success||function(){},this.fail=t.fail||function(){},this.complete=t.complete||function(){},this.method=t.method||"get",this.object=t}return r(e,[{key:"request",value:function(){var e=new BK.HttpUtil(this.url),t="get";switch(this.method){case"POST":t="post",e.setHttpPostData(this.data),e.setBodyCompatible(!1)}for(var n in e.setHttpMethod(t),this.header)"content-type"===n.toLowerCase()?e.setHttpHeader("Content-Type",this.header[n]):e.setHttpHeader(n,this.header[n]);var r=this;e.requestAsync(function(e,t){e.bufferLength();if(200!=t)r.fail({errMsg:" ",statusCode:t,header:{}});else{var n=void 0;if(n="arraybuffer"!=r.dataType?e.readAsString(!0):r.bricksBufferToArrayBuffer(e),"json"==r.dataType)try{n=JSON.parse(n)}catch(e){n=n}r.success({data:n,statusCode:t,header:{}}),r.complete&&r.complete({data:n,statusCode:t,header:{}})}})}},{key:"ab2str",value:function(e){return String.fromCharCode.apply(null,new Uint16Array(e))}},{key:"bricksBufferToArrayBuffer",value:function(e){for(var t=new ArrayBuffer(e.bufferLength()),n=new Uint8Array(t),r=0;r<e.bufferLength();)n[r++]=e.readUint8Buffer();return t}},{key:"uploadFile",value:function(){var e=i.wrapSandBoxPath(this.object.filePath||""),t=this.object.formData||{},n=this.header||{};n["Content-Type"]="multipart/form-data; boundary=a401103119";var r="";for(var a in t)r+="--",r+="a401103119",r+="\r\n",r+='Content-Disposition: form-data; name="',r+=a,r+='"\r\n\r\n',r+=t[a],r+="\r\n";var o=BK.FileUtil.readFile(e);r+="--",r+="a401103119",r+="\r\n",r+='Content-Disposition: form-data; name="',r+=a,r+='"; filename="',r+=this.object.name,r+='"\r\n',r+="Content-Type: application/octet-stream\r\n\r\n";var u="";u+="\r\n",u+="--",u+="a401103119",u+="--\r\n";var l=new BK.Buffer(o.bufferLength()+r.length+u.length+3+3);l.writeStringBuffer(r),l.writeBuffer(o),l.writeStringBuffer(u);var c=new BK.HttpUtil(this.url);for(var f in c.setHttpMethod("post"),n)c.setHttpHeader(f,n[f]);var s=this;c.setBodyCompatible(!1),c.setHttpRawBody(l),c.requestAsync(function(e,t){var n=e.bufferLength();200!=t?s.fail({data:"",statusCode:t,header:{}}):s.success({data:e.readBuffer(n),statusCode:t,header:{}})})}},{key:"downloadFile",value:function(){var e=this.object.filePath||i.extractFilePathFromUrl(this.url);this.relpath=e;var t=i.wrapSandBoxPath(e),n=i.extractFileNameFromUrl(this.url),r=new BK.HttpUtil(this.url);for(var a in this.header)r.setHttpHeader(a,header[a]);r.setHttpMethod("get");var o=this;r.requestAsync(function(e,r){e.bufferLength();if(200!=r)o.fail({data:"",statusCode:r,header:{}});else{var i=-1!=t.indexOf(n)?t:t+n;BK.FileUtil.writeBufferToFile(i,e)||BK.Script.log(1,0,"write download file failed");var a=-1!=o.relpath.indexOf(n)?o.relpath:o.relpath+n;o.success({tempFilePath:a,statusCode:r,header:{}})}})}}]),e}();t.default=a},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0}),t.Stats=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(n(0)),a=l(n(1)),o=n(3),u=n(2);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=function(){function e(){c(this,e)}return r(e,[{key:"readFile",value:function(e){i.default.d(0,0,"readFile, object="+JSON.stringify(e));var t=this;(0,u.setTimeout)(function(){if(e){var n=e.encoding;if("string"==typeof e.filePath){var r=(0,o.wrapLocalUrl)(e.filePath);if(BK.FileUtil.isFileExist(r)||(r=(0,o.wrapSandBoxPath)(e.filePath)),BK.FileUtil.isFileExist(r)){var a=BK.FileUtil.readFile(r),u=void 0,l={data:u=!n||"utf-8"!==n&&"utf8"!==n&&"ascii"!==n&&"latin1"!==n?t.bricksBufferToArrayBuffer(a):a.readAsString()};i.default.d(0,0,"readFile, success, filePath="+e.filePath+", bkFilePath="+r+", data="+u),e.success&&e.success(l)}else{i.default.d(0,0,"readFile failed, file not exist, filePath="+e.filePath+", bkFilePath="+r);l={errMsg:"file not exist"};e.fail&&e.fail(l)}}else{i.default.d(0,0,"readFile failed, invalid filePath, filePath="+e.filePath);l={errMsg:"invalid filePath"};e.fail&&e.fail(l)}e.complete&&e.complete()}else i.default.d(0,0,"readFile failed, no object")},0)}},{key:"readFileSync",value:function(e,t){if(i.default.d(0,0,"readFileSync, filePath="+e+", encoding="+t),"string"==typeof e){var n=(0,o.wrapLocalUrl)(e);if(BK.FileUtil.isFileExist(n)||(n=(0,o.wrapSandBoxPath)(e)),BK.FileUtil.isFileExist(n)){var r=BK.FileUtil.readFile(n);return"utf-8"===t||"utf8"===t||"ascii"===t||"latin1"===t?(i.default.d(0,0,"readFileSync success, string, bkFilePath="+n),r.readAsString()):(i.default.d(0,0,"readFileSync success, ArrayBuffer, bkFilePath="+n),BK.Misc.BKBufferToArrayBuffer(r))}throw new Error("readFileSync:fail, file not exist ${bkFilePath}")}throw new Error("readFileSync:fail, invalid filePath")}},{key:"bricksBufferToArrayBuffer",value:function(e){for(var t=new ArrayBuffer(e.bufferLength()),n=new Uint8Array(t),r=0;r<e.bufferLength();)n[r++]=e.readUint8Buffer();return t}},{key:"writeFile",value:function(e){i.default.d(0,0,"writeFile, object="+JSON.stringify(e)),(0,u.setTimeout)(function(){if(e&&e.filePath&&e.data){if("string"==typeof e.filePath){var t=(0,o.wrapSandBoxPath)(e.filePath);if("string"==typeof e.data)BK.FileUtil.writeFile(t,e.data);else{var n=BK.Misc.arrayBufferToBKBuffer(e.data);BK.FileUtil.writeBufferToFile(t,n)}i.default.d(0,0,"writeFile success, filePath="+e.filePath),e.success&&e.success()}else{e.fail&&e.fail({errMsg:"invalid filePath"})}e.complete&&e.complete()}else i.default.d(0,0,"writeFile failed, no object")},0)}},{key:"writeFileSync",value:function(e,t,n){if(i.default.d(0,0,"writeFileSync, filePath="+e),!e||!t)throw new Error("writeFileSync:fail, invalid param");if("string"!=typeof e)throw new Error("writeFileSync:fail, invalid filePath");var r=(0,o.wrapSandBoxPath)(e);if("string"==typeof t)BK.FileUtil.writeFile(r,t);else{var a=BK.Misc.arrayBufferToBKBuffer(t);BK.FileUtil.writeBufferToFile(r,a)}i.default.d(0,0,"writeFileSync success, filePath="+e)}},{key:"access",value:function(e){i.default.d(0,0,"access, object="+JSON.stringify(e)),(0,u.setTimeout)(function(){var t=BK.FileUtil.isFileExist((0,o.wrapLocalUrl)(e.path));if(t||(t=BK.FileUtil.isFileExist((0,o.wrapSandBoxPath)(e.path))),i.default.d(0,0,"access, path="+e.path+", isFileExist="+t),t)e.success&&e.success();else{e.fail&&e.fail({errMsg:"fail no such file or directory"})}e.complete&&e.complete()},0)}},{key:"accessSync",value:function(e){var t=BK.FileUtil.isFileExist((0,o.wrapLocalUrl)(e));if(t||(t=BK.FileUtil.isFileExist((0,o.wrapSandBoxPath)(e))),i.default.d(0,0,"accessSync, path="+e+", isFileExist="+t),!t)throw new Error("no such file or directory")}},{key:"mkdirSync",value:function(e,t){if(i.default.d(0,0,"mkdirSync, dirPath="+e),"string"!=typeof e)throw new Error("mkdirSync:failed, invalid dirPath");var n=(0,o.wrapSandBoxPath)(e);if(BK.FileUtil.isFileExist(n))throw new Error("mkdirSync:failed, file already exist ${bkFilePath}");if(!BK.FileUtil.makeDir(n))throw new Error("mkdir failed")}},{key:"mkdir",value:function(e){i.default.d(0,0,"mkdir, object="+JSON.stringify(e)),(0,u.setTimeout)(function(){if(e){if("string"==typeof e.dirPath)if(BK.FileUtil.makeDir((0,o.wrapSandBoxPath)(e.dirPath)))e.success&&e.success();else{var t={errMsg:"mkdir failed"};e.fail&&e.fail(t)}else{t={errMsg:"invalid dirPath"};e.fail&&e.fail(t)}e.complete&&e.complete()}else i.default.d(0,0,"mkdir failed, no object")},0)}},{key:"removeSavedFile",value:function(e){(0,u.setTimeout)(function(){if(e){if("string"==typeof e.filePath){var t=(0,o.wrapSandBoxPath)(e.filePath);if(BK.FileUtil.isFileExist(t))if(BK.FileUtil.deleteFile(t))e.success&&e.success(n);else{var n={errMsg:"delete failed"};e.fail&&e.fail(n)}else{n={errMsg:"file not exist"};e.fail&&e.fail(n)}}else{n={errMsg:"invalid filePath"};e.fail&&e.fail(n)}e.complete&&e.complete()}else i.default.d(0,0,"removeSavedFile failed, no object")},0)}},{key:"unlink",value:function(e){(0,u.setTimeout)(function(){if(e){if("string"==typeof e.filePath){var t=(0,o.wrapSandBoxPath)(e.filePath);if(BK.FileUtil.isFileExist(t))if(BK.FileUtil.deleteFile(t))e.success&&e.success();else{var n={errMsg:"fail"};e.fail&&e.fail(n)}else{n={errMsg:"file not exist"};e.fail&&e.fail(n)}}else{n={errMsg:"invalid filePath"};e.fail&&e.fail(n)}e.complete&&e.complete()}else i.default.d(0,0,"unlink failed, no object")},0)}},{key:"unlinkSync",value:function(e){if("string"==typeof e){var t=(0,o.wrapSandBoxPath)(e);if(!BK.FileUtil.isFileExist(t))throw new Error("unlinkSync:fail, file not exist");BK.FileUtil.deleteFile(t)}}},{key:"copyFile",value:function(e){var t=BK.FileUtil.readFile("GameSandBox://"+e.srcPath);BK.FileUtil.writeBufferToFile("GameSandBox://"+e.destPath,t),e.success&&e.success()}},{key:"copyFileSync",value:function(e,t){var n=BK.FileUtil.readFile("GameSandBox://"+object.srcPath);return BK.FileUtil.writeBufferToFile("GameSandBox://"+object.destPath,n)}},{key:"getFileInfo",value:function(e){(0,u.setTimeout)(function(){if(e){if("string"==typeof e.filePath){var t=(0,o.wrapLocalUrl)(e.filePath);if(BK.FileUtil.isFileExist(t)||(t=(0,o.wrapSandBoxPath)(e.filePath)),BK.FileUtil.isFileExist(t)||BK.FileUtil.isFileExist((0,o.wrapSandBoxPath)(e.filePath))){var n=BK.FileUtil.getFileInfo(t)||BK.FileUtil.getFileInfo((0,o.wrapSandBoxPath)(e.filePath));if(n){var r={size:n.size};e.success&&e.success(r)}else{r={errMsg:"getFileInfo failed"};e.fail&&e.fail(r)}}else{r={errMsg:"file not exist"};e.fail&&e.fail(r)}}else{r={errMsg:"invalid filePath"};e.fail&&e.fail(r)}e.complete&&e.complete()}else i.default.d(0,0,"getFileInfo failed, no object")},0)}},{key:"getSavedFileList",value:function(e){}},{key:"rmdir",value:function(e){(0,u.setTimeout)(function(){if(e){if("string"==typeof e.dirPath){var t=(0,o.wrapSandBoxPath)(e.dirPath);if(BK.FileUtil.deleteFile(t))e.success&&e.success(n);else{var n={errMsg:"fail"};e.fail&&e.fail(n)}}else{n={errMsg:"invalid dirPath"};e.fail&&e.fail(n)}e.complete&&e.complete()}else i.default.d(0,0,"rmdir failed, no object")},0)}},{key:"rmdirSync",value:function(e,t){if("string"!=typeof e)throw new Error("rmdirSync:fail, invalid dirPath");var n=(0,o.wrapSandBoxPath)(e);if(!BK.FileUtil.isFileExist(n))throw new Error("rmdirSync:fail, no such file or directory ${dirPath}");if(!BK.FileUtil.deleteFile(n))throw new Error("rmdirSync:fail, ${dirPath}")}},{key:"rename",value:function(e){i.default.d(0,0,"rename not implement yet")}},{key:"renameSync",value:function(e,t){i.default.d(0,0,"renameSync not implement yet")}},{key:"readdir",value:function(e){if(e)if("string"==typeof e.dirPath){var t=void 0;0==e.dirPath.indexOf(a.default.SRC_PRE)||0==e.dirPath.indexOf(a.default.SAND_PRE)?t=e.dirPath:(t=(0,o.wrapSandBoxPath)(e.dirPath),BK.FileUtil.isFileExist(t)||(t=(0,o.wrapLocalUrl)(e.dirPath))),i.default.d(0,0,"readdir dirPath="+e.dirPath+", bkFilePath="+t),BK.FileUtil.isFileExist(t)?BK.FileUtil.getFileList({path:t,needDir:!0},function(t,n){if(0==t){var r=[];if(n&&n.files&&n.files.length>0)for(var i=0;i<n.files.length;i++){var a=n.files[i];r[i]=a.substr(a.lastIndexOf("/")+1)}e.success&&e.success({files:r})}else e.fail&&e.fail({errMsg:"get fileList failed, code:${code}"});e.complete&&e.complete()}):i.default.d(0,0,"readdir bkFilePath="+t+", not exist")}else e.fail&&e.fail({errMsg:"invalid dirPath"}),e.complete&&e.complete();else i.default.d(0,0,"readdir failed, no object")}},{key:"readdirSync",value:function(e){if("string"==typeof e){var t=void 0;0==e.indexOf(a.default.SRC_PRE)||0==e.indexOf(a.default.SAND_PRE)?t=e:(t=(0,o.wrapSandBoxPath)(e),BK.FileUtil.isFileExist(t)||(t=(0,o.wrapLocalUrl)(e))),i.default.d(0,0,"readdirSync dirPath="+e+", bkFilePath="+t);var n=[];return BK.FileUtil.isFileExist(t)?BK.FileUtil.getFileList({path:t,needDir:!0},function(e,r){if(i.default.d(0,0,"readdirSync bkFilePath="+t+", code="+e),0==e&&r&&r.files&&r.files.length>0)for(var a=0;a<r.files.length;a++){var o=r.files[a];n[a]=o.substr(o.lastIndexOf("/")+1)}}):i.default.d(0,0,"readdirSync bkFilePath="+t+", not exist"),n}throw new Error("readdirSync failed, invalid dirPath")}},{key:"saveFile",value:function(e){i.default.d(0,0,"saveFile not implement yet")}},{key:"saveFileSync",value:function(e,t){i.default.d(0,0,"saveFileSync not implement yet")}},{key:"stat",value:function(e){(0,u.setTimeout)(function(){if(e){if("string"==typeof e.path){var t=(0,o.wrapLocalUrl)(e.path);if(BK.FileUtil.isFileExist(t)||(t=(0,o.wrapSandBoxPath)(e.path)),BK.FileUtil.isFileExist(t)){var n=BK.FileUtil.getFileInfo(t);if(n){var r={stat:new s(e.path,0,n.size,n.atime,n.mtime)};e.success&&e.success(r)}else{r={errMsg:"get file info failed"};e.fail&&e.fail(r)}}else{r={errMsg:"file not exist"};e.fail&&e.fail(r)}}else{r={errMsg:"no path"};e.fail&&e.fail(r)}e.complete&&e.complete()}else i.default.d(0,0,"stat failed, no param")},0)}},{key:"statSync",value:function(e){if("string"==typeof e){var t=(0,o.wrapLocalUrl)(e);if(BK.FileUtil.isFileExist(t)||(t=(0,o.wrapSandBoxPath)(e)),BK.FileUtil.isFileExist(t)){var n=BK.FileUtil.getFileInfo(t);if(n)return new s(e,0,n.size,n.atime,n.mtime)}else i.default.d(0,0,"statSync failed, file not exist, file:"+t)}}},{key:"unzip",value:function(e){(0,u.setTimeout)(function(){if(e){if("string"==typeof e.zipFilePath&&"string"==typeof e.targetPath)if(BK.FileUtil.unzip(e.zipFilePath,e.targetPath))e.success&&e.success();else{var t={errMsg:"unzip failed"};e.fail&&e.fail(t)}else{t={errMsg:"invalid path"};e.fail&&e.fail(t)}e.complete&&e.complete()}else i.default.d(0,0,"unzip failed, no object")},0)}}]),e}();t.default=f;var s=t.Stats=function(){function e(t,n,r,i,a){c(this,e),this.path=t,this.mode=n,this.size=r,this.lastAccessedTime=i,this.lastModifiedTime=a,this.isDir=BK.FileUtil.isDirectory(t)}return r(e,[{key:"isFile",value:function(){return!this.isDir}},{key:"isDirectory",value:function(){return this.isDir}}]),e}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(u(n(1)),u(n(0))),a=n(3),o=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var l=new WeakMap,c=new WeakMap,f=new WeakMap,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._event={},c.set(this,""),f.set(this,!1)}return r(e,[{key:"removeEventListener",value:function(e,t){this._event[e]||(this._event[e]=[]);var n=this._event[e].indexOf(t);this._event[e].splice(n,1)}},{key:"addEventListener",value:function(e,t,n){this._event[e]||(this._event[e]=[]),this._event[e].push(t),n&&n.capture&&console.warn("EventTarget.addEventListener: options.capture is not implemented."),n&&n.once,n&&n.passive&&console.warn("EventTarget.addEventListener: options.passive is not implemented.")}},{key:"dispatchEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._event[e.type];if(void 0!==t)for(var n=0;n<t.length;n++)t[n]&&t[n](e)}},{key:"play",value:function(){var e=c.get(this),t=f.get(this);if(i.default.d(0,0,"InnerAudioContext play: "+e+", loop="+t),void 0!==e){var n=this;if(void 0===l.get(this)){var r=(0,a.getAudioPath)(e);if((0,a.isRemoteUrl)(e)){if(!BK.FileUtil.isFileExist(r)){var o=r;i.default.d(0,0,"InnerAudioContext, not downloaded:"+e+", path:"+o);var u=new BK.HttpUtil(e);return u.setHttpMethod("get"),void u.requestAsync(function(e,a){(i.default.d(0,0,"InnerAudioContext, download audio over"),200==a)?BK.FileUtil.writeBufferToFile(o,e)?(l.set(n,n.createContext(r,t)),void 0!==l.get(n)&&(l.get(n).startMusic(function(){n.onEndedCallback&&n.onEndedCallback()}),n.onPlayCallback&&n.onPlayCallback())):i.default.d(0,0,"InnerAudioContext, save audio failed"):i.default.d(0,0,"InnerAudioContext, download audio failed:"+a+", url="+url)})}i.default.d(0,0,"InnerAudioContext, downloaded:"+e),l.set(this,this.createContext(r,t))}else l.set(this,this.createContext(r,t))}void 0!==l.get(this)&&(l.get(this).isParsed?l.get(this).resumeMusic():(l.get(this).startMusic(function(){n.onEndedCallback&&n.onEndedCallback()}),n.onPlayCallback&&n.onPlayCallback()))}else i.default.d(0,0,"no src value")}},{key:"createContext",value:function(e,t){return new BK.Audio(t?0:1,e,t?-1:1)}},{key:"pause",value:function(){if(i.default.d(0,0,"InnerAudioContext pause: "+c.get(this)),void 0!==l.get(this)){l.get(this).pauseMusic(),l.get(this).isParsed=!0,this.onPauseCallback&&this.onPauseCallback()}}},{key:"stop",value:function(){if(i.default.d(0,0,"InnerAudioContext stop: "+c.get(this)),void 0!==l.get(this)){l.get(this).stopMusic(),this.onStopCallback&&this.onStopCallback()}}},{key:"seek",value:function(e){var t=l.get(this);t&&t.seek?(t.seek(1e3*e),this.dispatchEvent({target:this,type:"seeked"})):i.default.d(1,0,"InnerAudioContext seek not implement yet")}},{key:"onCanplay",value:function(e){this.onCanplayCallback=e}},{key:"offCanplay",value:function(e){this.onCanplayCallback=void 0}},{key:"onPlay",value:function(e){this.onPlayCallback=e}},{key:"offPlay",value:function(e){this.onPlayCallback=void 0}},{key:"onPause",value:function(e){this.onPauseCallback=e}},{key:"offPause",value:function(e){this.onPauseCallback=void 0}},{key:"onStop",value:function(e){this.onStopCallback=e}},{key:"offStop",value:function(e){this.onStopCallback=void 0}},{key:"onEnded",value:function(e){this.onEndedCallback=e}},{key:"offEnded",value:function(e){this.onEndedCallback=void 0}},{key:"onError",value:function(e){this.onErrorCallback=e}},{key:"offError",value:function(e){this.onErrorCallback=void 0}},{key:"onTimeUpdate",value:function(e){this.onTimeUpdateCallback=e}},{key:"offTimeUpdate",value:function(e){this.onTimeUpdateCallback=void 0}},{key:"onWaiting",value:function(e){this.onWaitingCallback=e}},{key:"offWaiting",value:function(e){this.onWaitingCallback=void 0}},{key:"onSeeking",value:function(e){this.addEventListener("seeking",e),this.onSeekingCallback=e}},{key:"offSeeking",value:function(e){this.removeEventListener("seeking",e),this.onSeekingCallback=void 0}},{key:"onSeeked",value:function(e){this.addEventListener("seeked",e),this.onSeekedCallback=e}},{key:"offSeeked",value:function(e){this.removeEventListener("seeked",e),this.onSeekedCallback=void 0}},{key:"src",get:function(){return c.get(this)},set:function(e){c.set(this,e);var t=this;(0,o.setTimeout)(function(){i.default.d(0,0,"InnerAudioContext onCanplayCallback"),t.onCanplayCallback&&t.onCanplayCallback()},0)}},{key:"loop",get:function(){return f.get(this)},set:function(e){f.set(this,e)}}]),e}();t.default=s},function(e,t,n){;!function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<e.length;r++)n[e.charCodeAt(r)]=r;t.encode=function(t){var n,r=new Uint8Array(t),i=r.length,a="";for(n=0;n<i;n+=3)a+=e[r[n]>>2],a+=e[(3&r[n])<<4|r[n+1]>>4],a+=e[(15&r[n+1])<<2|r[n+2]>>6],a+=e[63&r[n+2]];return i%3==2?a=a.substring(0,a.length-1)+"=":i%3==1&&(a=a.substring(0,a.length-2)+"=="),a},t.decode=function(e){var t,r,i,a,o,u=.75*e.length,l=e.length,c=0;"="===e[e.length-1]&&(u--,"="===e[e.length-2]&&u--);var f=new ArrayBuffer(u),s=new Uint8Array(f);for(t=0;t<l;t+=4)r=n[e.charCodeAt(t)],i=n[e.charCodeAt(t+1)],a=n[e.charCodeAt(t+2)],o=n[e.charCodeAt(t+3)],s[c++]=r<<2|i>>4,s[c++]=(15&i)<<4|a>>2,s[c++]=(3&a)<<6|63&o;return f}}()},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(u(n(0)),u(n(1)),n(3)),a=n(2),o=n(25);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=0,this.height=0,this.tmpSrc="",this._event={},this.bkLocalPath=""}return r(e,[{key:"removeEventListener",value:function(e,t){this._event[e]||(this._event[e]=[]);var n=this._event[e].indexOf(t);this._event[e].splice(n,1)}},{key:"addEventListener",value:function(e,t,n){this._event[e]||(this._event[e]=[]),this._event[e].push(t),n&&n.capture&&console.warn("EventTarget.addEventListener: options.capture is not implemented."),n&&n.once,n&&n.passive&&console.warn("EventTarget.addEventListener: options.passive is not implemented.")}},{key:"dispatchEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._event[e.type];if(void 0!==t)for(var n=0;n<t.length;n++)t[n]&&t[n](e)}},{key:"handleImgUrl",value:function(){var e=this.tmpSrc,t=this.bkLocalPath;"string"==typeof e?(0,i.isRemoteUrl)(e)?BK.FileUtil.isFileExist(t)?this.createImgObj(t):this.loadImg():this.createImgObj(t):this.dispatchEvent({type:"error"})}},{key:"handleB64data",value:function(e){var t=BK.Misc.arrayBufferToBKBuffer(e);this.createImgObj(t)}},{key:"loadImg",value:function(){var e=this,t=e.tmpSrc,n=e.bkLocalPath,r=new BK.HttpUtil(t);r.setHttpMethod("get"),r.requestAsync(function(t,r){200==r?BK.FileUtil.writeBufferToFile(n,t)?e.createImgObj(n):e.dispatchEvent({type:"error"}):e.dispatchEvent({type:"error"})})}},{key:"createImgObj",value:function(e){var t=BK.Image.loadImage(e),n=this;void 0!==t?(this.loaded=!0,this._bknode=t,this.__nativeObj=t,this.naturalWidth=t.width,this.naturalHeight=t.height,this.width=t.width,this.height=t.height,this.type="arraybuffer",this.source=this.src,0===this.width&&0===this.height&&(this.width=t.width,this.height=t.height),(0,a.setTimeout)(function(){n.dispatchEvent({target:n,type:"load"})},0)):(0,a.setTimeout)(function(){n.dispatchEvent({type:"error",target:n})},0)}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"src",get:function(){return this.bkLocalPath},set:function(e){if(e.includes(":image")){var t=(0,o.decode)(e.substr(e.lastIndexOf("base64")+7));this.handleB64data(t)}else{var n=(0,i.getImgPath)(e);n!==this.bkLocalPath&&(this.bkLocalPath=n,this.tmpSrc=e,this.handleImgUrl())}}},{key:"data",get:function(){return this._data},set:function(e){this._data=e}},{key:"source",get:function(){return this._source},set:function(e){this._source=e}},{key:"onload",set:function(e){if(e){this.addEventListener("load",e,{once:!0});this.loaded&&e({once:!0})}}},{key:"onerror",set:function(e){this.addEventListener("error",e,{once:!0})}}]),e}();t.default=l},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r,i,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(){return r||((r=new BK.WebGL).id=0,r.DEPTH_BUFFER_BIT=256,r.STENCIL_BUFFER_BIT=1024,r.COLOR_BUFFER_BIT=16384,r.POINTS=0,r.LINES=1,r.LINE_LOOP=2,r.LINE_STRIP=3,r.TRIANGLES=4,r.TRIANGLE_STRIP=5,r.TRIANGLE_FAN=6,r.ZERO=0,r.ONE=1,r.SRC_COLOR=768,r.ONE_MINUS_SRC_COLOR=769,r.SRC_ALPHA=770,r.ONE_MINUS_SRC_ALPHA=771,r.DST_ALPHA=772,r.ONE_MINUS_DST_ALPHA=773,r.DST_COLOR=774,r.ONE_MINUS_DST_COLOR=775,r.SRC_ALPHA_SATURATE=776,r.FUNC_ADD=32774,r.BLEND_EQUATION=32777,r.BLEND_EQUATION_RGB=32777,r.BLEND_EQUATION_ALPHA=34877,r.FUNC_SUBTRACT=32778,r.FUNC_REVERSE_SUBTRACT=32779,r.BLEND_DST_RGB=32968,r.BLEND_SRC_RGB=32969,r.BLEND_DST_ALPHA=32970,r.BLEND_SRC_ALPHA=32971,r.CONSTANT_COLOR=32769,r.ONE_MINUS_CONSTANT_COLOR=32770,r.CONSTANT_ALPHA=32771,r.ONE_MINUS_CONSTANT_ALPHA=32772,r.BLEND_COLOR=32773,r.ARRAY_BUFFER=34962,r.ELEMENT_ARRAY_BUFFER=34963,r.ARRAY_BUFFER_BINDING=34964,r.ELEMENT_ARRAY_BUFFER_BINDING=34965,r.STREAM_DRAW=35040,r.STATIC_DRAW=35044,r.DYNAMIC_DRAW=35048,r.BUFFER_SIZE=34660,r.BUFFER_USAGE=34661,r.CURRENT_VERTEX_ATTRIB=34342,r.FRONT=1028,r.BACK=1029,r.FRONT_AND_BACK=1032,r.CULL_FACE=2884,r.BLEND=3042,r.DITHER=3024,r.STENCIL_TEST=2960,r.DEPTH_TEST=2929,r.SCISSOR_TEST=3089,r.POLYGON_OFFSET_FILL=32823,r.SAMPLE_ALPHA_TO_COVERAGE=32926,r.SAMPLE_COVERAGE=32928,r.NO_ERROR=0,r.INVALID_ENUM=1280,r.INVALID_VALUE=1281,r.INVALID_OPERATION=1282,r.OUT_OF_MEMORY=1285,r.CW=2304,r.CCW=2305,r.LINE_WIDTH=2849,r.ALIASED_POINT_SIZE_RANGE=33901,r.ALIASED_LINE_WIDTH_RANGE=33902,r.CULL_FACE_MODE=2885,r.FRONT_FACE=2886,r.DEPTH_RANGE=2928,r.DEPTH_WRITEMASK=2930,r.DEPTH_CLEAR_VALUE=2931,r.DEPTH_FUNC=2932,r.STENCIL_CLEAR_VALUE=2961,r.STENCIL_FUNC=2962,r.STENCIL_FAIL=2964,r.STENCIL_PASS_DEPTH_FAIL=2965,r.STENCIL_PASS_DEPTH_PASS=2966,r.STENCIL_REF=2967,r.STENCIL_VALUE_MASK=2963,r.STENCIL_WRITEMASK=2968,r.STENCIL_BACK_FUNC=34816,r.STENCIL_BACK_FAIL=34817,r.STENCIL_BACK_PASS_DEPTH_FAIL=34818,r.STENCIL_BACK_PASS_DEPTH_PASS=34819,r.STENCIL_BACK_REF=36003,r.STENCIL_BACK_VALUE_MASK=36004,r.STENCIL_BACK_WRITEMASK=36005,r.VIEWPORT=2978,r.SCISSOR_BOX=3088,r.COLOR_CLEAR_VALUE=3106,r.COLOR_WRITEMASK=3107,r.UNPACK_ALIGNMENT=3317,r.PACK_ALIGNMENT=3333,r.MAX_TEXTURE_SIZE=3379,r.MAX_VIEWPORT_DIMS=3386,r.SUBPIXEL_BITS=3408,r.RED_BITS=3410,r.GREEN_BITS=3411,r.BLUE_BITS=3412,r.ALPHA_BITS=3413,r.DEPTH_BITS=3414,r.STENCIL_BITS=3415,r.POLYGON_OFFSET_UNITS=10752,r.POLYGON_OFFSET_FACTOR=32824,r.TEXTURE_BINDING_2D=32873,r.SAMPLE_BUFFERS=32936,r.SAMPLES=32937,r.SAMPLE_COVERAGE_VALUE=32938,r.SAMPLE_COVERAGE_INVERT=32939,r.COMPRESSED_TEXTURE_FORMATS=34467,r.DONT_CARE=4352,r.FASTEST=4353,r.NICEST=4354,r.GENERATE_MIPMAP_HINT=33170,r.BYTE=5120,r.UNSIGNED_BYTE=5121,r.SHORT=5122,r.UNSIGNED_SHORT=5123,r.INT=5124,r.UNSIGNED_INT=5125,r.FLOAT=5126,r.DEPTH_COMPONENT=6402,r.ALPHA=6406,r.RGB=6407,r.RGBA=6408,r.LUMINANCE=6409,r.LUMINANCE_ALPHA=6410,r.UNSIGNED_SHORT_4_4_4_4=32819,r.UNSIGNED_SHORT_5_5_5_1=32820,r.UNSIGNED_SHORT_5_6_5=33635,r.FRAGMENT_SHADER=35632,r.VERTEX_SHADER=35633,r.MAX_VERTEX_ATTRIBS=34921,r.MAX_VERTEX_UNIFORM_VECTORS=36347,r.MAX_VARYING_VECTORS=36348,r.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,r.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,r.MAX_TEXTURE_IMAGE_UNITS=34930,r.MAX_FRAGMENT_UNIFORM_VECTORS=36349,r.SHADER_TYPE=35663,r.DELETE_STATUS=35712,r.LINK_STATUS=35714,r.VALIDATE_STATUS=35715,r.ATTACHED_SHADERS=35717,r.ACTIVE_UNIFORMS=35718,r.ACTIVE_ATTRIBUTES=35721,r.SHADING_LANGUAGE_VERSION=35724,r.CURRENT_PROGRAM=35725,r.NEVER=512,r.LESS=513,r.EQUAL=514,r.LEQUAL=515,r.GREATER=516,r.NOTEQUAL=517,r.GEQUAL=518,r.ALWAYS=519,r.KEEP=7680,r.REPLACE=7681,r.INCR=7682,r.DECR=7683,r.INVERT=5386,r.INCR_WRAP=34055,r.DECR_WRAP=34056,r.VENDOR=7936,r.RENDERER=7937,r.VERSION=7938,r.NEAREST=9728,r.LINEAR=9729,r.NEAREST_MIPMAP_NEAREST=9984,r.LINEAR_MIPMAP_NEAREST=9985,r.NEAREST_MIPMAP_LINEAR=9986,r.LINEAR_MIPMAP_LINEAR=9987,r.TEXTURE_MAG_FILTER=10240,r.TEXTURE_MIN_FILTER=10241,r.TEXTURE_WRAP_S=10242,r.TEXTURE_WRAP_T=10243,r.TEXTURE_2D=3553,r.TEXTURE=5890,r.TEXTURE_CUBE_MAP=34067,r.TEXTURE_BINDING_CUBE_MAP=34068,r.TEXTURE_CUBE_MAP_POSITIVE_X=34069,r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,r.MAX_CUBE_MAP_TEXTURE_SIZE=34076,r.TEXTURE0=33984,r.TEXTURE1=33985,r.TEXTURE2=33986,r.TEXTURE3=33987,r.TEXTURE4=33988,r.TEXTURE5=33989,r.TEXTURE6=33990,r.TEXTURE7=33991,r.TEXTURE8=33992,r.TEXTURE9=33993,r.TEXTURE10=33994,r.TEXTURE11=33995,r.TEXTURE12=33996,r.TEXTURE13=33997,r.TEXTURE14=33998,r.TEXTURE15=33999,r.TEXTURE16=34e3,r.TEXTURE17=34001,r.TEXTURE18=34002,r.TEXTURE19=34003,r.TEXTURE20=34004,r.TEXTURE21=34005,r.TEXTURE22=34006,r.TEXTURE23=34007,r.TEXTURE24=34008,r.TEXTURE25=34009,r.TEXTURE26=34010,r.TEXTURE27=34011,r.TEXTURE28=34012,r.TEXTURE29=34013,r.TEXTURE30=34014,r.TEXTURE31=34015,r.ACTIVE_TEXTURE=34016,r.REPEAT=10497,r.CLAMP_TO_EDGE=33071,r.MIRRORED_REPEAT=33648,r.FLOAT_VEC2=35664,r.FLOAT_VEC3=35665,r.FLOAT_VEC4=35666,r.INT_VEC2=35667,r.INT_VEC3=35668,r.INT_VEC4=35669,r.BOOL=35670,r.BOOL_VEC2=35671,r.BOOL_VEC3=35672,r.BOOL_VEC4=35673,r.FLOAT_MAT2=35674,r.FLOAT_MAT3=35675,r.FLOAT_MAT4=35676,r.SAMPLER_2D=35678,r.SAMPLER_CUBE=35680,r.VERTEX_ATTRIB_ARRAY_ENABLED=34338,r.VERTEX_ATTRIB_ARRAY_SIZE=34339,r.VERTEX_ATTRIB_ARRAY_STRIDE=34340,r.VERTEX_ATTRIB_ARRAY_TYPE=34341,r.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,r.VERTEX_ATTRIB_ARRAY_POINTER=34373,r.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,r.IMPLEMENTATION_COLOR_READ_TYPE=35738,r.IMPLEMENTATION_COLOR_READ_FORMAT=35739,r.COMPILE_STATUS=35713,r.LOW_FLOAT=36336,r.MEDIUM_FLOAT=36337,r.HIGH_FLOAT=36338,r.LOW_INT=36339,r.MEDIUM_INT=36340,r.HIGH_INT=36341,r.FRAMEBUFFER=36160,r.RENDERBUFFER=36161,r.RGBA4=32854,r.RGB5_A1=32855,r.RGB565=36194,r.DEPTH_COMPONENT16=33189,r.STENCIL_INDEX8=36168,r.DEPTH_STENCIL=34041,r.RENDERBUFFER_WIDTH=36162,r.RENDERBUFFER_HEIGHT=36163,r.RENDERBUFFER_INTERNAL_FORMAT=36164,r.RENDERBUFFER_RED_SIZE=36176,r.RENDERBUFFER_GREEN_SIZE=36177,r.RENDERBUFFER_BLUE_SIZE=36178,r.RENDERBUFFER_ALPHA_SIZE=36179,r.RENDERBUFFER_DEPTH_SIZE=36180,r.RENDERBUFFER_STENCIL_SIZE=36181,r.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,r.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,r.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,r.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,r.COLOR_ATTACHMENT0=36064,r.DEPTH_ATTACHMENT=36096,r.STENCIL_ATTACHMENT=36128,r.DEPTH_STENCIL_ATTACHMENT=33306,r.NONE=0,r.FRAMEBUFFER_COMPLETE=36053,r.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,r.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,r.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,r.FRAMEBUFFER_UNSUPPORTED=36061,r.FRAMEBUFFER_BINDING=36006,r.RENDERBUFFER_BINDING=36007,r.MAX_RENDERBUFFER_SIZE=34024,r.INVALID_FRAMEBUFFER_OPERATION=1286,r.UNPACK_FLIP_Y_WEBGL=37440,r.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,r.CONTEXT_LOST_WEBGL=37442,r.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,r.BROWSER_DEFAULT_WEBGL=37444,r.SHADER_BINARY_FORMATS=36344,r.NUM_SHADER_BINARY_FORMATS=36345,r.NUM_COMPRESSED_TEXTURE_FORMATS=34466,r.activeTexture=f,r.attachShader=s,r.bindAttribLocation=d,r.bindBuffer=h,r.bindFramebuffer=p,r.bindRenderbuffer=g,r.bindTexture=m,r.blendColor=v,r.blendEquation=E,r.blendEquationSeparate=y,r.blendFunc=b,r.blendFuncSeparate=_,r.bufferData=S,r.bufferData=S,r.bufferSubData=T,r.checkFramebufferStatus=A,r.clear=w,r.clearColor=k,r.clearDepth=C,r.clearStencil=N,r.colorMask=I,r.compileShader=R,r.compressedTexImage2D=B,r.compressedTexSubImage2D=P,r.copyTexImage2D=O,r.copyTexSubImage2D=F,r.createBuffer=M,r.createFramebuffer=U,r.createProgram=L,r.createRenderbuffer=x,r.createShader=D,r.createTexture=K,r.cullFace=G,r.deleteBuffer=V,r.deleteFramebuffer=j,r.deleteProgram=H,r.deleteRenderbuffer=X,r.deleteShader=W,r.deleteTexture=z,r.depthFunc=q,r.depthMask=Y,r.depthRange=Q,r.detachShader=$,r.disable=J,r.disableVertexAttribArray=Z,r.drawArrays=ee,r.drawElements=te,r.enable=ne,r.enableVertexAttribArray=re,r.finish=ie,r.flush=ae,r.framebufferRenderbuffer=oe,r.framebufferTexture2D=ue,r.frontFace=le,r.generateMipmap=ce,r.getAttribLocation=fe,r.getError=se,r.getProgramInfoLog=he,r.getShaderInfoLog=pe,r.getShaderSource=ge,r.getUniformLocation=me,r.getVertexAttribOffset=ve,r.hint=Ee,r.isBuffer=ye,r.isEnabled=be,r.isFramebuffer=_e,r.isProgram=Se,r.isRenderbuffer=Te,r.isShader=Ae,r.isTexture=we,r.lineWidth=ke,r.linkProgram=Ce,r.pixelStorei=Ne,r.polygonOffset=Ie,r.readPixels=Re,r.renderbufferStorage=Be,r.sampleCoverage=Pe,r.scissor=Oe,r.shaderSource=Fe,r.stencilFunc=Me,r.stencilFuncSeparate=Ue,r.stencilMask=Le,r.stencilMaskSeparate=xe,r.stencilOp=De,r.stencilOpSeparate=Ke,r.texImage2D=Ge,r.texSubImage2D=He,r.texParameterf=Ve,r.texParameteri=je,r.uniform1f=Xe,r.uniform2f=We,r.uniform3f=ze,r.uniform4f=qe,r.uniform1i=Ye,r.uniform2i=Qe,r.uniform3i=$e,r.uniform4i=Je,r.uniform1fv=Ze,r.uniform2fv=et,r.uniform3fv=tt,r.uniform4fv=nt,r.uniform1iv=rt,r.uniform2iv=it,r.uniform3iv=at,r.uniform4iv=ot,r.uniformMatrix2fv=ut,r.uniformMatrix3fv=lt,r.uniformMatrix4fv=ct,r.useProgram=ft,r.validateProgram=st,r.vertexAttrib1f=dt,r.vertexAttrib2f=ht,r.vertexAttrib3f=pt,r.vertexAttrib4f=gt,r.vertexAttrib1fv=mt,r.vertexAttrib2fv=vt,r.vertexAttrib3fv=Et,r.vertexAttrib4fv=yt,r.vertexAttribPointer=bt,r.viewport=_t,r.getActiveAttrib=St,r.getActiveUniform=Tt,r.getAttachedShaders=At,r.getBufferParameter=wt,r.getFramebufferAttachmentParameter=kt,r.getProgramParameter=Ct,r.getRenderbufferParameter=Nt,r.getShaderParameter=It,r.getTexParameter=Rt,r.getVertexAttrib=Bt,r.getParameter=Ot,r.getUniform=Pt,r.getShaderPrecisionFormat=de,r.getExtension=function(){return null},r.getSupportedExtensions=function(){return[]},r.getContextAttributes=function(){return{alpha:!0,antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!1,powerPreference:"default",premultipliedAlpha:!0,preserveDrawingBuffer:!1,stencil:!0}},r.isContextLost=function(){return!1},r.isContextLost=function(){return!1},r.OpenOptMode=yr,r.viewport(0,0,BK.Director.screenPixelSize.width,BK.Director.screenPixelSize.height)),Object.prototype.hasOwnProperty.call(GameGlobal,"renderTicker")&&renderTicker.setTickerCallBack(function(e,t){}),r}function u(e){if(Object.prototype.hasOwnProperty.call(e,"__rawBKData"))return e.__rawBKData;if(Object.prototype.hasOwnProperty.call(e,"__nativeObj"))return e.__nativeObj;if(0==function(){if(void 0==i){"android"==GameStatusInfo.platform&&(i=!0);var e=BK.Director.queryDeviceInfo(),t=e.version.split(".");"ios"==e.platform&&Number(t[0])>=10||"android"==e.platform?i=!0:(BK.Script.log(1,0,"Current Device dont supoort TypedArray.[info = "+JSON.stringify(e)+"]"),i=!1)}return i}()){if(e instanceof Int8Array==1){for(var t=new BK.Buffer(e.byteLength,!1),n=0;n<e.length;n++)t.writeInt8Buffer(e[n]);return t}if(e instanceof Uint8Array==1){for(t=new BK.Buffer(e.byteLength,!1),n=0;n<e.length;n++)t.writeUint8Buffer(e[n]);return t}if(e instanceof Int16Array==1){for(t=new BK.Buffer(e.byteLength,!1),n=0;n<e.length;n++)t.writeInt16Buffer(e[n]);return t}if(e instanceof Uint16Array==1){for(t=new BK.Buffer(e.byteLength,!1),n=0;n<e.length;n++)t.writeUint16Buffer(e[n]);return t}if(e instanceof Int32Array==1){for(t=new BK.Buffer(e.byteLength,!1),n=0;n<e.length;n++)t.writeInt32Buffer(e[n]);return t}if(e instanceof Uint32Array==1){for(t=new BK.Buffer(e.byteLength,!1),n=0;n<e.length;n++)t.writeUint32Buffer(e[n]);return t}if(e instanceof Float32Array==1){for(t=new BK.Buffer(e.byteLength,!1),n=0;n<e.length;n++)t.writeFloatBuffer(e[n]);return t}if(e instanceof ArrayBuffer==1){t=new BK.Buffer(e.byteLength,!1);var r=new DataView(e);for(n=0;n<e.byteLength;n++)t.writeUint8Buffer(r.getUint8(n));return t}}return e}var l=!1;function c(){0==l&&(BK.MQQ.SsoRequest.send({},"cs.first_frame_drawn.local"),l=!0)}function f(e){r.glActiveTexture(e)}function s(e,t){r.glAttachShader(e,t)}function d(e,t,n){r.glBindAttribLocation(e,t,n)}function h(e,t){r.glBindBuffer(e,t)}function p(e,t){r.glBindFramebuffer(e,t)}function g(e,t){r.glBindRenderbuffer(e,t)}function m(e,t){r.glBindTexture(e,t)}function v(e,t,n,i){r.glBlendColor(e,t,n,i)}function E(e){r.glBlendEquation(e)}function y(e,t){r.glBlendEquationSeparate(e,t)}function b(e,t){r.glBlendFunc(e,t)}function _(e,t,n,i){r.glBlendFuncSeparate(e,t,n,i)}function S(e,t,n){r.glBufferData(e,t,n)}function S(e,t,n){r.glBufferData(e,u(t),n)}function T(e,t,n){r.glBufferSubData(e,t,u(n))}function A(e){return r.glCheckFramebufferStatus(e)}function w(e){r.glClear(e)}function k(e,t,n,i){r.glClearColor(e,t,n,i)}function C(e){r.glClearDepth(e)}function N(e){r.glClearStencil(e)}function I(e,t,n,i){r.glColorMask(e,t,n,i)}function R(e){r.glCompileShader(e)}function B(e,t,n,i,a,o,u){r.glCompressedTexImage2D(e,t,n,i,a,o,u)}function P(e,t,n,i,a,o,u,l){r.glCompressedTexSubImage2D(e,t,n,i,a,o,u,l)}function O(e,t,n,i,a,o,u,l){r.glCopyTexImage2D(e,t,n,i,a,o,u,l)}function F(e,t,n,i,a,o,u,l){r.glCopyTexSubImage2D(e,t,n,i,a,o,u,l)}function M(){return r.glCreateBuffer()}function U(){return r.glCreateFramebuffer()}function L(){return r.glCreateProgram()}function x(){return r.glCreateRenderbuffer()}function D(e){return r.glCreateShader(e)}function K(){return r.glCreateTexture()}function G(e){r.glCullFace(e)}function V(e){r.glDeleteBuffer(e)}function j(e){r.glDeleteFramebuffer(e)}function H(e){r.glDeleteProgram(e)}function X(e){r.glDeleteRenderbuffer(e)}function W(e){r.glDeleteShader(e)}function z(e){r.glDeleteTexture(e)}function q(e){r.glDepthFunc(e)}function Y(e){r.glDepthMask(e)}function Q(e,t){r.glDepthRange(e,t)}function $(e,t){r.glDetachShader(e,t)}function J(e){r.glDisable(e)}function Z(e){r.glDisableVertexAttribArray(e)}function ee(e,t,n){r.glDrawArrays(e,t,n),n>0&&c()}function te(e,t,n,i){r.glDrawElements(e,t,n,i),t>0&&c()}function ne(e){r.glEnable(e)}function re(e){r.glEnableVertexAttribArray(e)}function ie(){r.glFinish()}function ae(){r.glFlush()}function oe(e,t,n,i){r.glFramebufferRenderbuffer(e,t,n,i)}function ue(e,t,n,i,a){r.glFramebufferTexture2D(e,t,n,i,a)}function le(e){r.glFrontFace(e)}function ce(e){r.glGenerateMipmap(e)}function fe(e,t){return r.glGetAttribLocation(e,t)}function se(){return r.glGetError()}function de(e,t){return r.glGetShaderPrecisionFormat(e,t)}function he(e){return r.glGetProgramInfoLog(e)}function pe(e){return r.glGetShaderInfoLog(e)}function ge(e){return r.glGetShaderSource(e)}function me(e,t){return r.glGetUniformLocation(e,t)}function ve(e,t){return r.glGetVertexAttribOffset(e,t)}function Ee(e,t){r.glHint(e,t)}function ye(e){return r.glIsBuffer(e)}function be(e){return r.glIsEnabled(e)}function _e(e){return r.glIsFramebuffer(e)}function Se(e){return r.glIsProgram(e)}function Te(e){return r.glIsRenderbuffer(e)}function Ae(e){return r.glIsShader(e)}function we(e){return r.glIsTexture(e)}function ke(e){r.glLineWidth(e)}function Ce(e){r.glLinkProgram(e)}function Ne(e,t){r.glPixelStorei(e,t)}function Ie(e,t){r.glPolygonOffset(e,t)}function Re(e,t,n,i,a,o,u){r.glReadPixels(e,t,n,i,a,o,u)}function Be(e,t,n,i){r.glRenderbufferStorage(e,t,n,i)}function Pe(e,t){r.glSampleCoverage(e,t)}function Oe(e,t,n,i){r.glScissor(e,t,n,i)}function Fe(e,t){r.glShaderSource(e,t)}function Me(e,t,n){r.glStencilFunc(e,t,n)}function Ue(e,t,n,i){r.glStencilFuncSeparate(e,t,n,i)}function Le(e){r.glStencilMask(e)}function xe(e,t){r.glStencilMaskSeparate(e,t)}function De(e,t,n){r.glStencilOp(e,t,n)}function Ke(e,t,n,i){r.glStencilOpSeparate(e,t,n,i)}function Ge(e,t,n){switch(arguments.length){case 6:var i=arguments[3],a=arguments[4],o=arguments[5];Object.prototype.hasOwnProperty.call(o,"__nativeObj")?r.glTexImage2D(e,t,n,i,a,o.__nativeObj):o.bkImage?r.glTexImage2D(e,t,n,i,a,o.bkImage):r.glTexImage2D(e,t,n,i,a,o);break;case 9:var u=arguments[3],l=arguments[4],c=arguments[5],f=(i=arguments[6],a=arguments[7],arguments[8]);r.glTexImage2D(e,t,n,u,l,c,i,a,f)}}function Ve(e,t,n){r.glTexParameterf(e,t,n)}function je(e,t,n){r.glTexParameteri(e,t,n)}function He(e,t,n,i){switch(arguments.length){case 7:var a=arguments[4],o=arguments[5],u=arguments[6];Object.prototype.hasOwnProperty.call(u,"__nativeObj")?r.glTexSubImage2D(e,t,n,i,a,o,u.__nativeObj):r.glTexSubImage2D(e,t,n,i,a,o,u);break;case 9:var l=arguments[4],c=arguments[5],f=(a=arguments[6],o=arguments[7],arguments[8]);r.glTexSubImage2D(e,t,n,i,l,c,a,o,f)}}function Xe(e,t){r.glUniform1f(e,t)}function We(e,t,n){r.glUniform2f(e,t,n)}function ze(e,t,n,i){r.glUniform3f(e,t,n,i)}function qe(e,t,n,i,a){r.glUniform4f(e,t,n,i,a)}function Ye(e,t){r.glUniform1i(e,t)}function Qe(e,t,n){r.glUniform2i(e,t,n)}function $e(e,t,n,i){r.glUniform3i(e,t,n,i)}function Je(e,t,n,i,a){r.glUniform4i(e,t,n,i,a)}function Ze(e,t){r.glUniform1fv(e,u(t instanceof Array==1?new Float32Array(t):t))}function et(e,t){r.glUniform2fv(e,u(t instanceof Array==1?new Float32Array(t):t))}function tt(e,t){r.glUniform3fv(e,u(t instanceof Array==1?new Float32Array(t):t))}function nt(e,t){r.glUniform4fv(e,u(t instanceof Array==1?new Float32Array(t):t))}function rt(e,t){r.glUniform1iv(e,u(t instanceof Array==1?new Int32Array(t):t))}function it(e,t){r.glUniform2iv(e,u(t instanceof Array==1?new Int32Array(t):t))}function at(e,t){r.glUniform3iv(e,u(t instanceof Array==1?new Int32Array(t):t))}function ot(e,t){r.glUniform4iv(e,u(t instanceof Array==1?new Int32Array(t):t))}function ut(e,t,n){r.glUniformMatrix2fv(e,t,u(n instanceof Array==1?new Float32Array(n):n))}function lt(e,t,n){r.glUniformMatrix3fv(e,t,u(n instanceof Array==1?new Float32Array(n):n))}function ct(e,t,n){r.glUniformMatrix4fv(e,t,u(n instanceof Array==1?new Float32Array(n):n))}function ft(e){r.glUseProgram(e)}function st(e){r.glValidateProgram(e)}function dt(e,t){r.glVertexAttrib1f(e,t)}function ht(e,t,n){r.glVertexAttrib2f(e,t,n)}function pt(e,t,n,i){r.glVertexAttrib3f(e,t,n,i)}function gt(e,t,n,i,a){r.glVertexAttrib4f(e,t,n,i,a)}function mt(e,t){r.glVertexAttrib1fv(e,u(t instanceof Array==1?new Float32Array(t):t))}function vt(e,t){r.glVertexAttrib2fv(e,u(t instanceof Array==1?new Float32Array(t):t))}function Et(e,t){r.glVertexAttrib3fv(e,u(t instanceof Array==1?new Float32Array(t):t))}function yt(e,t){r.glVertexAttrib4fv(e,u(t instanceof Array==1?new Float32Array(t):t))}function bt(e,t,n,i,a,o){r.glVertexAttribPointer(e,t,n,i,a,o)}function _t(e,t,n,i){r.glViewport(e,t,n,i)}function St(e,t){return r.glGetActiveAttrib(e,t)}function Tt(e,t){return r.glGetActiveUniform(e,t)}function At(e){return r.glGetAttachedShaders(e)}function wt(e,t){return r.glGetBufferParameter(e,t)}function kt(e,t,n){return r.glGetFramebufferAttachmentParameter(e,t,n)}function Ct(e,t){return r.glGetProgramParameter(e,t)}function Nt(e,t){return r.glGetRenderbufferParameter(e,t)}function It(e,t){return r.glGetShaderParameter(e,t)}function Rt(e,t){return r.glGetTexParameter(e,t)}function Bt(e,t){return r.glGetVertexAttrib(e,t)}function Pt(e,t){return r.glGetUniform(e,t)}function Ot(e){switch(e){case r.ACTIVE_TEXTURE:case r.ALPHA_BITS:case r.ARRAY_BUFFER_BINDING:case r.BLUE_BITS:case r.CULL_FACE_MODE:case r.CURRENT_PROGRAM:case r.DEPTH_BITS:case r.DEPTH_FUNC:case r.ELEMENT_ARRAY_BUFFER_BINDING:case r.FRAMEBUFFER_BINDING:case r.FRONT_FACE:case r.GENERATE_MIPMAP_HINT:case r.GREEN_BITS:case r.IMPLEMENTATION_COLOR_READ_FORMAT:case r.IMPLEMENTATION_COLOR_READ_TYPE:case r.MAX_COMBINED_TEXTURE_IMAGE_UNITS:case r.MAX_CUBE_MAP_TEXTURE_SIZE:case r.MAX_FRAGMENT_UNIFORM_VECTORS:case r.MAX_RENDERBUFFER_SIZE:case r.MAX_TEXTURE_IMAGE_UNITS:case r.MAX_TEXTURE_SIZE:case r.MAX_VARYING_VECTORS:case r.MAX_VERTEX_ATTRIBS:case r.MAX_VERTEX_TEXTURE_IMAGE_UNITS:case r.MAX_VERTEX_UNIFORM_VECTORS:case r.MAX_VIEWPORT_DIMS:case r.NUM_COMPRESSED_TEXTURE_FORMATS:case r.NUM_SHADER_BINARY_FORMATS:case r.PACK_ALIGNMENT:case r.RED_BITS:case r.RENDERBUFFER_BINDING:case r.SAMPLE_BUFFERS:case r.SAMPLES:case r.STENCIL_BACK_FAIL:case r.STENCIL_BACK_FUNC:case r.STENCIL_BACK_PASS_DEPTH_FAIL:case r.STENCIL_BACK_PASS_DEPTH_PASS:case r.STENCIL_BACK_REF:case r.STENCIL_BACK_VALUE_MASK:case r.STENCIL_BACK_WRITEMASK:case r.STENCIL_BITS:case r.STENCIL_CLEAR_VALUE:case r.STENCIL_FAIL:case r.STENCIL_FUNC:case r.STENCIL_PASS_DEPTH_FAIL:case r.STENCIL_PASS_DEPTH_PASS:case r.STENCIL_REF:case r.STENCIL_VALUE_MASK:case r.STENCIL_WRITEMASK:case r.SUBPIXEL_BITS:case r.TEXTURE_BINDING_2D:case r.TEXTURE_BINDING_CUBE_MAP:case r.UNPACK_ALIGNMENT:case r.BLEND_DST_ALPHA:case r.BLEND_DST_RGB:case r.BLEND_EQUATION_ALPHA:case r.BLEND_EQUATION_RGB:case r.BLEND_SRC_ALPHA:case r.BLEND_SRC_RGB:return r.glGetParameterInt(e,1);case r.ALIASED_LINE_WIDTH_RANGE:case r.ALIASED_POINT_SIZE_RANGE:case r.DEPTH_RANGE:case r.MAX_VIEWPORT_DIMS:return r.glGetParameterFloat(e,2);case r.BLEND:case r.CULL_FACE:case r.DEPTH_TEST:case r.DEPTH_WRITEMASK:case r.DITHER:case r.POLYGON_OFFSET_FILL:case r.SAMPLE_ALPHA_TO_COVERAGE:case r.SAMPLE_COVERAGE:case r.SAMPLE_COVERAGE_INVERT:case r.SCISSOR_TEST:case r.SHADER_COMPILER:case r.STENCIL_TEST:return r.glGetParameterBool(e,1);case r.BLEND_COLOR:case r.COLOR_CLEAR_VALUE:return r.glGetParameterFloat(e,4);case r.SCISSOR_BOX:case r.VIEWPORT:return r.glGetParameterInt(e,4);case r.COLOR_WRITEMASK:return r.glGetParameterBool(e,4);case r.POLYGON_OFFSET_FACTOR:case r.POLYGON_OFFSET_UNITS:case r.SAMPLE_COVERAGE_VALUE:return r.glGetParameterFloat(e,1);case r.SHADER_BINARY_FORMATS:var t=r.glGetParameterInt(r.NUM_SHADER_BINARY_FORMATS,1);return r.glGetParameterInt(e,t);case r.COMPRESSED_TEXTURE_FORMATS:t=r.glGetParameterInt(r.NUM_COMPRESSED_TEXTURE_FORMATS,1);return r.glGetParameterInt(e,t);case r.VERSION:return"WebGL 1"}}var Ft,Mt=0,Ut=1,Lt=3,xt=4,Dt=5,Kt=6,Gt=7,Vt=8,jt=9,Ht=10,Xt=11,Wt=14,zt=15,qt=16,Yt=17,Qt=18,$t=20,Jt=23,Zt=24,en=25,tn=26,nn=27,rn=28,an=29,on=30,un=31,ln=32,cn=33,fn=34,sn=35,dn=36,hn=37,pn=38,gn=39,mn=40,vn=41,En=42,yn=43,bn=44,_n=45,Sn=46,Tn=47,An=48,wn=49,kn=50,Cn=51,Nn=52,In=53,Rn=54,Bn=55,Pn=57,On=58,Fn=59,Mn=60,Un=61,Ln=62,xn=64,Dn=65,Kn=67,Gn=68,Vn=69,jn=70,Hn=71,Xn=72,Wn=73,zn=74,qn=75,Yn=76,Qn=77,$n=78,Jn=79,Zn=80,er=81,tr=82,nr=83,rr=84,ir=85,ar=86,or=87,ur=88,lr=89,cr=90,fr=91,sr=92,dr=93,hr=94,pr=95,gr=96,mr=97,vr=1e5,Er=0;function yr(){r.flushCommand&&function(){if("android"==GameStatusInfo.platform)return!0;var e=BK.Director.queryDeviceInfo(),t=e.version.split(".");if("ios"==e.platform&&Number(t[0])>=10)return!0;return!1}()&&(r.activeTexture=Sr,r.attachShader=Tr,r.bindAttribLocation=Ar,r.bindBuffer=wr,r.bindFramebuffer=kr,r.bindRenderbuffer=Cr,r.bindTexture=Nr,r.blendColor=Ir,r.blendEquation=Rr,r.blendEquationSeparate=Br,r.blendFunc=Pr,r.blendFuncSeparate=Or,r.bufferData=Fr,r.bufferData=Fr,r.bufferSubData=Mr,r.checkFramebufferStatus=Ur,r.clear=Lr,r.clearColor=xr,r.clearDepth=Dr,r.clearStencil=Kr,r.colorMask=Gr,r.compileShader=Vr,r.compressedTexImage2D=jr,r.compressedTexSubImage2D=Hr,r.copyTexImage2D=Xr,r.copyTexSubImage2D=Wr,r.createBuffer=zr,r.createFramebuffer=qr,r.createProgram=Yr,r.createRenderbuffer=Qr,r.createShader=$r,r.createTexture=Jr,r.cullFace=Zr,r.deleteBuffer=ei,r.deleteFramebuffer=ti,r.deleteProgram=ni,r.deleteRenderbuffer=ri,r.deleteShader=ii,r.deleteTexture=ai,r.depthFunc=oi,r.depthMask=ui,r.depthRange=li,r.detachShader=ci,r.disable=fi,r.disableVertexAttribArray=si,r.drawArrays=di,r.drawElements=hi,r.enable=pi,r.enableVertexAttribArray=gi,r.finish=mi,r.flush=vi,r.framebufferRenderbuffer=Ei,r.framebufferTexture2D=yi,r.frontFace=bi,r.generateMipmap=_i,r.getActiveAttrib=Si,r.getActiveUniform=Ti,r.getAttachedShaders=Ai,r.getAttribLocation=wi,r.getBufferParameter=ki,r.getParameter=Ci,r.getError=Ni,r.getFramebufferAttachmentParameter=Ii,r.getProgramParameter=Ri,r.getProgramInfoLog=Bi,r.getRenderbufferParameter=Pi,r.getShaderParameter=Oi,r.getShaderPrecisionFormat=Fi,r.getShaderInfoLog=Mi,r.getShaderSource=Ui,r.getTexParameter=Li,r.getUniform=xi,r.getUniformLocation=Di,r.getVertexAttrib=Ki,r.getVertexAttribOffset=Gi,r.hint=Vi,r.isBuffer=ji,r.isEnabled=Hi,r.isFramebuffer=Xi,r.isProgram=Wi,r.isRenderbuffer=zi,r.isShader=qi,r.isTexture=Yi,r.lineWidth=Qi,r.linkProgram=$i,r.pixelStorei=Ji,r.polygonOffset=Zi,r.readPixels=ea,r.renderbufferStorage=ta,r.sampleCoverage=na,r.scissor=ra,r.shaderSource=ia,r.stencilFunc=aa,r.stencilFuncSeparate=oa,r.stencilMask=ua,r.stencilMaskSeparate=la,r.stencilOp=ca,r.stencilOpSeparate=fa,r.texImage2D=sa,r.texImage2D=sa,r.texParameterf=da,r.texParameteri=ha,r.texSubImage2D=pa,r.texSubImage2D=pa,r.uniform1f=ga,r.uniform2f=ma,r.uniform3f=va,r.uniform4f=Ea,r.uniform1i=ya,r.uniform2i=ba,r.uniform3i=_a,r.uniform4i=Sa,r.uniform1fv=Ta,r.uniform2fv=Aa,r.uniform3fv=wa,r.uniform4fv=ka,r.uniform1iv=Ca,r.uniform2iv=Na,r.uniform3iv=Ia,r.uniform4iv=Ra,r.uniformMatrix2fv=Ba,r.uniformMatrix3fv=Pa,r.uniformMatrix4fv=Oa,r.useProgram=Fa,r.validateProgram=Ma,r.vertexAttrib1f=Ua,r.vertexAttrib2f=La,r.vertexAttrib3f=xa,r.vertexAttrib4f=Da,r.vertexAttrib1fv=Ka,r.vertexAttrib2fv=Ga,r.vertexAttrib3fv=Va,r.vertexAttrib4fv=ja,r.vertexAttribPointer=Ha,r.viewport=Xa,r.glCommit=_r,r.getExtension=function(){return null}),Ft=new Float32Array(vr)}function br(){Er>0&&(r.flushCommand(Er,Ft),Er=0)}function _r(){br(),r.commit()}function Sr(e){Er+2>vr&&br(),Ft[Er]=Mt,Ft[Er+1]=e,Er+=2}function Tr(e,t){Er+3>vr&&br(),Ft[Er]=Ut,Ft[Er+1]=e,Ft[Er+2]=t,Er+=3}function Ar(e,t,n){br(),d(e,t,n)}function wr(e,t){Er+3>vr&&br(),Ft[Er]=Lt,Ft[Er+1]=e,Ft[Er+2]=t,Er+=3}function kr(e,t){Er+3>vr&&br(),Ft[Er]=xt,Ft[Er+1]=e,Ft[Er+2]=t,Er+=3}function Cr(e,t){Er+3>vr&&br(),Ft[Er]=Dt,Ft[Er+1]=e,Ft[Er+2]=t,Er+=3}function Nr(e,t){Er+3>vr&&br(),Ft[Er]=Kt,Ft[Er+1]=e,Ft[Er+2]=t,Er+=3}function Ir(e,t,n,r){Er+5>vr&&br(),Ft[Er]=Gt,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Er+=5}function Rr(e){Er+2>vr&&br(),Ft[Er]=Vt,Ft[Er+1]=e,Er+=2}function Br(e,t){Er+3>vr&&br(),Ft[Er]=jt,Ft[Er+1]=e,Ft[Er+2]=t,Er+=3}function Pr(e,t){Er+3>vr&&br(),Ft[Er]=Ht,Ft[Er+1]=e,Ft[Er+2]=t,Er+=3}function Or(e,t,n,r){Er+5>vr&&br(),Ft[Er]=Xt,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Er+=5}function Fr(e,t,n){br(),S(e,t,n)}function Mr(e,t,n){br(),T(e,t,n)}function Ur(e){br(),A(e)}function Lr(e){Er+2>vr&&br(),Ft[Er]=Wt,Ft[Er+1]=e,Er+=2}function xr(e,t,n,r){Er+5>vr&&br(),Ft[Er]=zt,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Er+=5}function Dr(e){Er+2>vr&&br(),Ft[Er]=qt,Ft[Er+1]=e,Er+=2}function Kr(e){Er+2>vr&&br(),Ft[Er]=Yt,Ft[Er+1]=e,Er+=2}function Gr(e,t,n,r){Er+5>vr&&br(),Ft[Er]=Qt,Ft[Er+1]=e?1:0,Ft[Er+2]=t?1:0,Ft[Er+3]=n?1:0,Ft[Er+4]=r?1:0,Er+=5}function Vr(e){Er+2>vr&&br(),Ft[Er]=$t,Ft[Er+1]=e,Er+=2}function jr(e,t,n,r,i,a,o){br(),B(e,t,n,r,i,a,o)}function Hr(e,t,n,r,i,a,o,u){br(),P(e,t,n,r,i,a,o,u)}function Xr(e,t,n,r,i,a,o,u){Er+9>vr&&br(),Ft[Er]=Jt,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Ft[Er+5]=i,Ft[Er+6]=a,Ft[Er+7]=o,Ft[Er+8]=u,Er+=9}function Wr(e,t,n,r,i,a,o,u){Er+9>vr&&br(),Ft[Er]=Zt,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Ft[Er+5]=i,Ft[Er+6]=a,Ft[Er+7]=o,Ft[Er+8]=u,Er+=9}function zr(){return br(),M()}function qr(){return br(),U()}function Yr(){return br(),L()}function Qr(){return br(),x()}function $r(e){return br(),D(e)}function Jr(){return br(),K()}function Zr(e){Er+2>=vr&&br(),Ft[Er]=en,Ft[Er+1]=e,Er+=2}function ei(e){Er+2>=vr&&br(),Ft[Er]=tn,Ft[Er+1]=e,Er+=2}function ti(e){Er+2>=vr&&br(),Ft[Er]=nn,Ft[Er+1]=e,Er+=2}function ni(e){Er+2>=vr&&br(),Ft[Er]=rn,Ft[Er+1]=e,Er+=2}function ri(e){Er+2>=vr&&br(),Ft[Er]=an,Ft[Er+1]=e,Er+=2}function ii(e){Er+2>=vr&&br(),Ft[Er]=on,Ft[Er+1]=e,Er+=2}function ai(e){Er+2>=vr&&br(),Ft[Er]=un,Ft[Er+1]=e,Er+=2}function oi(e){Er+2>=vr&&br(),Ft[Er]=ln,Ft[Er+1]=e,Er+=2}function ui(e){Er+2>=vr&&br(),Ft[Er]=cn,Ft[Er+1]=e?1:0,Er+=2}function li(e,t){Er+3>=vr&&br(),Ft[Er]=fn,Ft[Er+1]=e,Ft[Er+1]=t,Er+=3}function ci(e,t){Er+3>=vr&&br(),Ft[Er]=sn,Ft[Er+1]=e,Ft[Er+1]=t,Er+=3}function fi(e){Er+2>=vr&&br(),Ft[Er]=dn,Ft[Er+1]=e,Er+=2}function si(e){Er+2>=vr&&br(),Ft[Er]=hn,Ft[Er+1]=e,Er+=2}function di(e,t,n){Er+4>=vr&&br(),Ft[Er]=pn,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Er+=4,n>0&&c()}function hi(e,t,n,r){Er+5>=vr&&br(),Ft[Er]=gn,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Er+=5,t>0&&c()}function pi(e){Er+2>=vr&&br(),Ft[Er]=mn,Ft[Er+1]=e,Er+=2}function gi(e){Er+2>=vr&&br(),Ft[Er]=vn,Ft[Er+1]=e,Er+=2}function mi(){Er+1>=vr&&br(),Ft[Er]=En,Er+=1}function vi(){Er+1>=vr&&br(),Ft[Er]=yn,Er+=1}function Ei(e,t,n,r){Er+5>=vr&&br(),Ft[Er]=bn,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Er+=5}function yi(e,t,n,r,i){Er+6>=vr&&br(),Ft[Er]=_n,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Ft[Er+5]=i,Er+=6}function bi(e){Er+2>=vr&&br(),Ft[Er]=Sn,Ft[Er+1]=e,Er+=2}function _i(e){Er+2>=vr&&br(),Ft[Er]=Tn,Ft[Er+1]=e,Er+=2}function Si(e,t){return br(),St(e,t)}function Ti(e,t){return br(),Tt(e,t)}function Ai(e){return br(),At(e)}function wi(e,t){return br(),fe(e,t)}function ki(e,t){return br(),wt(e,t)}function Ci(e){return br(),Ot(e)}function Ni(){return br(),se()}function Ii(e,t,n){return br(),kt(e,t,n)}function Ri(e,t){return br(),Ct(e,t)}function Bi(e){return br(),he(e)}function Pi(e,t){return br(),Nt(e,t)}function Oi(e,t){return br(),It(e,t)}function Fi(e,t){return br(),de(e,t)}function Mi(e){return br(),pe(e)}function Ui(e){return br(),ge(e)}function Li(e,t){return br(),Rt(e,t)}function xi(e,t){return br(),Pt(e,t)}function Di(e,t){return br(),me(e,t)}function Ki(e,t){return br(),Bt(e,t)}function Gi(e,t){return br(),ve(e,t)}function Vi(e,t){Er+3>=vr&&br(),Ft[Er]=An,Ft[Er+1]=e,Ft[Er+2]=t,Er+=3}function ji(e){return br(),ye(e)}function Hi(e){return br(),be(e)}function Xi(e){return br(),_e(e)}function Wi(e){return br(),Se(e)}function zi(e){return br(),Te(e)}function qi(e){return br(),Ae(e)}function Yi(e){return br(),we(e)}function Qi(e){Er+2>=vr&&br(),Ft[Er]=wn,Ft[Er+1]=e,Er+=2}function $i(e){Er+2>=vr&&br(),Ft[Er]=kn,Ft[Er+1]=e,Er+=2}function Ji(e,t){Er+3>=vr&&br(),Ft[Er]=Cn,Ft[Er+1]=e,Ft[Er+2]=t,Er+=3}function Zi(e,t){Er+3>=vr&&br(),Ft[Er]=Nn,Ft[Er+1]=e,Ft[Er+2]=t,Er+=3}function ea(e,t,n,r,i,a,o){br(),Re(e,t,n,r,i,a,o)}function ta(e,t,n,r){Er+5>=vr&&br(),Ft[Er]=In,Ft[Er+1]=e,Ft[Er+2]=internalFormat,Ft[Er+3]=n,Ft[Er+4]=r,Er+=5}function na(e,t){Er+3>=vr&&br(),Ft[Er]=Rn,Ft[Er+1]=e,Ft[Er+2]=t?1:0,Er+=3}function ra(e,t,n,r){Er+5>=vr&&br(),Ft[Er]=Bn,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Er+=5}function ia(e,t){br(),Fe(e,t)}function aa(e,t,n){Er+4>=vr&&br(),Ft[Er]=Pn,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Er+=4}function oa(e,t,n,r){Er+5>=vr&&br(),Ft[Er]=On,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Er+=5}function ua(e){Er+2>=vr&&br(),Ft[Er]=Fn,Ft[Er+1]=e,Er+=2}function la(e,t){Er+3>=vr&&br(),Ft[Er]=Mn,Ft[Er+1]=e,Ft[Er+2]=t,Er+=3}function ca(e,t,n){Er+4>=vr&&br(),Ft[Er]=Un,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Er+=4}function fa(e,t,n,r){Er+5>=vr&&br(),Ft[Er]=Ln,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Er+=5}function sa(e,t,n){switch(br(),arguments.length){case 6:var i=arguments[3],a=arguments[4],o=arguments[5];Object.prototype.hasOwnProperty.call(o,"__nativeObj")?r.glTexImage2D(e,t,n,i,a,o.__nativeObj):o.bkImage?r.glTexImage2D(e,t,n,i,a,o.bkImage):r.glTexImage2D(e,t,n,i,a,o);break;case 9:var u=arguments[3],l=arguments[4],c=arguments[5],f=(i=arguments[6],a=arguments[7],arguments[8]);r.glTexImage2D(e,t,n,u,l,c,i,a,f)}}function da(e,t,n){Er+4>=vr&&br(),Ft[Er]=xn,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Er+=4}function ha(e,t,n){Er+4>=vr&&br(),Ft[Er]=Dn,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Er+=4}function pa(e,t,n,r,i,a,o,u,l){br(),He(e,t,n,r,i,a,o,u,l)}function pa(e,t,n,r,i,a,o){br(),He(e,t,n,r,i,a,o)}function ga(e,t){Er+3>=vr&&br(),Ft[Er]=Kn,Ft[Er+1]=e,Ft[Er+2]=t,Er+=3}function ma(e,t,n){Er+4>=vr&&br(),Ft[Er]=Hn,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Er+=4}function va(e,t,n,r){Er+5>=vr&&br(),Ft[Er]=qn,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Er+=5}function Ea(e,t,n,r,i){Er+6>=vr&&br(),Ft[Er]=Jn,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Ft[Er+5]=i,Er+=6}function ya(e,t){Er+3>=vr&&br(),Ft[Er]=Vn,Ft[Er+1]=e,Ft[Er+2]=t,Er+=3}function ba(e,t,n){Er+4>=vr&&br(),Ft[Er]=Wn,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Er+=4}function _a(e,t,n,r){Er+5>=vr&&br(),Ft[Er]=Qn,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Er+=5}function Sa(e,t,n,r,i){Er+6>=vr&&br(),Ft[Er]=er,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Ft[Er+5]=i,Er+=6}function Ta(e,t){Er+3+t.length>=vr&&br(),Ft[Er]=Gn,Ft[Er+1]=e,Ft[Er+2]=t.length,Ft.set(t,Er+3),Er+=3+t.length}function Aa(e,t){Er+3+t.length>=vr&&br(),Ft[Er]=Xn,Ft[Er+1]=e,Ft[Er+2]=t.length,Ft.set(t,Er+3),Er+=3+t.length}function wa(e,t){Er+3+t.length>=vr&&br(),Ft[Er]=Yn,Ft[Er+1]=e,Ft[Er+2]=t.length,Ft.set(t,Er+3),Er+=3+t.length}function ka(e,t){Er+3+t.length>=vr&&br(),Ft[Er]=Zn,Ft[Er+1]=e,Ft[Er+2]=t.length,Ft.set(t,Er+3),Er+=3+t.length}function Ca(e,t){Er+3+t.length>=vr&&br(),Ft[Er]=jn,Ft[Er+1]=e,Ft[Er+2]=t.length,Ft.set(t,Er+3),Er+=3+t.length}function Na(e,t){Er+3+t.length>=vr&&br(),Ft[Er]=zn,Ft[Er+1]=e,Ft[Er+2]=t.length,Ft.set(t,Er+3),Er+=3+t.length}function Ia(e,t){Er+3+t.length>=vr&&br(),Ft[Er]=$n,Ft[Er+1]=e,Ft[Er+2]=t.length,Ft.set(t,Er+3),Er+=3+t.length}function Ra(e,t){Er+3+t.length>=vr&&br(),Ft[Er]=tr,Ft[Er+1]=e,Ft[Er+2]=t.length,Ft.set(t,Er+3),Er+=3+t.length}function Ba(e,t,n){Er+4+n.length>=vr&&br(),Ft[Er]=nr,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n.length,Ft.set(n,Er+4),Er+=4+n.length}function Pa(e,t,n){Er+4+n.length>=vr&&br(),Ft[Er]=rr,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n.length,Ft.set(n,Er+4),Er+=4+n.length}function Oa(e,t,n){Er+4+n.length>=vr&&br(),Ft[Er]=ir,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n.length,Ft.set(n,Er+4),Er+=4+n.length}function Fa(e){Er+2>=vr&&br(),Ft[Er]=ar,Ft[Er+1]=e,Er+=2}function Ma(e){Er+2>=vr&&br(),Ft[Er]=or,Ft[Er+1]=e,Er+=2}function Ua(e,t){Er+3>=vr&&br(),Ft[Er]=ur,Ft[Er+1]=e,Ft[Er+2]=t,Er+=3}function La(e,t,n){Er+4>=vr&&br(),Ft[Er]=lr,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Er+=4}function xa(e,t,n,r){Er+5>=vr&&br(),Ft[Er]=cr,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Er+=5}function Da(e,t,n,r,i){Er+6>=vr&&br(),Ft[Er]=fr,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Ft[Er+5]=i,Er+=6}function Ka(e,t){Er+3+t.length>=vr&&br(),Ft[Er]=sr,Ft[Er+1]=e,Ft[Er+2]=t.length,Ft.set(t,Er+3),Er+=3+t.length}function Ga(e,t){Er+3+t.length>=vr&&br(),Ft[Er]=dr,Ft[Er+1]=e,Ft[Er+2]=t.length,Ft.set(t,Er+3),Er+=3+t.length}function Va(e,t){Er+3+t.length>=vr&&br(),Ft[Er]=hr,Ft[Er+1]=e,Ft[Er+2]=t.length,Ft.set(t,Er+3),Er+=3+t.length}function ja(e,t){Er+3+t.length>=vr&&br(),Ft[Er]=pr,Ft[Er+1]=e,Ft[Er+2]=t.length,Ft.set(t,Er+3),Er+=3+t.length}function Ha(e,t,n,r,i,a){Er+7>=vr&&br(),Ft[Er]=gr,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r?1:0,Ft[Er+5]=i,Ft[Er+6]=a,Er+=7}function Xa(e,t,n,r){Er+5>=vr&&br(),Ft[Er]=mr,Ft[Er+1]=e,Ft[Er+2]=t,Ft[Er+3]=n,Ft[Er+4]=r,Er+=5}var Wa=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.webgl=o();var t=this.webgl,n=0;BK.Director.ticker.add(function(e,r){e-n>10&&(t.glCommit(),n=e)})}return a(e,[{key:"getContext",value:function(){return this.webgl}}]),e}();t.default=Wa},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=f(n(5)),u=f(n(1)),l=f(n(27)),c=n(3);function f(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=GameStatusInfo.QQVer.split("."),h=Number(d[0])>=7&&Number(d[1])>=7,p=26,g=function(){function e(){s(this,e),this.width=0,this.height=0,this.data=new Uint8ClampedArray(0),this.bkbuffer=null}return a(e,[{key:"init",value:function(e){e&&(this.bkbuffer=e,this.data=function(e){var t=new ArrayBuffer(e.bufferLength()),n=new Uint8ClampedArray(t),r=0;for(;r<e.bufferLength();)n[r++]=e.readUint8Buffer();return n}(this.bkbuffer),e.__inner_image_width&&(this.width=e.__inner_image_width),e.__inner_image_height&&(this.height=e.__inner_image_height))}},{key:"getBuffer",value:function(){if(this.data)for(var e=0;e<this.data.byteLength;)this.bkbuffer.writeUint8Buffer(this.data[e++]);return this.bkbuffer}},{key:"writeUint8Buffer",value:function(e){this.bkbuffer&&this.bkbuffer.writeUint8Buffer(e)}}]),e}();var m=function(e){function t(e,n){s(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return BK.Director.root.addChild(r),r.useH5Mode(),r.setTextSize(p),r.fillColor={r:0,g:0,b:0,a:0},r._width=e,r._height=n,r._lastHeight=n,r._lastWidth=e,r._fontSize=p,r._textList=[],r._lineWidth=2,r.renderCount=0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,BK.Canvas),a(t,[{key:"size",value:function(e,t){this._height=t,this._width=e,this.updateSize()}},{key:"updateSize",value:function(){this._height||(this._height=0),this._width||(this._width=0),this.__nativeObj.size={height:this._height,width:this._width},this.__nativeObj.resetCanvas(),this.renderCount=1}},{key:"scale",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"scale",this)?i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"scale",this).apply(this,arguments):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canvasScale",this).apply(this,arguments)}},{key:"getContext",value:function(e){return"2d"===e?this:"webgl"===e?(new l.default).getContext():void 0}},{key:"toTempFilePath",value:function(e){return this.toTempFilePathSync(e)}},{key:"toDataURL",value:function(){return this.toDataURL()}},{key:"toTempFilePathSync",value:function(e){var t=new BK.ScreenShot;if("object"===(void 0===e?"undefined":r(e))){var n=e.x,i=e.y,a=e.width,o=e.height;e.destWidth,e.destHeight,e.fileType,e.quality;t.origin={x:n,y:i},t.size={width:a,height:o}}return t.shotToFile()}},{key:"drawImage",value:function(){"object"===r(arguments[0])&&(arguments[0]=arguments[0].src),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"drawImage",this).apply(this,arguments)}},{key:"addEventListener",value:function(e,t){"touchstart"===e&&t?o.default.onTouchStart(t):"touchmove"===e&&t?o.default.onTouchMove(t):"touchend"===e&&t&&o.default.onTouchEnd(t)}},{key:"removeEventListener",value:function(e,t){"touchstart"===e&&o.default.offTouchStart(t)}},{key:"fillText",value:function(){this.renderCount++,i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fillText",this).apply(this,arguments),window.EGRET_GAME&&this.renderCount>=1&&this.renderCount<=3&&this.getTexture()}},{key:"createImageData",value:function(){if(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createImageData",this)){var e=new g,n=h?i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createImageData",this).apply(this,arguments):void 0;return e.init(n),e}}},{key:"getImageData",value:function(){if(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getImageData",this)){var e=h?i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getImageData",this).apply(this,arguments):void 0,n=new g;return n.init(e),n}}},{key:"putImageData",value:function(e){e instanceof g&&(arguments[0]=e.getBuffer()),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"putImageData",this)&&h&&i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"putImageData",this).apply(this,arguments)}},{key:"moveTo",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveTo",this)&&i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveTo",this).apply(this,arguments)}},{key:"lineTo",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"lineTo",this)&&i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"lineTo",this).apply(this,arguments)}},{key:"fill",value:function(){this._textList=[],i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fill",this)&&i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fill",this).apply(this,arguments)}},{key:"clear",value:function(){this._textList=[],i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clear",this)&&i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clear",this).apply(this,arguments)}},{key:"clearRect",value:function(e,n,r,a,o){this._textList=[],i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clearRect",this)&&i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clearRect",this).apply(this,arguments)}},{key:"transform",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"transforms",this).apply(this,arguments)}},{key:"transforms",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"transforms",this).apply(this,arguments)}},{key:"createLinearGradient",value:function(){return{addColorStop:function(){}}}},{key:"strokeText",value:function(){}},{key:"fontParse",value:function(e){for(var t=null,n=null,r="normal",i="normal",a="normal",o="normal",u=e.split(/\s+/);element=u.shift();)switch(element){case"normal":break;case"italic":case"oblique":r=element;break;case"small-caps":a=element;break;case"bold":case"bolder":case"lighter":case"100":case"200":case"300":case"400":case"500":case"600":case"700":case"800":case"900":i=element;break;default:if(!n){var l=element.split("/");n=l[0],l.length>1&&(o=l[1]);break}t=element,u.length&&(t+=" "+u.join(" "))}return{fontStyle:r,fontVariant:a,fontWeight:i,fontSize:n,lineHeight:o,fontFamily:t}}},{key:"height",set:function(e){this._height=e,this.updateSize()},get:function(){return this._height}},{key:"width",set:function(e){this._width=e,this.updateSize()},get:function(){return this._width}},{key:"fillStyle",set:function(e){this.fillColor=(0,c.colorToRgba)(e)}},{key:"strokeStyle",set:function(e){this.strokeColor=(0,c.colorToRgba)(e)}},{key:"font",set:function(e){var t=this.fontParse(e),n=t.fontSize,r=t.fontFamily,i=t.fontStyle;t.fontVariant,t.fontWeight;if(e){if(this._fontStyle=e,i&&"italic"===i&&this.setTextItalic(),n){var a=parseInt(n)||p;this._fontSize=a,this.setTextSize(a)}if(r){var o=void 0;BK.FileUtil.isFileExist(u.default.getPath(r))&&(o=u.default.getPath(r)),o&&this.fontPath!==o&&"GameRes://Arial"!==o&&(this.fontPath=o)}}}}]),t}();t.default=m},function(e,t,n){;Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2);var a=!0,o=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.query=GameStatusInfo.gameParam,this.shareTicket=r,this.isSticky=i}return r(e,[{key:"getLaunchOptionsSync",value:function(){return{scene:this.scene,query:this.getLaunchObject()||{},isSticky:this.isSticky,shareTicket:this.shareTicket}}},{key:"exitMiniProgram",value:function(){}},{key:"onHide",value:function(e){"function"==typeof e&&BK.QQ.listenGameEventEnterBackground({},e)}},{key:"offHide",value:function(){"function"==typeof callback&&BK.QQ.listenGameEventEnterBackground({},null)}},{key:"onShow",value:function(e){if("function"==typeof e){var t=this;BK.Script.log(0,0,"onshow "+t.getLaunchObject()),BK.QQ.listenGameEventEnterForeground({},function(){e&&e({scene:t.scene,query:t.getLaunchObject()||{},shareTicket:t.shareTicket})}),a&&((0,i.setTimeout)(function(){e({scene:t.scene,query:t.getLaunchObject()||{},shareTicket:t.shareTicket})},0),a=!1)}}},{key:"offShow",value:function(e){"function"==typeof e&&BK.QQ.listenGameEventEnterBackground(null)}},{key:"getLaunchObject",value:function(){var e=GameStatusInfo.gameParam,t={};e&&e.split("&").forEach(function(e){var n=e.split("=")[1],r=e.split("=")[0];t[r]=n});return t}}]),e}();t.default=o},function(e,t,n){;var r;Object.defineProperty(t,"__esModule",{value:!0}),t.requestAnimationFrame=t.cancelAnimationFrame=t.clearTimeout=t.setTimeout=t.clearInterval=t.setInterval=t.Log=t.wx=t.Canvas=t.Image=void 0;var i=A(n(29)),a=A(n(0)),o=A(n(28)),u=A(n(26)),l=A(n(5)),c=n(2),f=A(n(24)),s=A(n(23)),d=A(n(22)),h=A(n(21)),p=A(n(20)),g=A(n(19)),m=A(n(18)),v=(n(17),n(16),n(15),A(n(14))),E=n(13),y=A(n(12)),b=A(n(11)),_=A(n(10)),S=A(n(9)),T=A(n(8));function A(e){return e&&e.__esModule?e:{default:e}}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=n(7).DOMParser,C=new i.default(8,"test","test",!0),N=new p.default,I=new m.default,R=new y.default,B=new s.default,P=new b.default,O=new g.default,F=new o.default(1021,85),M=new v.default(F),U=void 0,L=void 0,x=void 0,D=void 0,K=new _.default,G=new S.default,V=new T.default;new BK.Game({onLoad:function(e){BK.Script.log(0,0,"BK.Game, onLoad")},onMaximize:function(e){BK.Script.log(0,0,"BK.Game, onMaxmize")},onMinmize:function(e){BK.Script.log(0,0,"BK.Game, onMinmize")},onEnterBackground:function(e){BK.Script.log(0,0,"BK.Game, onEnterbackground"),x&&x()},onEnterForeground:function(e){BK.Script.log(0,0,"BK.Game, onEnterforeground"),L&&L()},onShare:function(e){if(BK.Script.log(0,0,"BK.Game, onShare"),I&&I.shareCallback){var t=I.shareCallback();if(void 0!==t)return{summary:t.title,extendInfo:{},localPicPath:"",picUrl:t.imageUrl}}},onClose:function(e){BK.Script.log(0,0,"BK.Game, onClose")},onNetWorkChange:function(e,t){if(D){D()}}});var j=(w(r={exitMiniProgram:function(){return C.exitMiniProgram()},getLaunchOptionsSync:function(){return C.getLaunchOptionsSync()},onHide:function(e){return C.onHide(e)},offHide:function(){return C.offHide()},onShow:function(e){return C.onShow(e)},offShow:function(e){return C.offShow(e)},log:function(e,t,n){a.default.d(e,t,n)},createCanvas:function(){return new o.default(BK.Director.screenPixelSize.width,BK.Director.screenPixelSize.height)},createImage:function(){return new u.default},getWidth:function(){return void 0!==window.egret||void 0!==window.EGRET_GAME?BK.Director.renderSize.width:BK.Director.screenPixelSize.width},getHeight:function(){return void 0!==window.egret||void 0!==window.EGRET_GAME?BK.Director.renderSize.height:BK.Director.screenPixelSize.height},getSystemInfo:function(e){window.setTimeout(function(){e.success({devicePixelRatio:BK.Director.screenPixelSize.width/BK.Director.renderSize.width,brand:"",model:"",pixelRatio:1,screenWidth:this.getWidth(),screenHeight:this.getHeight(),windowWidth:this.getWidth(),windowHeight:this.getHeight(),language:"zh_CN",version:GameStatusInfo.QQVer,system:GameStatusInfo.platform+" "+(GameStatusInfo.osVersion?GameStatusInfo.osVersion:"11.0"),platform:GameStatusInfo.platform,fontSizeSetting:"",SDKVersion:"",benchmarkLevel:"",battery:"",wifiSignal:""})},1)},getSystemInfoSync:function(){return{devicePixelRatio:BK.Director.screenPixelSize.width/BK.Director.renderSize.width,brand:"",model:"",pixelRatio:1,screenWidth:this.getWidth(),screenHeight:this.getHeight(),windowWidth:this.getWidth(),windowHeight:this.getHeight(),language:"zh_CN",version:GameStatusInfo.QQVer,system:GameStatusInfo.platform+" "+(GameStatusInfo.osVersion?GameStatusInfo.osVersion:"11.0"),platform:GameStatusInfo.platform,fontSizeSetting:"",SDKVersion:"",benchmarkLevel:"",battery:"",wifiSignal:""}},onTouchStart:function(e){l.default.onTouchStart(e)},offTouchStart:function(e){l.default.offTouchStart(e)},onTouchMove:function(e){l.default.onTouchMove(e)},onTouchCancel:function(e){l.default.onTouchCancel(e)},onTouchEnd:function(e){l.default.onTouchEnd(e)}},"offTouchStart",function(e){l.default.offTouchStart(index,1)}),w(r,"offTouchMove",function(e){l.default.offTouchMove(e)}),w(r,"offTouchCancel",function(e){l.default.offTouchCancel(e)}),w(r,"offTouchEnd",function(e){l.default.offTouchEnd(e)}),w(r,"createInnerAudioContext",function(){return new f.default}),w(r,"setPreferredFramesPerSecond",function(e){return(0,c.setPreferredFramesPerSecond)(e)}),w(r,"getUserInfo",function(e){var t={userInfo:{nickName:"",gender:1,language:"zh_CN",city:"",province:"",country:"China",avatarUrl:"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJn00QRPUIQXL4HtGLnhzVHTCA4kiaSibn6pcfs0FhWV5SzicglRrKA9wUwxBZIBHNbVWIB9R9IvYBQ/132"},rawData:"",signature:"",encryptedData:"",iv:"",errMsg:"getUserInfo:ok"};BK.QQ.fetchOpenKey(function(n,r,i){0===n&&i&&i.openKey?e.success&&(t.openid=GameStatusInfo.openId,t.openkey=i.openKey,BK.QQ.getRankList(function(n,r,i){if(i&&i.data&&i.data.rankList)for(var a=i.data.rankList,o=0;o<a.length;o++){var u=a[o];u&&u.ownFlag&&1===u.ownFlag&&(t.userInfo.avatarUrl=u.head,t.userInfo.nickName=u.nick,t.rawData=JSON.stringify(t.userInfo),e.success(t),e.complete&&e.complete())}})):(BK.Script.log(0,0,"fetchOpenKey ailed: errCode="+n),e.fail&&e.fail()),e.complete&&e.complete()})}),w(r,"getFileSystemManager",function(){return a.default.d(0,0,"getFileSystemManager"),B}),w(r,"request",function(e){return new d.default(e).request()}),w(r,"downloadFile",function(e){return new d.default(e).downloadFile()}),w(r,"uploadFile",function(e){return new d.default(e).uploadFile()}),w(r,"hideKeyboard",function(e){N.hideKeyboard(e)}),w(r,"onKeyboardInput",function(e){N.onKeyboardInput(e)}),w(r,"offKeyboardInput",function(e){N.offKeyboardInput(e)}),w(r,"onKeyboardConfirm",function(e){N.onKeyboardConfirm(e)}),w(r,"offKeyboardConfirm",function(e){N.offKeyboardConfirm(e)}),w(r,"onKeyboardComplete",function(e){N.onKeyboardComplete(e)}),w(r,"offKeyboardComplete",function(e){N.offKeyboardComplete(e)}),w(r,"showKeyboard",function(e){N.showKeyboard(e)}),w(r,"setKeepScreenOn",function(){}),w(r,"showToast",function(e){K.showToast(e)}),w(r,"hideToast",function(){K.hideToast()}),w(r,"showLoading",function(e){K.showLoading(e)}),w(r,"hideLoading",function(){K.hideLoading()}),w(r,"showModal",function(e){K.showModal(e)}),w(r,"getNetworkType",function(e){V.getNetworkType(e)}),w(r,"checkSession",function(e){O.checkSession(e)}),w(r,"login",function(e){console.log("begin login"),O.login(e)}),w(r,"getShareInfo",function(e){I.getShareInfo(e)}),w(r,"hideShareMenu",function(e){I.hideShareMenu(e)}),w(r,"onShareAppMessage",function(e){I.onShareAppMessage(e)}),w(r,"offShareAppMessage",function(e){I.offShareAppMessage(e)}),w(r,"showShareMenu",function(e){I.showShareMenu(e)}),w(r,"shareAppMessage",function(e){I.shareAppMessage(e)}),w(r,"updateShareMenu",function(e){I.updateShareMenu(e)}),w(r,"getLocation",function(e){if(e)if(e.appid){var t={appid:e.appid,needCity:1};BK.Director.getLocation(t,function(t,n,r){var i=!1;if(0==t){if(r){i=!0;var o={latitude:r.latitude,longitude:r.longitude,speed:r.speed,altitude:r.altitude,verticalAccuracy:r.verticalAccuracy,horizontalAccuracy:r.horizontalAccuracy};e.success&&e.success(o)}}else a.default.d(0,0,"getLocation failed, statusCode="+t);i||e.fail&&e.fail(),e.complete&&e.complete()})}else a.default.d(0,0,"getLocation failed, no appid");else a.default.d(0,0,"getLocation failed, no object")}),w(r,"setStorage",function(e){P.setStorage(e)}),w(r,"setStorageSync",function(e,t){P.setStorageSync(e,t)}),w(r,"getStorage",function(e){P.getStorage(e)}),w(r,"getStorageSync",function(e){return P.getStorageSync(e)}),w(r,"getStorageInfoSync",function(){return P.getStorageInfoSync()}),w(r,"getStorageInfo",function(e){P.getStorageInfo(e)}),w(r,"removeStorage",function(e){P.removeStorage(e)}),w(r,"removeStorageSync",function(e){P.removeStorageSync(e)}),w(r,"clearStorage",function(e){P.clearStorage(e)}),w(r,"clearStorageSync",function(){P.clearStorageSync()}),w(r,"connectSocket",function(e){return console.log("connect socket "),h.default.newConnection(e)}),w(r,"closeSocket",function(e){h.default.closeSocket(e)}),w(r,"onSocketOpen",function(e){console.log("open socket "),h.default.publishEvent(h.default.SOCK_EVENT_OPEN,e)}),w(r,"onSocketClose",function(e){console.log("close socket "),h.default.publishEvent(h.default.SOCK_EVENT_CLOSE,e)}),w(r,"onSocketMessage",function(e){h.default.publishEvent(h.default.SOCK_EVENT_MESSAGE,e)}),w(r,"onSocketError",function(e){h.default.publishEvent(h.default.SOCK_EVENT_ERROR,e)}),w(r,"sendSocketMessage",function(e){h.default.sendMessage(e)}),w(r,"loadFont",function(e){return e}),w(r,"onError",function(){}),w(r,"getFriendCloudStorage",function(e){e&&(BK.Script.log(0,0,"getFriendCloudStorage, object="+JSON.stringify(e)),BK.QQ.getRankList(function(t,n,r){BK.Script.log(0,0,"getRankList, cmd="+n+", errCode="+t+", data="+JSON.stringify(r));var i=[];if(r&&r.data&&r.data.rankList)for(var a=r.data.rankList,o=0;o<a.length;o++){var u=a[o];BK.Script.log(1,1,"rankList i:"+o+" nick:"+u.nick+"  head:"+u.head+" accPoint:"+u.busData.accPoint);var l="";u&&u.ownFlag&&1==u.ownFlag&&(l=GameStatusInfo.openId),i[o]={avatarUrl:u.head,nickname:u.nick,openid:l,KVDataList:[{key:"key_score",value:u.busData.accPoint}]}}BK.Script.log(0,0,"getRankList, result="+JSON.stringify(i)),e.success&&e.success({data:i}),e.complete&&e.complete()}))}),w(r,"getUserCloudStorage",function(e){BK.Script.log(0,0,"getUserCloudStorage, object="+JSON.stringify(e))}),w(r,"getGroupCloudStorage",function(e){BK.Script.log(0,0,"getGroupCloudStorage, object="+JSON.stringify(e))}),w(r,"getSharedCanvas",function(){return F}),w(r,"removeUserCloudStorage",function(e){BK.Script.log(0,0,"removeUserCloudStorage, object="+JSON.stringify(e))}),w(r,"setUserCloudStorage",function(e){if(BK.Script.log(0,0,"setUserCloudStorage, object="+JSON.stringify(e)),e&&e.KVDataList){for(var t=[],n=0,r=0;r<e.KVDataList.length;r++){var i=e.KVDataList[r];if("key_score"==i.key){n=i.value;break}}t[0]={openId:GameStatusInfo.openId,scoreInfo:{score:n}},BK.QQ.scoreUpload(t,function(t,n,r){0==t?e.success&&e.success():e.fail&&e.fail(),e.complete&&e.complete()},null)}}),w(r,"checkIsUserAdvisedToRest",function(e){}),w(r,"createUserInfoButton",function(e){}),w(r,"createOpenSettingButton",function(e){}),w(r,"getSetting",function(e){e.success&&e.success({errMsg:"getSetting:ok",authSetting:{"scope.userInfo":!0,"scope.userLocation":!0,"scope.address":!0,"scope.invoiceTitle":!0,"scope.werun":!0,"scope.record":!0,"scope.writePhotosAlbum":!0,"scope.camera":!0}})}),w(r,"openSetting",function(e){}),w(r,"getWeRunData",function(e){}),w(r,"authorize",function(e){}),w(r,"createGameClubButton",function(e){}),w(r,"openCustomerServiceConversation",function(e){}),w(r,"getOpenDataContext",function(){return a.default.d(0,0,"getOpenDataContext, context="+M),M}),w(r,"onMessage",function(e){a.default.d(0,0,"onMessage, callback="+e),U=e}),w(r,"postMessage",function(e){a.default.d(0,0,"postMessage, messageObj="+JSON.stringify(e)+", bkOnMessageCallback="+U),U&&U(e)}),w(r,"createBannerAd",function(e){if(e)return new E.BannerAd(e.adUnitId,e.style)}),w(r,"createRewardedVideoAd",function(e){if(e)return new E.RewardedVideoAd(e.adUnitId,e.style,e.videoType)}),w(r,"startAccelerometer",function(e){G.startAccelerometer(e)}),w(r,"onAccelerometerChange",function(e){G.onAccelerometerChange(e)}),w(r,"stopAccelerometer",function(e){G.stopAccelerometer(e)}),w(r,"requestMidasPayment",function(e){R.requestMidasPayment(e)}),w(r,"onAudioInterruptionEnd",function(e){L=e}),w(r,"offAudioInterruptionEnd",function(e){L=void 0}),w(r,"onAudioInterruptionBegin",function(e){x=e}),w(r,"offAudioInterruptionBegin",function(e){x=void 0}),w(r,"vibrateLong",function(){console.warn("coming soon")}),w(r,"vibrateShort",function(){BK.Script.log(1,0,"vibrateShort not implement yet")}),w(r,"getPerformance",function(){return{now:function(){return(new Date).getTime()}}}),w(r,"triggerGC",function(){BK.Script.log(1,0,"triggerGC not implement yet")}),w(r,"onNetworkStatusChange",function(e){D=e}),r);j.env={},j.env.USER_DATA_PATH="",t.Image=u.default,t.Canvas=o.default,t.wx=j,t.Log=a.default,t.setInterval=c.setInterval,t.clearInterval=c.clearInterval,t.setTimeout=c.setTimeout,t.clearTimeout=c.clearTimeout,t.cancelAnimationFrame=c.cancelAnimationFrame,t.requestAnimationFrame=c.requestAnimationFrame,window.Image=u.default,window.wx=j,window.setInterval=c.setInterval,window.clearInterval=c.clearInterval,window.setTimeout=c.setTimeout,window.clearTimeout=c.clearTimeout,window.cancelAnimationFrame=c.cancelAnimationFrame,window.requestAnimationFrame=c.requestAnimationFrame,window.DOMParser=k}]);
var bkadapter={'version':'3b66e1f','author' :'curiezhu','time' :'Wed Sep 19 2018 14:16:32 GMT+0800 (CST)'};